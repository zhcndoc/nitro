import{aC as U,aD as j,a7 as B,aE as H,h as O,j as V,aF as T,aG as $,d as F,o as C,c as _,w as v,r as X,O as M,l as s,aa as L,aH as G,aI as Z,m as z,a as J,aJ as k,aK as K,t as A,k as g,aL as R,aM as I,aN as Q,V as D,y as q,aO as Y,aP as ee,L as te,a9 as ne,X as W,aQ as oe,aR as ae,z as ie,F as se,aS as le}from"./CWSiIDVY.js";let re=0;function ue(n){const t=new WeakMap,u=U();function E(a){if(n.mode!=="popLayout")return;const c=a.offsetParent,d=c instanceof HTMLElement&&c.offsetWidth||0,l={height:a.offsetHeight||0,width:a.offsetWidth||0,top:a.offsetTop,left:a.offsetLeft,right:0};l.right=d-l.width-l.left;const p=n.anchorX==="left"?`left: ${l.left}px`:`right: ${l.right}px`,x=`pop-${re++}`;a.dataset.motionPopId=x;const r=document.createElement("style");u.value.nonce&&(r.nonce=u.value.nonce),t.set(a,r),document.head.appendChild(r),r.sheet&&r.sheet.insertRule(`
    [data-motion-pop-id="${x}"] {
      position: absolute !important;
      width: ${l.width}px !important;
      height: ${l.height}px !important;
      top: ${l.top}px !important;
      ${p} !important;
      }
      `)}function y(a){const c=t.get(a);c&&(t.delete(a),j.render(()=>{document.head.removeChild(c)}))}return{addPopStyle:E,removePopStyle:y}}function ce(n){const t=new Map,u=new Set,{addPopStyle:E,removePopStyle:y}=ue(n);function a(e,i){let o=t.get(e);o||(o={motions:new Set,exitingMotions:new Set,el:e},t.set(e,o)),o.motions.add(i)}function c(e,i){const o=t.get(e);o&&(o.exitingMotions.delete(i),o.exitingMotions.size===0&&o.done&&r(o))}function d(e){u.add(e)}function l(e){u.delete(e)}const p={initial:n.initial,custom:n.custom,register:a,onMotionExitComplete:c,registerPending:d,unregisterPending:l};B(()=>n.custom,e=>{p.custom=e},{flush:"pre"}),H(p),O(()=>{p.initial=void 0});function x(e){if(e instanceof HTMLElement&&!e.hasAttribute($)){e.setAttribute($,"");const i=T.get(e);i&&!i.presenceContainer&&(i.presenceContainer=e,a(e,i))}}function r(e){var i,o,h,P,f;y(e.el),(i=e.done)==null||i.call(e),e.done=void 0,(o=e.el)!=null&&o.isConnected?(P=(h=e.motions.values().next())==null?void 0:h.value)==null||P.didUpdate():(e.motions.forEach(w=>{w.unmount()}),e.motions.clear()),(f=n.onExitComplete)==null||f.call(n)}function S(e,i){x(e);const o=t.get(e);o&&(o.exitingMotions.clear(),o.motions.forEach(h=>{h.setActive("exit",!1),h.getSnapshot(h.options,!0)})),i()}function b(e,i){var o,h,P;const f=e;x(f),u.forEach(m=>{m.element&&f.contains(m.element)&&(m.presenceContainer=f,a(f,m),u.delete(m))});const w=t.get(f),N=T.get(f);if((!w||w.motions.size===0)&&!N){i(),(o=n.onExitComplete)==null||o.call(n);return}w.done=i,E(f),w.motions.forEach(m=>{w.exitingMotions.add(m),m.setActive("exit",!0),m.getSnapshot(m.options,!1)}),(P=(h=w.motions.values().next())==null?void 0:h.value)==null||P.didUpdate()}return V(()=>{t.forEach(e=>{e.motions.forEach(i=>{i.unmount()})}),t.clear()}),{enter:S,exit:b}}const de=F({name:"AnimatePresence",inheritAttrs:!0,__name:"AnimatePresence",props:{mode:{default:"sync"},initial:{type:Boolean,default:!0},as:{},custom:{},onExitComplete:{},anchorX:{default:"left"}},setup(n){const t=n,{enter:u,exit:E}=ce(t),y=z(()=>t.mode!=="wait"?{tag:t.as}:{mode:t.mode==="wait"?"out-in":void 0});return(a,c)=>(C(),_(L(a.mode==="wait"?G:Z),M(y.value,{appear:"",onLeave:s(E),onEnter:s(u)}),{default:v(()=>[X(a.$slots,"default")]),_:3},16,["onLeave","onEnter"]))}}),fe={slots:{base:"rounded-md w-full",overlay:"fixed inset-0 bg-default/75 backdrop-blur-sm will-change-opacity",content:"fixed inset-0 flex items-center justify-center cursor-zoom-out focus:outline-none",zoomedImage:"w-full h-auto max-w-[95vw] max-h-[95vh] object-contain rounded-md"},variants:{zoom:{true:"will-change-transform"},open:{true:""}},compoundVariants:[{zoom:!0,open:!1,class:"cursor-zoom-in"}]},me=["onClick"],he=Object.assign({inheritAttrs:!1},{__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,required:!0},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},class:{type:null,required:!1},zoom:{type:Boolean,required:!1,default:!0},ui:{type:null,required:!1}},setup(n){const t=n,u=J(),[E,y]=k(),[a,c]=k(),d=ne(!1),l=z(()=>W({extend:W(fe),...u.ui?.prose?.img||{}})({zoom:t.zoom,open:d.value})),p=z(()=>{if(t.src?.startsWith("/")&&!t.src.startsWith("//")){const r=oe(ae(ie().app.baseURL));if(r!=="/"&&!t.src.startsWith(r))return se(r,t.src)}return t.src}),x=z(()=>`${p.value}::${le()}`);return t.zoom&&K(window,"scroll",()=>{d.value=!1}),(r,S)=>(C(),A(te,null,[g(s(E),null,{default:v(()=>[(C(),_(L(s(R)),M({src:p.value,alt:n.alt,width:n.width,height:n.height},r.$attrs,{class:l.value.base({class:[t.ui?.base,t.class]})}),null,16,["src","alt","width","height","class"]))]),_:1}),g(s(a),null,{default:v(()=>[(C(),_(L(s(R)),M({src:p.value,alt:n.alt},r.$attrs,{class:l.value.zoomedImage({class:[t.ui?.zoomedImage]})}),null,16,["src","alt","class"]))]),_:1}),n.zoom?(C(),_(s(ee),{key:0,open:d.value,"onUpdate:open":S[0]||(S[0]=b=>d.value=b),modal:!1},{default:v(({close:b})=>[g(s(Q),{"as-child":""},{default:v(()=>[g(s(I),{"layout-id":x.value,"as-child":"",transition:{type:"spring",bounce:.15,duration:.5,ease:"easeInOut"}},{default:v(()=>[g(s(y))]),_:1},8,["layout-id"])]),_:1}),g(s(Y),null,{default:v(()=>[g(s(de),null,{default:v(()=>[d.value?(C(),_(s(I),{key:0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:D(l.value.overlay({class:[t.ui?.overlay]}))},null,8,["class"])):q("",!0),d.value?(C(),A("div",{key:1,class:D(l.value.content({class:[t.ui?.content]})),onClick:b},[g(s(I),{"as-child":"","layout-id":x.value,transition:{type:"spring",bounce:.15,duration:.5,ease:"easeInOut"}},{default:v(()=>[g(s(c))]),_:1},8,["layout-id"])],10,me)):q("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["open"])):(C(),_(s(y),{key:1}))],64))}});export{he as default};
