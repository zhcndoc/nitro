[{"data":1,"prerenderedAt":2141},["ShallowReactive",2],{"navigation":3,"-docs-cache":223,"-docs-cache-surround":2136},[4,83,208,213,220],{"title":5,"path":6,"stem":7,"children":8,"icon":82},"","/docs","1.docs/1.index",[9,12,17,22,27,32,37,42,47,52,57,62,67,72,77],{"title":10,"path":6,"stem":7,"icon":11},"介绍","i-lucide-compass",{"title":13,"path":14,"stem":15,"icon":16},"快速开始","/docs/quick-start","1.docs/2.quick-start","i-lucide-zap",{"title":18,"path":19,"stem":20,"icon":21},"渲染器","/docs/renderer","1.docs/4.renderer","ri:layout-masonry-line",{"title":23,"path":24,"stem":25,"icon":26},"服务器路由","/docs/routing","1.docs/5.routing","ri:direction-line",{"title":28,"path":29,"stem":30,"icon":31},"资源","/docs/assets","1.docs/50.assets","ri:image-2-line",{"title":33,"path":34,"stem":35,"icon":36},"配置","/docs/configuration","1.docs/50.configuration","ri:settings-3-line",{"title":38,"path":39,"stem":40,"icon":41},"数据库","/docs/database","1.docs/50.database","ri:database-2-line",{"title":43,"path":44,"stem":45,"icon":46},"生命周期","/docs/lifecycle","1.docs/50.lifecycle","i-lucide-layers",{"title":48,"path":49,"stem":50,"icon":51},"插件","/docs/plugins","1.docs/50.plugins","ri:plug-line",{"title":53,"path":54,"stem":55,"icon":56},"任务","/docs/tasks","1.docs/50.tasks","codicon:run-all",{"title":58,"path":59,"stem":60,"icon":61},"服务器入口","/docs/server-entry","1.docs/6.server-entry","ri:server-line",{"title":63,"path":64,"stem":65,"icon":66},"缓存","/docs/cache","1.docs/7.cache","ri:speed-line",{"title":68,"path":69,"stem":70,"icon":71},"KV 存储","/docs/storage","1.docs/8.storage","carbon:datastore",{"title":73,"path":74,"stem":75,"icon":76},"迁移指南","/docs/migration","1.docs/99.migration","ri:arrow-right-up-line",{"title":78,"path":79,"stem":80,"icon":81},"夜间通道","/docs/nightly","1.docs/99.nightly","ri:moon-fill","i-lucide-book-open",{"title":84,"path":85,"stem":86,"children":87,"icon":89},"概述","/deploy","2.deploy/0.index",[88,90,111],{"title":84,"path":85,"stem":86,"icon":89},"ri:upload-cloud-2-line",{"title":91,"path":92,"stem":93,"children":94,"page":110},"Runtimes","/deploy/runtimes","2.deploy/10.runtimes",[95,100,105],{"title":96,"path":97,"stem":98,"icon":99},"Node.js","/deploy/runtimes/node","2.deploy/10.runtimes/1.node","akar-icons:node-fill",{"title":101,"path":102,"stem":103,"icon":104},"Bun","/deploy/runtimes/bun","2.deploy/10.runtimes/bun","simple-icons:bun",{"title":106,"path":107,"stem":108,"icon":109},"Deno","/deploy/runtimes/deno","2.deploy/10.runtimes/deno","simple-icons:deno",false,{"title":112,"path":113,"stem":114,"children":115,"page":110},"Providers","/deploy/providers","2.deploy/20.providers",[116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204],{"title":117,"path":118,"stem":119},"Alwaysdata","/deploy/providers/alwaysdata","2.deploy/20.providers/alwaysdata",{"title":121,"path":122,"stem":123},"AWS Lambda","/deploy/providers/aws","2.deploy/20.providers/aws",{"title":125,"path":126,"stem":127},"AWS Amplify","/deploy/providers/aws-amplify","2.deploy/20.providers/aws-amplify",{"title":129,"path":130,"stem":131},"Azure","/deploy/providers/azure","2.deploy/20.providers/azure",{"title":133,"path":134,"stem":135},"Cleavr","/deploy/providers/cleavr","2.deploy/20.providers/cleavr",{"title":137,"path":138,"stem":139},"Cloudflare","/deploy/providers/cloudflare","2.deploy/20.providers/cloudflare",{"title":141,"path":142,"stem":143},"Deno Deploy","/deploy/providers/deno-deploy","2.deploy/20.providers/deno-deploy",{"title":145,"path":146,"stem":147},"DigitalOcean","/deploy/providers/digitalocean","2.deploy/20.providers/digitalocean",{"title":149,"path":150,"stem":151},"Firebase","/deploy/providers/firebase","2.deploy/20.providers/firebase",{"title":153,"path":154,"stem":155},"Flightcontrol","/deploy/providers/flightcontrol","2.deploy/20.providers/flightcontrol",{"title":157,"path":158,"stem":159},"Genezio","/deploy/providers/genezio","2.deploy/20.providers/genezio",{"title":161,"path":162,"stem":163},"GitHub Pages","/deploy/providers/github-pages","2.deploy/20.providers/github-pages",{"title":165,"path":166,"stem":167},"GitLab Pages","/deploy/providers/gitlab-pages","2.deploy/20.providers/gitlab-pages",{"title":169,"path":170,"stem":171},"Heroku","/deploy/providers/heroku","2.deploy/20.providers/heroku",{"title":173,"path":174,"stem":175},"IIS","/deploy/providers/iis","2.deploy/20.providers/iis",{"title":177,"path":178,"stem":179},"Koyeb","/deploy/providers/koyeb","2.deploy/20.providers/koyeb",{"title":181,"path":182,"stem":183},"Netlify","/deploy/providers/netlify","2.deploy/20.providers/netlify",{"title":185,"path":186,"stem":187},"Platform.sh","/deploy/providers/platform-sh","2.deploy/20.providers/platform-sh",{"title":189,"path":190,"stem":191},"Render.com","/deploy/providers/render","2.deploy/20.providers/render",{"title":193,"path":194,"stem":195},"StormKit","/deploy/providers/stormkit","2.deploy/20.providers/stormkit",{"title":197,"path":198,"stem":199},"Vercel","/deploy/providers/vercel","2.deploy/20.providers/vercel",{"title":201,"path":202,"stem":203},"Zeabur","/deploy/providers/zeabur","2.deploy/20.providers/zeabur",{"title":205,"path":206,"stem":207},"Zerops","/deploy/providers/zerops","2.deploy/20.providers/zerops",{"title":33,"path":209,"stem":210,"children":211,"icon":36},"/config","3.config/0.index",[212],{"title":33,"path":209,"stem":210,"icon":36},{"title":214,"path":215,"stem":216,"children":217,"icon":219},"示例","/examples","4.examples/0.index",[218],{"title":214,"path":215,"stem":216,"icon":219},"i-lucide-folder-code",{"title":5,"path":221,"stem":222},"/","index",{"id":224,"title":63,"body":225,"description":2130,"extension":2131,"meta":2132,"navigation":2133,"path":64,"seo":2134,"stem":65,"__hash__":2135},"content/1.docs/7.cache.md",{"type":226,"value":227,"toc":2120,"icon":66},"minimark",[228,235,239,247,260,358,365,382,388,401,404,411,414,714,725,778,783,1063,1067,1072,1083,1328,1331,1334,1337,1344,1411,1423,1524,1526,1533,1559,1569,1639,1646,1731,1734,1742,1878,1881,1889,1938,1941,2033,2036,2059,2062,2110,2116],[229,230,231],"warning",{},[232,233,234],"p",{},"Nitro v3 Alpha 文档仍在开发中 — 可能会有更新、不完善之处和偶发的不准确。",[236,237,238],"h2",{"id":238},"缓存的事件处理器",[232,240,241,242,246],{},"要缓存事件处理器，您只需使用 ",[243,244,245],"code",{},"defineCachedHandler"," 方法。",[232,248,249,250,253,254,259],{},"它的用法类似于 ",[243,251,252],{},"defineHandler","，但增加了第二个 ",[255,256,258],"a",{"href":257},"#options","options"," 参数用于缓存配置。",[261,262,267],"pre",{"className":263,"code":264,"filename":265,"language":266,"meta":5,"style":5},"language-ts shiki shiki-themes github-light github-dark github-dark","import { defineCachedHandler } from \"nitro/cache\";\n\nexport default defineCachedHandler((event) => {\n  return \"我被缓存一小时\";\n}, { maxAge: 60 * 60 });\n","routes/cached.ts","ts",[243,268,269,292,299,328,339],{"__ignoreMap":5},[270,271,274,278,282,285,289],"span",{"class":272,"line":273},"line",1,[270,275,277],{"class":276},"so5gQ","import",[270,279,281],{"class":280},"slsVL"," { defineCachedHandler } ",[270,283,284],{"class":276},"from",[270,286,288],{"class":287},"sfrk1"," \"nitro/cache\"",[270,290,291],{"class":280},";\n",[270,293,295],{"class":272,"line":294},2,[270,296,298],{"emptyLinePlaceholder":297},true,"\n",[270,300,302,305,308,312,315,319,322,325],{"class":272,"line":301},3,[270,303,304],{"class":276},"export",[270,306,307],{"class":276}," default",[270,309,311],{"class":310},"shcOC"," defineCachedHandler",[270,313,314],{"class":280},"((",[270,316,318],{"class":317},"sQHwn","event",[270,320,321],{"class":280},") ",[270,323,324],{"class":276},"=>",[270,326,327],{"class":280}," {\n",[270,329,331,334,337],{"class":272,"line":330},4,[270,332,333],{"class":276},"  return",[270,335,336],{"class":287}," \"我被缓存一小时\"",[270,338,291],{"class":280},[270,340,342,345,349,352,355],{"class":272,"line":341},5,[270,343,344],{"class":280},"}, { maxAge: ",[270,346,348],{"class":347},"suiK_","60",[270,350,351],{"class":276}," *",[270,353,354],{"class":347}," 60",[270,356,357],{"class":280}," });\n",[232,359,360,361,364],{},"在此示例中，响应将在 1 小时内被缓存，同时在后台更新缓存时，将发送一个过期值到客户端。如果您希望立即返回更新后的响应，请设置 ",[243,362,363],{},"swr: false","。",[366,367,368],"important",{},[232,369,370,374,375,381],{},[371,372,373],"strong",{},"处理缓存响应时，所有传入的请求头都会被丢弃。"," 如果您定义了 ",[255,376,377,380],{"href":257},[243,378,379],{},"varies"," 选项","，则只有指定的请求头会在缓存和提供响应时被考虑。",[232,383,384,385,387],{},"有关可用选项的更多详细信息，请参阅 ",[255,386,258],{"href":257}," 部分。",[389,390,391],"note",{},[232,392,393,394,397,398,400],{},"您也可以使用 ",[243,395,396],{},"cachedEventHandler"," 方法作为 ",[243,399,245],{}," 的别名。",[236,402,403],{"id":403},"缓存的函数",[232,405,406,407,410],{},"您还可以使用 ",[243,408,409],{},"defineCachedFunction"," 函数缓存一个普通函数。对于缓存并复用多个处理器中调用的非事件处理器函数返回值非常有用。",[232,412,413],{},"例如，您可能想要缓存一个 API 调用的结果，缓存时间为 1 小时：",[261,415,418],{"className":263,"code":416,"filename":417,"language":266,"meta":5,"style":5},"import { defineHandler, type H3Event } from \"nitro/h3\";\nimport { defineHandler, defineCachedFunction } from \"nitro/cache\";\n\nexport default defineHandler(async (event) => {\n  const { repo } = event.context.params;\n  const stars = await cachedGHStars(repo).catch(() => 0)\n\n  return { repo, stars }\n});\n\nconst cachedGHStars = defineCachedFunction(async (repo: string) => {\n  const data = await fetch(`https://api.github.com/repos/${repo}`).then(res => res.json());\n\n  return data.stargazers_count;\n}, {\n  maxAge: 60 * 60,\n  name: \"ghStars\",\n  getKey: (repo: string) => repo\n});\n","routes/api/stars/[...repo].ts",[243,419,420,440,453,457,483,503,537,542,550,556,561,594,642,647,655,661,676,687,709],{"__ignoreMap":5},[270,421,422,424,427,430,433,435,438],{"class":272,"line":273},[270,423,277],{"class":276},[270,425,426],{"class":280}," { defineHandler, ",[270,428,429],{"class":276},"type",[270,431,432],{"class":280}," H3Event } ",[270,434,284],{"class":276},[270,436,437],{"class":287}," \"nitro/h3\"",[270,439,291],{"class":280},[270,441,442,444,447,449,451],{"class":272,"line":294},[270,443,277],{"class":276},[270,445,446],{"class":280}," { defineHandler, defineCachedFunction } ",[270,448,284],{"class":276},[270,450,288],{"class":287},[270,452,291],{"class":280},[270,454,455],{"class":272,"line":301},[270,456,298],{"emptyLinePlaceholder":297},[270,458,459,461,463,466,469,472,475,477,479,481],{"class":272,"line":330},[270,460,304],{"class":276},[270,462,307],{"class":276},[270,464,465],{"class":310}," defineHandler",[270,467,468],{"class":280},"(",[270,470,471],{"class":276},"async",[270,473,474],{"class":280}," (",[270,476,318],{"class":317},[270,478,321],{"class":280},[270,480,324],{"class":276},[270,482,327],{"class":280},[270,484,485,488,491,494,497,500],{"class":272,"line":341},[270,486,487],{"class":276},"  const",[270,489,490],{"class":280}," { ",[270,492,493],{"class":347},"repo",[270,495,496],{"class":280}," } ",[270,498,499],{"class":276},"=",[270,501,502],{"class":280}," event.context.params;\n",[270,504,506,508,511,514,517,520,523,526,529,531,534],{"class":272,"line":505},6,[270,507,487],{"class":276},[270,509,510],{"class":347}," stars",[270,512,513],{"class":276}," =",[270,515,516],{"class":276}," await",[270,518,519],{"class":310}," cachedGHStars",[270,521,522],{"class":280},"(repo).",[270,524,525],{"class":310},"catch",[270,527,528],{"class":280},"(() ",[270,530,324],{"class":276},[270,532,533],{"class":347}," 0",[270,535,536],{"class":280},")\n",[270,538,540],{"class":272,"line":539},7,[270,541,298],{"emptyLinePlaceholder":297},[270,543,545,547],{"class":272,"line":544},8,[270,546,333],{"class":276},[270,548,549],{"class":280}," { repo, stars }\n",[270,551,553],{"class":272,"line":552},9,[270,554,555],{"class":280},"});\n",[270,557,559],{"class":272,"line":558},10,[270,560,298],{"emptyLinePlaceholder":297},[270,562,564,567,569,571,574,576,578,580,582,585,588,590,592],{"class":272,"line":563},11,[270,565,566],{"class":276},"const",[270,568,519],{"class":347},[270,570,513],{"class":276},[270,572,573],{"class":310}," defineCachedFunction",[270,575,468],{"class":280},[270,577,471],{"class":276},[270,579,474],{"class":280},[270,581,493],{"class":317},[270,583,584],{"class":276},":",[270,586,587],{"class":347}," string",[270,589,321],{"class":280},[270,591,324],{"class":276},[270,593,327],{"class":280},[270,595,597,599,602,604,606,609,611,614,616,619,622,625,627,630,633,636,639],{"class":272,"line":596},12,[270,598,487],{"class":276},[270,600,601],{"class":347}," data",[270,603,513],{"class":276},[270,605,516],{"class":276},[270,607,608],{"class":310}," fetch",[270,610,468],{"class":280},[270,612,613],{"class":287},"`https://api.github.com/repos/${",[270,615,493],{"class":280},[270,617,618],{"class":287},"}`",[270,620,621],{"class":280},").",[270,623,624],{"class":310},"then",[270,626,468],{"class":280},[270,628,629],{"class":317},"res",[270,631,632],{"class":276}," =>",[270,634,635],{"class":280}," res.",[270,637,638],{"class":310},"json",[270,640,641],{"class":280},"());\n",[270,643,645],{"class":272,"line":644},13,[270,646,298],{"emptyLinePlaceholder":297},[270,648,650,652],{"class":272,"line":649},14,[270,651,333],{"class":276},[270,653,654],{"class":280}," data.stargazers_count;\n",[270,656,658],{"class":272,"line":657},15,[270,659,660],{"class":280},"}, {\n",[270,662,664,667,669,671,673],{"class":272,"line":663},16,[270,665,666],{"class":280},"  maxAge: ",[270,668,348],{"class":347},[270,670,351],{"class":276},[270,672,354],{"class":347},[270,674,675],{"class":280},",\n",[270,677,679,682,685],{"class":272,"line":678},17,[270,680,681],{"class":280},"  name: ",[270,683,684],{"class":287},"\"ghStars\"",[270,686,675],{"class":280},[270,688,690,693,696,698,700,702,704,706],{"class":272,"line":689},18,[270,691,692],{"class":310},"  getKey",[270,694,695],{"class":280},": (",[270,697,493],{"class":317},[270,699,584],{"class":276},[270,701,587],{"class":347},[270,703,321],{"class":280},[270,705,324],{"class":276},[270,707,708],{"class":280}," repo\n",[270,710,712],{"class":272,"line":711},19,[270,713,555],{"class":280},[232,715,716,717,720,721,724],{},"在开发环境中，星星数量将被缓存到 ",[243,718,719],{},".nitro/cache/functions/ghStars/\u003Cowner>/\u003Crepo>.json"," 中，",[243,722,723],{},"value"," 是星星的数量：",[261,726,729],{"className":727,"code":728,"language":638,"meta":5,"style":5},"language-json shiki shiki-themes github-light github-dark github-dark","{\"expires\":1677851092249,\"value\":43991,\"mtime\":1677847492540,\"integrity\":\"ZUHcsxCWEH\"}\n",[243,730,731],{"__ignoreMap":5},[270,732,733,736,739,741,744,747,750,752,755,757,760,762,765,767,770,772,775],{"class":272,"line":273},[270,734,735],{"class":280},"{",[270,737,738],{"class":347},"\"expires\"",[270,740,584],{"class":280},[270,742,743],{"class":347},"1677851092249",[270,745,746],{"class":280},",",[270,748,749],{"class":347},"\"value\"",[270,751,584],{"class":280},[270,753,754],{"class":347},"43991",[270,756,746],{"class":280},[270,758,759],{"class":347},"\"mtime\"",[270,761,584],{"class":280},[270,763,764],{"class":347},"1677847492540",[270,766,746],{"class":280},[270,768,769],{"class":347},"\"integrity\"",[270,771,584],{"class":280},[270,773,774],{"class":287},"\"ZUHcsxCWEH\"",[270,776,777],{"class":280},"}\n",[366,779,780],{},[232,781,782],{},"由于缓存数据被序列化为 JSON，因此非常重要的是，缓存的函数不能返回任何无法序列化的内容，如 Symbols、Maps、Sets 等。",[784,785,786,789],"callout",{},[232,787,788],{},"如果您使用边缘工作者（Edge Workers）来托管您的应用，应该遵循以下说明。",[790,791,793,800,812,1060],"collapsible",{"name":792},"边缘工作者说明",[232,794,795,796,799],{},"在边缘工作者中，实例会在每个请求后被销毁。Nitro 会自动使用 ",[243,797,798],{},"event.waitUntil"," 来在缓存更新时保持实例存活，同时将响应发送给客户端。",[232,801,802,803],{},"为了确保您的缓存函数在边缘工作者中正常工作，",[371,804,805,806,808,809,811],{},"您应该始终将 ",[243,807,318],{}," 作为第一个参数传递给使用 ",[243,810,409],{}," 定义的函数。",[261,813,816],{"className":263,"code":814,"filename":417,"highlights":815,"language":266,"meta":5,"style":5},"import { defineCachedFunction } from \"nitro/cache\";\n\n\nexport default defineHandler(async (event) => {\n  const { repo } = event.context.params;\n  const stars = await cachedGHStars(event, repo).catch(() => 0)\n\n  return { repo, stars }\n});\n\nconst cachedGHStars = defineCachedFunction(async (event: H3Event, repo: string) => {\n  const data = await fetch(`https://api.github.com/repos/${repo}`).then(res => res.json());\n\n  return data.stargazers_count;\n}, {\n  maxAge: 60 * 60,\n  name: \"ghStars\",\n  getKey: (event: H3Event, repo: string) => repo\n});\n",[341,558,678],[243,817,818,831,835,839,861,877,902,906,912,916,921,959,995,999,1005,1009,1021,1030,1056],{"__ignoreMap":5},[270,819,820,822,825,827,829],{"class":272,"line":273},[270,821,277],{"class":276},[270,823,824],{"class":280}," { defineCachedFunction } ",[270,826,284],{"class":276},[270,828,288],{"class":287},[270,830,291],{"class":280},[270,832,833],{"class":272,"line":294},[270,834,298],{"emptyLinePlaceholder":297},[270,836,837],{"class":272,"line":301},[270,838,298],{"emptyLinePlaceholder":297},[270,840,841,843,845,847,849,851,853,855,857,859],{"class":272,"line":330},[270,842,304],{"class":276},[270,844,307],{"class":276},[270,846,465],{"class":310},[270,848,468],{"class":280},[270,850,471],{"class":276},[270,852,474],{"class":280},[270,854,318],{"class":317},[270,856,321],{"class":280},[270,858,324],{"class":276},[270,860,327],{"class":280},[270,862,865,867,869,871,873,875],{"class":863,"line":341},[272,864],"highlight",[270,866,487],{"class":276},[270,868,490],{"class":280},[270,870,493],{"class":347},[270,872,496],{"class":280},[270,874,499],{"class":276},[270,876,502],{"class":280},[270,878,879,881,883,885,887,889,892,894,896,898,900],{"class":272,"line":505},[270,880,487],{"class":276},[270,882,510],{"class":347},[270,884,513],{"class":276},[270,886,516],{"class":276},[270,888,519],{"class":310},[270,890,891],{"class":280},"(event, repo).",[270,893,525],{"class":310},[270,895,528],{"class":280},[270,897,324],{"class":276},[270,899,533],{"class":347},[270,901,536],{"class":280},[270,903,904],{"class":272,"line":539},[270,905,298],{"emptyLinePlaceholder":297},[270,907,908,910],{"class":272,"line":544},[270,909,333],{"class":276},[270,911,549],{"class":280},[270,913,914],{"class":272,"line":552},[270,915,555],{"class":280},[270,917,919],{"class":918,"line":558},[272,864],[270,920,298],{"emptyLinePlaceholder":297},[270,922,923,925,927,929,931,933,935,937,939,941,944,947,949,951,953,955,957],{"class":272,"line":563},[270,924,566],{"class":276},[270,926,519],{"class":347},[270,928,513],{"class":276},[270,930,573],{"class":310},[270,932,468],{"class":280},[270,934,471],{"class":276},[270,936,474],{"class":280},[270,938,318],{"class":317},[270,940,584],{"class":276},[270,942,943],{"class":310}," H3Event",[270,945,946],{"class":280},", ",[270,948,493],{"class":317},[270,950,584],{"class":276},[270,952,587],{"class":347},[270,954,321],{"class":280},[270,956,324],{"class":276},[270,958,327],{"class":280},[270,960,961,963,965,967,969,971,973,975,977,979,981,983,985,987,989,991,993],{"class":272,"line":596},[270,962,487],{"class":276},[270,964,601],{"class":347},[270,966,513],{"class":276},[270,968,516],{"class":276},[270,970,608],{"class":310},[270,972,468],{"class":280},[270,974,613],{"class":287},[270,976,493],{"class":280},[270,978,618],{"class":287},[270,980,621],{"class":280},[270,982,624],{"class":310},[270,984,468],{"class":280},[270,986,629],{"class":317},[270,988,632],{"class":276},[270,990,635],{"class":280},[270,992,638],{"class":310},[270,994,641],{"class":280},[270,996,997],{"class":272,"line":644},[270,998,298],{"emptyLinePlaceholder":297},[270,1000,1001,1003],{"class":272,"line":649},[270,1002,333],{"class":276},[270,1004,654],{"class":280},[270,1006,1007],{"class":272,"line":657},[270,1008,660],{"class":280},[270,1010,1011,1013,1015,1017,1019],{"class":272,"line":663},[270,1012,666],{"class":280},[270,1014,348],{"class":347},[270,1016,351],{"class":276},[270,1018,354],{"class":347},[270,1020,675],{"class":280},[270,1022,1024,1026,1028],{"class":1023,"line":678},[272,864],[270,1025,681],{"class":280},[270,1027,684],{"class":287},[270,1029,675],{"class":280},[270,1031,1032,1034,1036,1038,1040,1042,1044,1046,1048,1050,1052,1054],{"class":272,"line":689},[270,1033,692],{"class":310},[270,1035,695],{"class":280},[270,1037,318],{"class":317},[270,1039,584],{"class":276},[270,1041,943],{"class":310},[270,1043,946],{"class":280},[270,1045,493],{"class":317},[270,1047,584],{"class":276},[270,1049,587],{"class":347},[270,1051,321],{"class":280},[270,1053,324],{"class":276},[270,1055,708],{"class":280},[270,1057,1058],{"class":272,"line":711},[270,1059,555],{"class":280},[232,1061,1062],{},"这样，函数在后台更新缓存时能够保持实例存活，而不会影响客户端的响应速度。",[1064,1065,1066],"h3",{"id":1066},"边缘工作者",[232,1068,1069,1070,799],{},"如果您使用边缘工作者部署应用，每个请求后实例都会被销毁。Nitro 会自动使用 ",[243,1071,798],{},[232,1073,1074,1075],{},"为了确保您的缓存函数在边缘工作者中如预期工作，",[371,1076,1077,1078,1080,1081,811],{},"应该始终将 ",[243,1079,318],{}," 作为第一个参数传递给用 ",[243,1082,409],{},[261,1084,1087],{"className":263,"code":1085,"filename":417,"highlights":1086,"language":266,"meta":5,"style":5},"import { defineHandler, defineCachedFunction, type H3Event } from \"nitro/runtime\";\n\nexport default defineHandler(async (event) => {\n  const { repo } = event.context.params;\n  const stars = await cachedGHStars(event, repo).catch(() => 0)\n\n  return { repo, stars }\n});\n\nconst cachedGHStars = defineCachedFunction(async (event: H3Event, repo: string) => {\n  const data = await fetch(`https://api.github.com/repos/${repo}`).then(res => res.json());\n\n  return data.stargazers_count;\n}, {\n  maxAge: 60 * 60,\n  name: \"ghStars\",\n  getKey: (event: H3Event, repo: string) => repo\n});\n",[341,558,678],[243,1088,1089,1107,1111,1133,1147,1172,1176,1182,1186,1190,1227,1263,1267,1273,1277,1289,1297,1324],{"__ignoreMap":5},[270,1090,1091,1093,1096,1098,1100,1102,1105],{"class":272,"line":273},[270,1092,277],{"class":276},[270,1094,1095],{"class":280}," { defineHandler, defineCachedFunction, ",[270,1097,429],{"class":276},[270,1099,432],{"class":280},[270,1101,284],{"class":276},[270,1103,1104],{"class":287}," \"nitro/runtime\"",[270,1106,291],{"class":280},[270,1108,1109],{"class":272,"line":294},[270,1110,298],{"emptyLinePlaceholder":297},[270,1112,1113,1115,1117,1119,1121,1123,1125,1127,1129,1131],{"class":272,"line":301},[270,1114,304],{"class":276},[270,1116,307],{"class":276},[270,1118,465],{"class":310},[270,1120,468],{"class":280},[270,1122,471],{"class":276},[270,1124,474],{"class":280},[270,1126,318],{"class":317},[270,1128,321],{"class":280},[270,1130,324],{"class":276},[270,1132,327],{"class":280},[270,1134,1135,1137,1139,1141,1143,1145],{"class":272,"line":330},[270,1136,487],{"class":276},[270,1138,490],{"class":280},[270,1140,493],{"class":347},[270,1142,496],{"class":280},[270,1144,499],{"class":276},[270,1146,502],{"class":280},[270,1148,1150,1152,1154,1156,1158,1160,1162,1164,1166,1168,1170],{"class":1149,"line":341},[272,864],[270,1151,487],{"class":276},[270,1153,510],{"class":347},[270,1155,513],{"class":276},[270,1157,516],{"class":276},[270,1159,519],{"class":310},[270,1161,891],{"class":280},[270,1163,525],{"class":310},[270,1165,528],{"class":280},[270,1167,324],{"class":276},[270,1169,533],{"class":347},[270,1171,536],{"class":280},[270,1173,1174],{"class":272,"line":505},[270,1175,298],{"emptyLinePlaceholder":297},[270,1177,1178,1180],{"class":272,"line":539},[270,1179,333],{"class":276},[270,1181,549],{"class":280},[270,1183,1184],{"class":272,"line":544},[270,1185,555],{"class":280},[270,1187,1188],{"class":272,"line":552},[270,1189,298],{"emptyLinePlaceholder":297},[270,1191,1193,1195,1197,1199,1201,1203,1205,1207,1209,1211,1213,1215,1217,1219,1221,1223,1225],{"class":1192,"line":558},[272,864],[270,1194,566],{"class":276},[270,1196,519],{"class":347},[270,1198,513],{"class":276},[270,1200,573],{"class":310},[270,1202,468],{"class":280},[270,1204,471],{"class":276},[270,1206,474],{"class":280},[270,1208,318],{"class":317},[270,1210,584],{"class":276},[270,1212,943],{"class":310},[270,1214,946],{"class":280},[270,1216,493],{"class":317},[270,1218,584],{"class":276},[270,1220,587],{"class":347},[270,1222,321],{"class":280},[270,1224,324],{"class":276},[270,1226,327],{"class":280},[270,1228,1229,1231,1233,1235,1237,1239,1241,1243,1245,1247,1249,1251,1253,1255,1257,1259,1261],{"class":272,"line":563},[270,1230,487],{"class":276},[270,1232,601],{"class":347},[270,1234,513],{"class":276},[270,1236,516],{"class":276},[270,1238,608],{"class":310},[270,1240,468],{"class":280},[270,1242,613],{"class":287},[270,1244,493],{"class":280},[270,1246,618],{"class":287},[270,1248,621],{"class":280},[270,1250,624],{"class":310},[270,1252,468],{"class":280},[270,1254,629],{"class":317},[270,1256,632],{"class":276},[270,1258,635],{"class":280},[270,1260,638],{"class":310},[270,1262,641],{"class":280},[270,1264,1265],{"class":272,"line":596},[270,1266,298],{"emptyLinePlaceholder":297},[270,1268,1269,1271],{"class":272,"line":644},[270,1270,333],{"class":276},[270,1272,654],{"class":280},[270,1274,1275],{"class":272,"line":649},[270,1276,660],{"class":280},[270,1278,1279,1281,1283,1285,1287],{"class":272,"line":657},[270,1280,666],{"class":280},[270,1282,348],{"class":347},[270,1284,351],{"class":276},[270,1286,354],{"class":347},[270,1288,675],{"class":280},[270,1290,1291,1293,1295],{"class":272,"line":663},[270,1292,681],{"class":280},[270,1294,684],{"class":287},[270,1296,675],{"class":280},[270,1298,1300,1302,1304,1306,1308,1310,1312,1314,1316,1318,1320,1322],{"class":1299,"line":678},[272,864],[270,1301,692],{"class":310},[270,1303,695],{"class":280},[270,1305,318],{"class":317},[270,1307,584],{"class":276},[270,1309,943],{"class":310},[270,1311,946],{"class":280},[270,1313,493],{"class":317},[270,1315,584],{"class":276},[270,1317,587],{"class":347},[270,1319,321],{"class":280},[270,1321,324],{"class":276},[270,1323,708],{"class":280},[270,1325,1326],{"class":272,"line":689},[270,1327,555],{"class":280},[232,1329,1330],{},"通过这种方式，函数将在更新缓存时能够保持实例存活而不会减慢客户端的响应速度。",[236,1332,1333],{"id":1333},"缓存路由规则",[232,1335,1336],{},"此功能使您能够在主配置文件中直接添加基于通配符模式的缓存路由。这对于为应用程序的一部分提供全局缓存策略特别有用。",[232,1338,1339,1340,1343],{},"使用 ",[243,1341,1342],{},"stale-while-revalidate"," 行为缓存所有博客路由 1 小时：",[261,1345,1348],{"className":263,"code":1346,"filename":1347,"language":266,"meta":5,"style":5},"import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n  routeRules: {\n    \"/blog/**\": { cache: { maxAge: 60 * 60 } },\n  },\n});\n","nitro.config.ts",[243,1349,1350,1364,1368,1380,1385,1402,1407],{"__ignoreMap":5},[270,1351,1352,1354,1357,1359,1362],{"class":272,"line":273},[270,1353,277],{"class":276},[270,1355,1356],{"class":280}," { defineNitroConfig } ",[270,1358,284],{"class":276},[270,1360,1361],{"class":287}," \"nitro/config\"",[270,1363,291],{"class":280},[270,1365,1366],{"class":272,"line":294},[270,1367,298],{"emptyLinePlaceholder":297},[270,1369,1370,1372,1374,1377],{"class":272,"line":301},[270,1371,304],{"class":276},[270,1373,307],{"class":276},[270,1375,1376],{"class":310}," defineNitroConfig",[270,1378,1379],{"class":280},"({\n",[270,1381,1382],{"class":272,"line":330},[270,1383,1384],{"class":280},"  routeRules: {\n",[270,1386,1387,1390,1393,1395,1397,1399],{"class":272,"line":341},[270,1388,1389],{"class":287},"    \"/blog/**\"",[270,1391,1392],{"class":280},": { cache: { maxAge: ",[270,1394,348],{"class":347},[270,1396,351],{"class":276},[270,1398,354],{"class":347},[270,1400,1401],{"class":280}," } },\n",[270,1403,1404],{"class":272,"line":505},[270,1405,1406],{"class":280},"  },\n",[270,1408,1409],{"class":272,"line":539},[270,1410,555],{"class":280},[232,1412,1413,1414,1418,1419,1422],{},"如果想使用一个 ",[255,1415,1417],{"href":1416},"#cache-storage","自定义缓存存储"," 挂载点，可以使用 ",[243,1420,1421],{},"base"," 选项：",[261,1424,1426],{"className":263,"code":1425,"filename":1347,"language":266,"meta":5,"style":5},"import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n  storage: {\n    redis: {\n      driver: \"redis\",\n      url: \"redis://localhost:6379\",\n    },\n  },\n  routeRules: {\n    \"/blog/**\": { cache: { maxAge: 60 * 60, base: \"redis\" } },\n  },\n});\n",[243,1427,1428,1440,1444,1454,1459,1464,1474,1484,1489,1493,1497,1516,1520],{"__ignoreMap":5},[270,1429,1430,1432,1434,1436,1438],{"class":272,"line":273},[270,1431,277],{"class":276},[270,1433,1356],{"class":280},[270,1435,284],{"class":276},[270,1437,1361],{"class":287},[270,1439,291],{"class":280},[270,1441,1442],{"class":272,"line":294},[270,1443,298],{"emptyLinePlaceholder":297},[270,1445,1446,1448,1450,1452],{"class":272,"line":301},[270,1447,304],{"class":276},[270,1449,307],{"class":276},[270,1451,1376],{"class":310},[270,1453,1379],{"class":280},[270,1455,1456],{"class":272,"line":330},[270,1457,1458],{"class":280},"  storage: {\n",[270,1460,1461],{"class":272,"line":341},[270,1462,1463],{"class":280},"    redis: {\n",[270,1465,1466,1469,1472],{"class":272,"line":505},[270,1467,1468],{"class":280},"      driver: ",[270,1470,1471],{"class":287},"\"redis\"",[270,1473,675],{"class":280},[270,1475,1476,1479,1482],{"class":272,"line":539},[270,1477,1478],{"class":280},"      url: ",[270,1480,1481],{"class":287},"\"redis://localhost:6379\"",[270,1483,675],{"class":280},[270,1485,1486],{"class":272,"line":544},[270,1487,1488],{"class":280},"    },\n",[270,1490,1491],{"class":272,"line":552},[270,1492,1406],{"class":280},[270,1494,1495],{"class":272,"line":558},[270,1496,1384],{"class":280},[270,1498,1499,1501,1503,1505,1507,1509,1512,1514],{"class":272,"line":563},[270,1500,1389],{"class":287},[270,1502,1392],{"class":280},[270,1504,348],{"class":347},[270,1506,351],{"class":276},[270,1508,354],{"class":347},[270,1510,1511],{"class":280},", base: ",[270,1513,1471],{"class":287},[270,1515,1401],{"class":280},[270,1517,1518],{"class":272,"line":596},[270,1519,1406],{"class":280},[270,1521,1522],{"class":272,"line":644},[270,1523,555],{"class":280},[236,1525,1417],{"id":1417},[232,1527,1528,1529,1532],{},"Nitro 将缓存数据存储在 ",[243,1530,1531],{},"cache"," 存储挂载点中。",[1534,1535,1536,1546],"ul",{},[1537,1538,1539,1540,364],"li",{},"在生产环境中，默认使用 ",[255,1541,1545],{"href":1542,"rel":1543},"https://unstorage.unjs.io/drivers/memory",[1544],"nofollow","memory driver",[1537,1547,1548,1549,1554,1555,1558],{},"在开发环境中，使用 ",[255,1550,1553],{"href":1551,"rel":1552},"https://unstorage.unjs.io/drivers/fs",[1544],"filesystem driver","，写入临时目录（",[243,1556,1557],{},".nitro/cache","）。",[232,1560,1561,1562,1565,1566,1568],{},"要覆盖生产存储，请使用 ",[243,1563,1564],{},"storage"," 选项设置 ",[243,1567,1531],{}," 挂载点：",[261,1570,1572],{"className":263,"code":1571,"filename":1347,"language":266,"meta":5,"style":5},"import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n  storage: {\n    cache: {\n      driver: 'redis',\n      /* Redis 连接器选项 */\n    }\n  }\n})\n",[243,1573,1574,1586,1590,1600,1604,1609,1618,1624,1629,1634],{"__ignoreMap":5},[270,1575,1576,1578,1580,1582,1584],{"class":272,"line":273},[270,1577,277],{"class":276},[270,1579,1356],{"class":280},[270,1581,284],{"class":276},[270,1583,1361],{"class":287},[270,1585,291],{"class":280},[270,1587,1588],{"class":272,"line":294},[270,1589,298],{"emptyLinePlaceholder":297},[270,1591,1592,1594,1596,1598],{"class":272,"line":301},[270,1593,304],{"class":276},[270,1595,307],{"class":276},[270,1597,1376],{"class":310},[270,1599,1379],{"class":280},[270,1601,1602],{"class":272,"line":330},[270,1603,1458],{"class":280},[270,1605,1606],{"class":272,"line":341},[270,1607,1608],{"class":280},"    cache: {\n",[270,1610,1611,1613,1616],{"class":272,"line":505},[270,1612,1468],{"class":280},[270,1614,1615],{"class":287},"'redis'",[270,1617,675],{"class":280},[270,1619,1620],{"class":272,"line":539},[270,1621,1623],{"class":1622},"sCsY4","      /* Redis 连接器选项 */\n",[270,1625,1626],{"class":272,"line":544},[270,1627,1628],{"class":280},"    }\n",[270,1630,1631],{"class":272,"line":552},[270,1632,1633],{"class":280},"  }\n",[270,1635,1636],{"class":272,"line":558},[270,1637,1638],{"class":280},"})\n",[232,1640,1641,1642,1645],{},"在开发环境，您也可以通过 ",[243,1643,1644],{},"devStorage"," 选项覆盖缓存挂载点：",[261,1647,1649],{"className":263,"code":1648,"filename":1347,"language":266,"meta":5,"style":5},"import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n  storage: {\n    cache: {\n      // 生产环境缓存存储\n    },\n  },\n  devStorage: {\n    cache: {\n      driver: 'redis',\n      /* Redis 连接器选项 */\n    }\n  }\n})\n",[243,1650,1651,1663,1667,1677,1681,1685,1690,1694,1698,1703,1707,1715,1719,1723,1727],{"__ignoreMap":5},[270,1652,1653,1655,1657,1659,1661],{"class":272,"line":273},[270,1654,277],{"class":276},[270,1656,1356],{"class":280},[270,1658,284],{"class":276},[270,1660,1361],{"class":287},[270,1662,291],{"class":280},[270,1664,1665],{"class":272,"line":294},[270,1666,298],{"emptyLinePlaceholder":297},[270,1668,1669,1671,1673,1675],{"class":272,"line":301},[270,1670,304],{"class":276},[270,1672,307],{"class":276},[270,1674,1376],{"class":310},[270,1676,1379],{"class":280},[270,1678,1679],{"class":272,"line":330},[270,1680,1458],{"class":280},[270,1682,1683],{"class":272,"line":341},[270,1684,1608],{"class":280},[270,1686,1687],{"class":272,"line":505},[270,1688,1689],{"class":1622},"      // 生产环境缓存存储\n",[270,1691,1692],{"class":272,"line":539},[270,1693,1488],{"class":280},[270,1695,1696],{"class":272,"line":544},[270,1697,1406],{"class":280},[270,1699,1700],{"class":272,"line":552},[270,1701,1702],{"class":280},"  devStorage: {\n",[270,1704,1705],{"class":272,"line":558},[270,1706,1608],{"class":280},[270,1708,1709,1711,1713],{"class":272,"line":563},[270,1710,1468],{"class":280},[270,1712,1615],{"class":287},[270,1714,675],{"class":280},[270,1716,1717],{"class":272,"line":596},[270,1718,1623],{"class":1622},[270,1720,1721],{"class":272,"line":644},[270,1722,1628],{"class":280},[270,1724,1725],{"class":272,"line":649},[270,1726,1633],{"class":280},[270,1728,1729],{"class":272,"line":657},[270,1730,1638],{"class":280},[236,1732,1733],{"id":1733},"选项",[232,1735,1736,1738,1739,1741],{},[243,1737,245],{}," 和 ",[243,1740,409],{}," 函数接受以下选项：",[1743,1744,1745,1758,1767,1780,1793,1802,1816,1832,1844,1854,1862],"field-group",{},[1746,1747,1749],"field",{"name":1421,"type":1748},"string",[232,1750,1751,1752,1755,1756,364],{},"用于缓存的存储挂载点名称。",[1753,1754],"br",{},"\n默认值为 ",[243,1757,1531],{},[1746,1759,1761],{"name":1760,"type":1748},"name",[232,1762,1763,1764,364],{},"缓存名称，若未提供则从函数名推断，默认值为 ",[243,1765,1766],{},"'_'",[1746,1768,1770],{"name":1769,"type":1748},"group",[232,1771,1772,1773,1776,1777,364],{},"缓存分组。事件处理器默认为 ",[243,1774,1775],{},"'nitro/handlers'","，函数默认为 ",[243,1778,1779],{},"'nitro/functions'",[1746,1781,1784],{"name":1782,"type":1783},"getKey()","(...args) => string",[232,1785,1786,1787,1789,1790,1792],{},"接收与原始函数相同参数并返回缓存键（",[243,1788,1748],{},"）的函数。",[1753,1791],{},"\n若不提供，将使用内置哈希函数根据参数生成键。",[1746,1794,1796],{"name":1795,"type":1748},"integrity",[232,1797,1798,1799,1801],{},"用于使缓存失效的值（变动时失效）。",[1753,1800],{},"\n默认基于函数代码计算，在开发环境用于函数代码变更时失效缓存。",[1746,1803,1806],{"name":1804,"type":1805},"maxAge","number",[232,1807,1808,1809,1811,1812,1815],{},"缓存最大有效时间（秒）。",[1753,1810],{},"\n默认 ",[243,1813,1814],{},"1","（秒）。",[1746,1817,1819],{"name":1818,"type":1805},"staleMaxAge",[232,1820,1821,1822,1825,1826,1811,1828,1831],{},"过期缓存最大有效时间（秒）。设置为 ",[243,1823,1824],{},"-1"," 时启用后台更新同时返回过期缓存（SWR）。",[1753,1827],{},[243,1829,1830],{},"0","（禁用）。",[1746,1833,1836],{"name":1834,"type":1835},"swr","boolean",[232,1837,1838,1839,1811,1841,364],{},"是否启用 stale-while-revalidate 行为，在异步后台更新时提供过期响应。",[1753,1840],{},[243,1842,1843],{},"true",[1746,1845,1848],{"name":1846,"type":1847},"shouldInvalidateCache()","(...args) => boolean",[232,1849,1850,1851,1853],{},"返回 ",[243,1852,1835],{},"，决定是否使当前缓存失效并创建新缓存。",[1746,1855,1857],{"name":1856,"type":1847},"shouldBypassCache()",[232,1858,1850,1859,1861],{},[243,1860,1835],{},"，决定是否绕过当前缓存但不失效现有缓存条目。",[1746,1863,1865],{"name":379,"type":1864},"string[]",[232,1866,1867,1868,1873,1874,1877],{},"用于缓存的请求头数组，",[255,1869,1872],{"href":1870,"rel":1871},"https://github.com/nitrojs/nitro/issues/1031",[1544],"了解更多","。多租户环境中可传递 ",[243,1875,1876],{},"['host', 'x-forwarded-host']","，以确保这些请求头被考虑且缓存针对每个租户唯一。",[236,1879,1880],{"id":1880},"缓存键和失效",[232,1882,1883,1885,1886,1888],{},[243,1884,409],{}," 或 ",[243,1887,245],{}," 生成缓存键的模式如下：",[261,1890,1892],{"className":263,"code":1891,"language":266,"meta":5,"style":5},"`${options.group}:${options.name}:${options.getKey(...args)}.json`\n",[243,1893,1894],{"__ignoreMap":5},[270,1895,1896,1899,1901,1904,1906,1909,1911,1913,1915,1917,1919,1921,1924,1926,1929,1932,1935],{"class":272,"line":273},[270,1897,1898],{"class":287},"`${",[270,1900,258],{"class":280},[270,1902,1903],{"class":287},".",[270,1905,1769],{"class":280},[270,1907,1908],{"class":287},"}:${",[270,1910,258],{"class":280},[270,1912,1903],{"class":287},[270,1914,1760],{"class":280},[270,1916,1908],{"class":287},[270,1918,258],{"class":280},[270,1920,1903],{"class":287},[270,1922,1923],{"class":310},"getKey",[270,1925,468],{"class":287},[270,1927,1928],{"class":276},"...",[270,1930,1931],{"class":280},"args",[270,1933,1934],{"class":287},")",[270,1936,1937],{"class":287},"}.json`\n",[232,1939,1940],{},"例如，以下缓存函数：",[261,1942,1944],{"className":263,"code":1943,"language":266,"meta":5,"style":5},"import { defineCachedFunction } from \"nitro/cache\";\n\nconst getAccessToken = defineCachedFunction(() => {\n  return String(Date.now())\n}, {\n  maxAge: 10,\n  name: \"getAccessToken\",\n  getKey: () => \"default\"\n});\n",[243,1945,1946,1958,1962,1979,1995,1999,2008,2017,2029],{"__ignoreMap":5},[270,1947,1948,1950,1952,1954,1956],{"class":272,"line":273},[270,1949,277],{"class":276},[270,1951,824],{"class":280},[270,1953,284],{"class":276},[270,1955,288],{"class":287},[270,1957,291],{"class":280},[270,1959,1960],{"class":272,"line":294},[270,1961,298],{"emptyLinePlaceholder":297},[270,1963,1964,1966,1969,1971,1973,1975,1977],{"class":272,"line":301},[270,1965,566],{"class":276},[270,1967,1968],{"class":347}," getAccessToken",[270,1970,513],{"class":276},[270,1972,573],{"class":310},[270,1974,528],{"class":280},[270,1976,324],{"class":276},[270,1978,327],{"class":280},[270,1980,1981,1983,1986,1989,1992],{"class":272,"line":330},[270,1982,333],{"class":276},[270,1984,1985],{"class":310}," String",[270,1987,1988],{"class":280},"(Date.",[270,1990,1991],{"class":310},"now",[270,1993,1994],{"class":280},"())\n",[270,1996,1997],{"class":272,"line":341},[270,1998,660],{"class":280},[270,2000,2001,2003,2006],{"class":272,"line":505},[270,2002,666],{"class":280},[270,2004,2005],{"class":347},"10",[270,2007,675],{"class":280},[270,2009,2010,2012,2015],{"class":272,"line":539},[270,2011,681],{"class":280},[270,2013,2014],{"class":287},"\"getAccessToken\"",[270,2016,675],{"class":280},[270,2018,2019,2021,2024,2026],{"class":272,"line":544},[270,2020,692],{"class":310},[270,2022,2023],{"class":280},": () ",[270,2025,324],{"class":276},[270,2027,2028],{"class":287}," \"default\"\n",[270,2030,2031],{"class":272,"line":552},[270,2032,555],{"class":280},[232,2034,2035],{},"其缓存键将为：",[261,2037,2039],{"className":263,"code":2038,"language":266,"meta":5,"style":5},"nitro:functions:getAccessToken:default.json\n",[243,2040,2041],{"__ignoreMap":5},[270,2042,2043,2046,2048,2051,2053,2056],{"class":272,"line":273},[270,2044,2045],{"class":310},"nitro",[270,2047,584],{"class":280},[270,2049,2050],{"class":310},"functions",[270,2052,584],{"class":280},[270,2054,2055],{"class":310},"getAccessToken",[270,2057,2058],{"class":280},":default.json\n",[232,2060,2061],{},"您可以通过以下代码使缓存函数的条目失效：",[261,2063,2065],{"className":263,"code":2064,"language":266,"meta":5,"style":5},"import { useStorage } from \"nitro/storage\";\n\nawait useStorage('cache').removeItem('nitro:functions:getAccessToken:default.json')\n",[243,2066,2067,2081,2085],{"__ignoreMap":5},[270,2068,2069,2071,2074,2076,2079],{"class":272,"line":273},[270,2070,277],{"class":276},[270,2072,2073],{"class":280}," { useStorage } ",[270,2075,284],{"class":276},[270,2077,2078],{"class":287}," \"nitro/storage\"",[270,2080,291],{"class":280},[270,2082,2083],{"class":272,"line":294},[270,2084,298],{"emptyLinePlaceholder":297},[270,2086,2087,2090,2093,2095,2098,2100,2103,2105,2108],{"class":272,"line":301},[270,2088,2089],{"class":276},"await",[270,2091,2092],{"class":310}," useStorage",[270,2094,468],{"class":280},[270,2096,2097],{"class":287},"'cache'",[270,2099,621],{"class":280},[270,2101,2102],{"class":310},"removeItem",[270,2104,468],{"class":280},[270,2106,2107],{"class":287},"'nitro:functions:getAccessToken:default.json'",[270,2109,536],{"class":280},[2111,2112,2113],"read-more",{"to":69},[232,2114,2115],{},"更多关于 Nitro 存储的内容。",[2117,2118,2119],"style",{},"html pre.shiki code .so5gQ, html code.shiki .so5gQ{--shiki-light:#D73A49;--shiki-default:#F97583;--shiki-dark:#F97583}html pre.shiki code .slsVL, html code.shiki .slsVL{--shiki-light:#24292E;--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8}html pre.shiki code .sfrk1, html code.shiki .sfrk1{--shiki-light:#032F62;--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF}html pre.shiki code .shcOC, html code.shiki .shcOC{--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#B392F0}html pre.shiki code .sQHwn, html code.shiki .sQHwn{--shiki-light:#E36209;--shiki-default:#FFAB70;--shiki-dark:#FFAB70}html pre.shiki code .suiK_, html code.shiki .suiK_{--shiki-light:#005CC5;--shiki-default:#79B8FF;--shiki-dark:#79B8FF}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sCsY4, html code.shiki .sCsY4{--shiki-light:#6A737D;--shiki-default:#6A737D;--shiki-dark:#6A737D}",{"title":5,"searchDepth":294,"depth":294,"links":2121},[2122,2123,2126,2127,2128,2129],{"id":238,"depth":294,"text":238},{"id":403,"depth":294,"text":403,"children":2124},[2125],{"id":1066,"depth":301,"text":1066},{"id":1333,"depth":294,"text":1333},{"id":1417,"depth":294,"text":1417},{"id":1733,"depth":294,"text":1733},{"id":1880,"depth":294,"text":1880},"Nitro 提供了一种构建在存储层之上的缓存系统。","md",{"icon":66},{"icon":66},{"title":63,"description":2130},"B1eYR30in78SSeV_03G4aRs-tOxifAeGA2o8phztMfg",[2137,2139],{"title":58,"path":59,"stem":60,"description":2138,"icon":61,"children":-1},"使用服务器入口可创建全局中间件，该中间件会在所有路由匹配之前运行。",{"title":68,"path":69,"stem":70,"description":2140,"icon":71,"children":-1},"Nitro 提供了一个内置存储层，可以抽象文件系统、数据库或任何其他数据源。",1771507939013]