[{"data":1,"prerenderedAt":1492},["ShallowReactive",2],{"navigation":3,"-docs-tasks":223,"-docs-tasks-surround":1487},[4,83,208,213,220],{"title":5,"path":6,"stem":7,"children":8,"icon":82},"","/docs","1.docs/1.index",[9,12,17,22,27,32,37,42,47,52,57,62,67,72,77],{"title":10,"path":6,"stem":7,"icon":11},"介绍","i-lucide-compass",{"title":13,"path":14,"stem":15,"icon":16},"快速开始","/docs/quick-start","1.docs/2.quick-start","i-lucide-zap",{"title":18,"path":19,"stem":20,"icon":21},"渲染器","/docs/renderer","1.docs/4.renderer","ri:layout-masonry-line",{"title":23,"path":24,"stem":25,"icon":26},"服务器路由","/docs/routing","1.docs/5.routing","ri:direction-line",{"title":28,"path":29,"stem":30,"icon":31},"资源","/docs/assets","1.docs/50.assets","ri:image-2-line",{"title":33,"path":34,"stem":35,"icon":36},"配置","/docs/configuration","1.docs/50.configuration","ri:settings-3-line",{"title":38,"path":39,"stem":40,"icon":41},"数据库","/docs/database","1.docs/50.database","ri:database-2-line",{"title":43,"path":44,"stem":45,"icon":46},"生命周期","/docs/lifecycle","1.docs/50.lifecycle","i-lucide-layers",{"title":48,"path":49,"stem":50,"icon":51},"插件","/docs/plugins","1.docs/50.plugins","ri:plug-line",{"title":53,"path":54,"stem":55,"icon":56},"任务","/docs/tasks","1.docs/50.tasks","codicon:run-all",{"title":58,"path":59,"stem":60,"icon":61},"服务器入口","/docs/server-entry","1.docs/6.server-entry","ri:server-line",{"title":63,"path":64,"stem":65,"icon":66},"缓存","/docs/cache","1.docs/7.cache","ri:speed-line",{"title":68,"path":69,"stem":70,"icon":71},"KV 存储","/docs/storage","1.docs/8.storage","carbon:datastore",{"title":73,"path":74,"stem":75,"icon":76},"迁移指南","/docs/migration","1.docs/99.migration","ri:arrow-right-up-line",{"title":78,"path":79,"stem":80,"icon":81},"夜间通道","/docs/nightly","1.docs/99.nightly","ri:moon-fill","i-lucide-book-open",{"title":84,"path":85,"stem":86,"children":87,"icon":89},"概述","/deploy","2.deploy/0.index",[88,90,111],{"title":84,"path":85,"stem":86,"icon":89},"ri:upload-cloud-2-line",{"title":91,"path":92,"stem":93,"children":94,"page":110},"Runtimes","/deploy/runtimes","2.deploy/10.runtimes",[95,100,105],{"title":96,"path":97,"stem":98,"icon":99},"Node.js","/deploy/runtimes/node","2.deploy/10.runtimes/1.node","akar-icons:node-fill",{"title":101,"path":102,"stem":103,"icon":104},"Bun","/deploy/runtimes/bun","2.deploy/10.runtimes/bun","simple-icons:bun",{"title":106,"path":107,"stem":108,"icon":109},"Deno","/deploy/runtimes/deno","2.deploy/10.runtimes/deno","simple-icons:deno",false,{"title":112,"path":113,"stem":114,"children":115,"page":110},"Providers","/deploy/providers","2.deploy/20.providers",[116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204],{"title":117,"path":118,"stem":119},"Alwaysdata","/deploy/providers/alwaysdata","2.deploy/20.providers/alwaysdata",{"title":121,"path":122,"stem":123},"AWS Lambda","/deploy/providers/aws","2.deploy/20.providers/aws",{"title":125,"path":126,"stem":127},"AWS Amplify","/deploy/providers/aws-amplify","2.deploy/20.providers/aws-amplify",{"title":129,"path":130,"stem":131},"Azure","/deploy/providers/azure","2.deploy/20.providers/azure",{"title":133,"path":134,"stem":135},"Cleavr","/deploy/providers/cleavr","2.deploy/20.providers/cleavr",{"title":137,"path":138,"stem":139},"Cloudflare","/deploy/providers/cloudflare","2.deploy/20.providers/cloudflare",{"title":141,"path":142,"stem":143},"Deno Deploy","/deploy/providers/deno-deploy","2.deploy/20.providers/deno-deploy",{"title":145,"path":146,"stem":147},"DigitalOcean","/deploy/providers/digitalocean","2.deploy/20.providers/digitalocean",{"title":149,"path":150,"stem":151},"Firebase","/deploy/providers/firebase","2.deploy/20.providers/firebase",{"title":153,"path":154,"stem":155},"Flightcontrol","/deploy/providers/flightcontrol","2.deploy/20.providers/flightcontrol",{"title":157,"path":158,"stem":159},"Genezio","/deploy/providers/genezio","2.deploy/20.providers/genezio",{"title":161,"path":162,"stem":163},"GitHub Pages","/deploy/providers/github-pages","2.deploy/20.providers/github-pages",{"title":165,"path":166,"stem":167},"GitLab Pages","/deploy/providers/gitlab-pages","2.deploy/20.providers/gitlab-pages",{"title":169,"path":170,"stem":171},"Heroku","/deploy/providers/heroku","2.deploy/20.providers/heroku",{"title":173,"path":174,"stem":175},"IIS","/deploy/providers/iis","2.deploy/20.providers/iis",{"title":177,"path":178,"stem":179},"Koyeb","/deploy/providers/koyeb","2.deploy/20.providers/koyeb",{"title":181,"path":182,"stem":183},"Netlify","/deploy/providers/netlify","2.deploy/20.providers/netlify",{"title":185,"path":186,"stem":187},"Platform.sh","/deploy/providers/platform-sh","2.deploy/20.providers/platform-sh",{"title":189,"path":190,"stem":191},"Render.com","/deploy/providers/render","2.deploy/20.providers/render",{"title":193,"path":194,"stem":195},"StormKit","/deploy/providers/stormkit","2.deploy/20.providers/stormkit",{"title":197,"path":198,"stem":199},"Vercel","/deploy/providers/vercel","2.deploy/20.providers/vercel",{"title":201,"path":202,"stem":203},"Zeabur","/deploy/providers/zeabur","2.deploy/20.providers/zeabur",{"title":205,"path":206,"stem":207},"Zerops","/deploy/providers/zerops","2.deploy/20.providers/zerops",{"title":33,"path":209,"stem":210,"children":211,"icon":36},"/config","3.config/0.index",[212],{"title":33,"path":209,"stem":210,"icon":36},{"title":214,"path":215,"stem":216,"children":217,"icon":219},"示例","/examples","4.examples/0.index",[218],{"title":214,"path":215,"stem":216,"icon":219},"i-lucide-folder-code",{"title":5,"path":221,"stem":222},"/","index",{"id":224,"title":53,"body":225,"description":1481,"extension":1482,"meta":1483,"navigation":1484,"path":54,"seo":1485,"stem":55,"__hash__":1486},"content/1.docs/50.tasks.md",{"type":226,"value":227,"toc":1465,"icon":56},"minimark",[228,235,239,253,256,390,393,396,403,418,424,536,539,542,660,672,678,681,693,777,781,842,845,852,856,961,964,967,971,978,981,1118,1124,1131,1377,1383,1387,1396,1399,1417,1420,1443,1446,1449,1456,1461],[229,230,231],"warning",{},[232,233,234],"p",{},"Nitro v3 Alpha 文档仍在开发中 — 预计会有更新、不完善之处及偶尔的错误。",[236,237,238],"h2",{"id":238},"选择实验性功能",[240,241,242],"important",{},[232,243,244,245,252],{},"\n任务支持目前是实验性的。\n请查看 ",[246,247,251],"a",{"href":248,"rel":249},"https://github.com/nitrojs/nitro/issues/1974",[250],"nofollow","nitrojs/nitro#1974"," 以获取相关讨论。",[232,254,255],{},"为了使用任务 API，您需要启用实验性功能标志。",[257,258,259,343],"CodeGroup",{},[260,261,266],"pre",{"className":262,"code":263,"filename":264,"language":265,"meta":5,"style":5},"language-ts shiki shiki-themes github-light github-dark github-dark","import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n  experimental: {\n    tasks: true\n  }\n})\n","nitro.config.ts","ts",[267,268,269,292,299,315,321,331,337],"code",{"__ignoreMap":5},[270,271,274,278,282,285,289],"span",{"class":272,"line":273},"line",1,[270,275,277],{"class":276},"so5gQ","import",[270,279,281],{"class":280},"slsVL"," { defineNitroConfig } ",[270,283,284],{"class":276},"from",[270,286,288],{"class":287},"sfrk1"," \"nitro/config\"",[270,290,291],{"class":280},";\n",[270,293,295],{"class":272,"line":294},2,[270,296,298],{"emptyLinePlaceholder":297},true,"\n",[270,300,302,305,308,312],{"class":272,"line":301},3,[270,303,304],{"class":276},"export",[270,306,307],{"class":276}," default",[270,309,311],{"class":310},"shcOC"," defineNitroConfig",[270,313,314],{"class":280},"({\n",[270,316,318],{"class":272,"line":317},4,[270,319,320],{"class":280},"  experimental: {\n",[270,322,324,327],{"class":272,"line":323},5,[270,325,326],{"class":280},"    tasks: ",[270,328,330],{"class":329},"suiK_","true\n",[270,332,334],{"class":272,"line":333},6,[270,335,336],{"class":280},"  }\n",[270,338,340],{"class":272,"line":339},7,[270,341,342],{"class":280},"})\n",[260,344,347],{"className":262,"code":345,"filename":346,"language":265,"meta":5,"style":5},"export default defineNuxtConfig({\n  nitro: {\n    experimental: {\n      tasks: true\n    }\n  }\n})\n","nuxt.config.ts",[267,348,349,360,365,370,377,382,386],{"__ignoreMap":5},[270,350,351,353,355,358],{"class":272,"line":273},[270,352,304],{"class":276},[270,354,307],{"class":276},[270,356,357],{"class":310}," defineNuxtConfig",[270,359,314],{"class":280},[270,361,362],{"class":272,"line":294},[270,363,364],{"class":280},"  nitro: {\n",[270,366,367],{"class":272,"line":301},[270,368,369],{"class":280},"    experimental: {\n",[270,371,372,375],{"class":272,"line":317},[270,373,374],{"class":280},"      tasks: ",[270,376,330],{"class":329},[270,378,379],{"class":272,"line":323},[270,380,381],{"class":280},"    }\n",[270,383,384],{"class":272,"line":333},[270,385,336],{"class":280},[270,387,388],{"class":272,"line":339},[270,389,342],{"class":280},[232,391,392],{},"::",[236,394,395],{"id":395},"定义任务",[232,397,398,399,402],{},"任务可以在 ",[267,400,401],{},"server/tasks/[name].ts"," 文件中定义。",[232,404,405,406,409,410,413,414,417],{},"支持嵌套目录。任务名称将通过 ",[267,407,408],{},":"," 连接。（例：",[267,411,412],{},"server/tasks/db/migrate.ts"," 任务名称将为 ",[267,415,416],{},"db:migrate","）",[232,419,420],{},[421,422,423],"strong",{},"示例：",[260,425,428],{"className":262,"code":426,"filename":427,"language":265,"meta":5,"style":5},"export default defineTask({\n  meta: {\n    name: \"db:migrate\",\n    description: \"运行数据库迁移\",\n  },\n  run({ payload, context }) {\n    console.log(\"正在运行数据库迁移任务...\");\n    return { result: \"成功\" };\n  },\n});\n","tasks/db/migrate.ts",[267,429,430,441,446,457,467,472,493,510,525,530],{"__ignoreMap":5},[270,431,432,434,436,439],{"class":272,"line":273},[270,433,304],{"class":276},[270,435,307],{"class":276},[270,437,438],{"class":310}," defineTask",[270,440,314],{"class":280},[270,442,443],{"class":272,"line":294},[270,444,445],{"class":280},"  meta: {\n",[270,447,448,451,454],{"class":272,"line":301},[270,449,450],{"class":280},"    name: ",[270,452,453],{"class":287},"\"db:migrate\"",[270,455,456],{"class":280},",\n",[270,458,459,462,465],{"class":272,"line":317},[270,460,461],{"class":280},"    description: ",[270,463,464],{"class":287},"\"运行数据库迁移\"",[270,466,456],{"class":280},[270,468,469],{"class":272,"line":323},[270,470,471],{"class":280},"  },\n",[270,473,474,477,480,484,487,490],{"class":272,"line":333},[270,475,476],{"class":310},"  run",[270,478,479],{"class":280},"({ ",[270,481,483],{"class":482},"sQHwn","payload",[270,485,486],{"class":280},", ",[270,488,489],{"class":482},"context",[270,491,492],{"class":280}," }) {\n",[270,494,495,498,501,504,507],{"class":272,"line":339},[270,496,497],{"class":280},"    console.",[270,499,500],{"class":310},"log",[270,502,503],{"class":280},"(",[270,505,506],{"class":287},"\"正在运行数据库迁移任务...\"",[270,508,509],{"class":280},");\n",[270,511,513,516,519,522],{"class":272,"line":512},8,[270,514,515],{"class":276},"    return",[270,517,518],{"class":280}," { result: ",[270,520,521],{"class":287},"\"成功\"",[270,523,524],{"class":280}," };\n",[270,526,528],{"class":272,"line":527},9,[270,529,471],{"class":280},[270,531,533],{"class":272,"line":532},10,[270,534,535],{"class":280},"});\n",[236,537,538],{"id":538},"定时任务",[232,540,541],{},"您可以使用 Nitro 配置定义定时任务，以便在每段时间后自动运行。",[257,543,544,608],{},[260,545,547],{"className":262,"code":546,"filename":264,"language":265,"meta":5,"style":5},"import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n  scheduledTasks: {\n    // 每分钟运行一次 `cms:update` 任务\n    '* * * * *': ['cms:update']\n  }\n})\n",[267,548,549,561,565,575,580,586,600,604],{"__ignoreMap":5},[270,550,551,553,555,557,559],{"class":272,"line":273},[270,552,277],{"class":276},[270,554,281],{"class":280},[270,556,284],{"class":276},[270,558,288],{"class":287},[270,560,291],{"class":280},[270,562,563],{"class":272,"line":294},[270,564,298],{"emptyLinePlaceholder":297},[270,566,567,569,571,573],{"class":272,"line":301},[270,568,304],{"class":276},[270,570,307],{"class":276},[270,572,311],{"class":310},[270,574,314],{"class":280},[270,576,577],{"class":272,"line":317},[270,578,579],{"class":280},"  scheduledTasks: {\n",[270,581,582],{"class":272,"line":323},[270,583,585],{"class":584},"sCsY4","    // 每分钟运行一次 `cms:update` 任务\n",[270,587,588,591,594,597],{"class":272,"line":333},[270,589,590],{"class":287},"    '* * * * *'",[270,592,593],{"class":280},": [",[270,595,596],{"class":287},"'cms:update'",[270,598,599],{"class":280},"]\n",[270,601,602],{"class":272,"line":339},[270,603,336],{"class":280},[270,605,606],{"class":272,"line":512},[270,607,342],{"class":280},[260,609,611],{"className":262,"code":610,"filename":346,"language":265,"meta":5,"style":5},"export default defineNuxtConfig({\n  nitro: {\n    scheduledTasks: {\n      // 每分钟运行一次 `cms:update` 任务\n      '* * * * *': ['cms:update']\n    }\n  }\n})\n",[267,612,613,623,627,632,637,648,652,656],{"__ignoreMap":5},[270,614,615,617,619,621],{"class":272,"line":273},[270,616,304],{"class":276},[270,618,307],{"class":276},[270,620,357],{"class":310},[270,622,314],{"class":280},[270,624,625],{"class":272,"line":294},[270,626,364],{"class":280},[270,628,629],{"class":272,"line":301},[270,630,631],{"class":280},"    scheduledTasks: {\n",[270,633,634],{"class":272,"line":317},[270,635,636],{"class":584},"      // 每分钟运行一次 `cms:update` 任务\n",[270,638,639,642,644,646],{"class":272,"line":323},[270,640,641],{"class":287},"      '* * * * *'",[270,643,593],{"class":280},[270,645,596],{"class":287},[270,647,599],{"class":280},[270,649,650],{"class":272,"line":333},[270,651,381],{"class":280},[270,653,654],{"class":272,"line":339},[270,655,336],{"class":280},[270,657,658],{"class":272,"line":512},[270,659,342],{"class":280},[661,662,663],"tip",{},[232,664,665,666,671],{},"\n您可以使用 ",[246,667,670],{"href":668,"rel":669},"https://crontab.guru/",[250],"crontab.guru"," 来轻松生成和理解 cron 表达式模式。",[236,673,675],{"id":674},"waituntil",[267,676,677],{},"waitUntil",[232,679,680],{},"在运行后台任务时，您可能希望确保服务器或工作线程等待任务完成。",[232,682,683,684,687,688,692],{},"可选的 ",[267,685,686],{},"context.waitUntil"," 函数 ",[689,690,691],"em",{},"可能"," 可用，这取决于运行时环境。",[260,694,696],{"className":262,"code":695,"language":265,"meta":5,"style":5},"export default defineTask({\n  run({ context }) {\n    const promise = fetch(...)\n    context.waitUntil?.(promise);\n    await promise;\n    return { result: \"Success\" };\n  },\n});\n",[267,697,698,708,718,740,750,758,769,773],{"__ignoreMap":5},[270,699,700,702,704,706],{"class":272,"line":273},[270,701,304],{"class":276},[270,703,307],{"class":276},[270,705,438],{"class":310},[270,707,314],{"class":280},[270,709,710,712,714,716],{"class":272,"line":294},[270,711,476],{"class":310},[270,713,479],{"class":280},[270,715,489],{"class":482},[270,717,492],{"class":280},[270,719,720,723,726,729,732,734,737],{"class":272,"line":301},[270,721,722],{"class":276},"    const",[270,724,725],{"class":329}," promise",[270,727,728],{"class":276}," =",[270,730,731],{"class":310}," fetch",[270,733,503],{"class":280},[270,735,736],{"class":276},"...",[270,738,739],{"class":280},")\n",[270,741,742,745,747],{"class":272,"line":317},[270,743,744],{"class":280},"    context.",[270,746,677],{"class":310},[270,748,749],{"class":280},"?.(promise);\n",[270,751,752,755],{"class":272,"line":323},[270,753,754],{"class":276},"    await",[270,756,757],{"class":280}," promise;\n",[270,759,760,762,764,767],{"class":272,"line":333},[270,761,515],{"class":276},[270,763,518],{"class":280},[270,765,766],{"class":287},"\"Success\"",[270,768,524],{"class":280},[270,770,771],{"class":272,"line":339},[270,772,471],{"class":280},[270,774,775],{"class":272,"line":512},[270,776,535],{"class":280},[778,779,780],"h3",{"id":780},"平台支持",[782,783,784,808,824,839],"ul",{},[785,786,787,790,791,790,794,797,798,801,802,807],"li",{},[267,788,789],{},"dev","、",[267,792,793],{},"node-server",[267,795,796],{},"bun"," 和 ",[267,799,800],{},"deno-server"," 预设支持 ",[246,803,806],{"href":804,"rel":805},"https://croner.56k.guru/",[250],"croner"," 引擎。",[785,809,810,813,814,819,820,823],{},[267,811,812],{},"cloudflare_module"," 预设与 ",[246,815,818],{"href":816,"rel":817},"https://developers.cloudflare.com/workers/configuration/cron-triggers/",[250],"Cron Triggers"," 具有原生集成。确保配置 wrangler 使用与您在 ",[267,821,822],{},"scheduledTasks"," 中定义的完全相同的模式以进行匹配。",[785,825,826,813,829,834,835,838],{},[267,827,828],{},"vercel",[246,830,833],{"href":831,"rel":832},"https://vercel.com/docs/cron-jobs",[250],"Vercel Cron Jobs"," 具有原生集成。Nitro 会在构建时自动生成 cron 任务配置 — 无需手动设置 ",[267,836,837],{},"vercel.json","。",[785,840,841],{},"计划支持更多预设（具有原生原语支持）！",[236,843,844],{"id":844},"程序化运行任务",[232,846,847,848,851],{},"要手动运行任务，您可以使用 ",[267,849,850],{},"runTask(name, { payload? })"," 工具。",[232,853,854],{},[421,855,423],{},[260,857,860],{"className":262,"code":858,"filename":859,"language":265,"meta":5,"style":5},"export default eventHandler(async (event) => {\n  // 重要：身份验证用户和验证负载！\n  const payload = { ...getQuery(event) };\n  const { result } = await runTask(\"db:migrate\", { payload });\n\n  return { result };\n});\n","api/migrate.ts",[267,861,862,891,896,917,945,949,957],{"__ignoreMap":5},[270,863,864,866,868,871,873,876,879,882,885,888],{"class":272,"line":273},[270,865,304],{"class":276},[270,867,307],{"class":276},[270,869,870],{"class":310}," eventHandler",[270,872,503],{"class":280},[270,874,875],{"class":276},"async",[270,877,878],{"class":280}," (",[270,880,881],{"class":482},"event",[270,883,884],{"class":280},") ",[270,886,887],{"class":276},"=>",[270,889,890],{"class":280}," {\n",[270,892,893],{"class":272,"line":294},[270,894,895],{"class":584},"  // 重要：身份验证用户和验证负载！\n",[270,897,898,901,904,906,909,911,914],{"class":272,"line":301},[270,899,900],{"class":276},"  const",[270,902,903],{"class":329}," payload",[270,905,728],{"class":276},[270,907,908],{"class":280}," { ",[270,910,736],{"class":276},[270,912,913],{"class":310},"getQuery",[270,915,916],{"class":280},"(event) };\n",[270,918,919,921,923,926,929,932,935,938,940,942],{"class":272,"line":317},[270,920,900],{"class":276},[270,922,908],{"class":280},[270,924,925],{"class":329},"result",[270,927,928],{"class":280}," } ",[270,930,931],{"class":276},"=",[270,933,934],{"class":276}," await",[270,936,937],{"class":310}," runTask",[270,939,503],{"class":280},[270,941,453],{"class":287},[270,943,944],{"class":280},", { payload });\n",[270,946,947],{"class":272,"line":323},[270,948,298],{"emptyLinePlaceholder":297},[270,950,951,954],{"class":272,"line":333},[270,952,953],{"class":276},"  return",[270,955,956],{"class":280}," { result };\n",[270,958,959],{"class":272,"line":339},[270,960,535],{"class":280},[236,962,963],{"id":963},"使用开发服务器运行任务",[232,965,966],{},"Nitro 内置的开发服务器使任务可以轻松执行，而无需编程使用。",[778,968,970],{"id":969},"使用-api-路由","使用 API 路由",[972,973,975],"h4",{"id":974},"_nitrotasks",[267,976,977],{},"/_nitro/tasks",[232,979,980],{},"此端点返回可用的任务名称及其元数据的列表。",[260,982,986],{"className":983,"code":984,"language":985,"meta":5,"style":5},"language-json shiki shiki-themes github-light github-dark github-dark","// [GET] /_nitro/tasks\n{\n  \"tasks\": {\n    \"db:migrate\": {\n      \"description\": \"运行数据库迁移\"\n    },\n    \"cms:update\": {\n      \"description\": \"更新 CMS 内容\"\n    }\n  },\n  \"scheduledTasks\": [\n    {\n      \"cron\": \"* * * * *\",\n      \"tasks\": [\n        \"cms:update\"\n      ]\n    }\n  ]\n}\n","json",[267,987,988,993,998,1006,1013,1024,1029,1036,1045,1049,1053,1062,1068,1081,1089,1095,1101,1106,1112],{"__ignoreMap":5},[270,989,990],{"class":272,"line":273},[270,991,992],{"class":584},"// [GET] /_nitro/tasks\n",[270,994,995],{"class":272,"line":294},[270,996,997],{"class":280},"{\n",[270,999,1000,1003],{"class":272,"line":301},[270,1001,1002],{"class":329},"  \"tasks\"",[270,1004,1005],{"class":280},": {\n",[270,1007,1008,1011],{"class":272,"line":317},[270,1009,1010],{"class":329},"    \"db:migrate\"",[270,1012,1005],{"class":280},[270,1014,1015,1018,1021],{"class":272,"line":323},[270,1016,1017],{"class":329},"      \"description\"",[270,1019,1020],{"class":280},": ",[270,1022,1023],{"class":287},"\"运行数据库迁移\"\n",[270,1025,1026],{"class":272,"line":333},[270,1027,1028],{"class":280},"    },\n",[270,1030,1031,1034],{"class":272,"line":339},[270,1032,1033],{"class":329},"    \"cms:update\"",[270,1035,1005],{"class":280},[270,1037,1038,1040,1042],{"class":272,"line":512},[270,1039,1017],{"class":329},[270,1041,1020],{"class":280},[270,1043,1044],{"class":287},"\"更新 CMS 内容\"\n",[270,1046,1047],{"class":272,"line":527},[270,1048,381],{"class":280},[270,1050,1051],{"class":272,"line":532},[270,1052,471],{"class":280},[270,1054,1056,1059],{"class":272,"line":1055},11,[270,1057,1058],{"class":329},"  \"scheduledTasks\"",[270,1060,1061],{"class":280},": [\n",[270,1063,1065],{"class":272,"line":1064},12,[270,1066,1067],{"class":280},"    {\n",[270,1069,1071,1074,1076,1079],{"class":272,"line":1070},13,[270,1072,1073],{"class":329},"      \"cron\"",[270,1075,1020],{"class":280},[270,1077,1078],{"class":287},"\"* * * * *\"",[270,1080,456],{"class":280},[270,1082,1084,1087],{"class":272,"line":1083},14,[270,1085,1086],{"class":329},"      \"tasks\"",[270,1088,1061],{"class":280},[270,1090,1092],{"class":272,"line":1091},15,[270,1093,1094],{"class":287},"        \"cms:update\"\n",[270,1096,1098],{"class":272,"line":1097},16,[270,1099,1100],{"class":280},"      ]\n",[270,1102,1104],{"class":272,"line":1103},17,[270,1105,381],{"class":280},[270,1107,1109],{"class":272,"line":1108},18,[270,1110,1111],{"class":280},"  ]\n",[270,1113,1115],{"class":272,"line":1114},19,[270,1116,1117],{"class":280},"}\n",[972,1119,1121],{"id":1120},"_nitrotasksname",[267,1122,1123],{},"/_nitro/tasks/:name",[232,1125,1126,1127,1130],{},"此端点执行一个任务。您可以使用查询参数和主体 JSON 负载提供负载。发送的 JSON 主体负载必须位于 ",[267,1128,1129],{},"\"payload\""," 属性下。",[1132,1133,1134,1218,1266],"code-group",{},[260,1135,1138],{"className":262,"code":1136,"filename":1137,"language":265,"meta":5,"style":5},"export default defineTask({\n  meta: {\n    name: \"echo:payload\",\n    description: \"返回提供的负载\",\n  },\n  run({ payload, context }) {\n    console.log(\"正在运行回声任务...\");\n    return { result: payload };\n  },\n});\n","tasks/echo/payload.ts",[267,1139,1140,1150,1154,1163,1172,1176,1190,1203,1210,1214],{"__ignoreMap":5},[270,1141,1142,1144,1146,1148],{"class":272,"line":273},[270,1143,304],{"class":276},[270,1145,307],{"class":276},[270,1147,438],{"class":310},[270,1149,314],{"class":280},[270,1151,1152],{"class":272,"line":294},[270,1153,445],{"class":280},[270,1155,1156,1158,1161],{"class":272,"line":301},[270,1157,450],{"class":280},[270,1159,1160],{"class":287},"\"echo:payload\"",[270,1162,456],{"class":280},[270,1164,1165,1167,1170],{"class":272,"line":317},[270,1166,461],{"class":280},[270,1168,1169],{"class":287},"\"返回提供的负载\"",[270,1171,456],{"class":280},[270,1173,1174],{"class":272,"line":323},[270,1175,471],{"class":280},[270,1177,1178,1180,1182,1184,1186,1188],{"class":272,"line":333},[270,1179,476],{"class":310},[270,1181,479],{"class":280},[270,1183,483],{"class":482},[270,1185,486],{"class":280},[270,1187,489],{"class":482},[270,1189,492],{"class":280},[270,1191,1192,1194,1196,1198,1201],{"class":272,"line":339},[270,1193,497],{"class":280},[270,1195,500],{"class":310},[270,1197,503],{"class":280},[270,1199,1200],{"class":287},"\"正在运行回声任务...\"",[270,1202,509],{"class":280},[270,1204,1205,1207],{"class":272,"line":512},[270,1206,515],{"class":276},[270,1208,1209],{"class":280}," { result: payload };\n",[270,1211,1212],{"class":272,"line":527},[270,1213,471],{"class":280},[270,1215,1216],{"class":272,"line":532},[270,1217,535],{"class":280},[260,1219,1222],{"className":983,"code":1220,"filename":1221,"language":985,"meta":5,"style":5},"// [GET] /_nitro/tasks/echo:payload?field=value&array=1&array=2\n{\n  \"field\": \"value\",\n  \"array\": [\"1\", \"2\"]\n}\n","GET",[267,1223,1224,1229,1233,1245,1262],{"__ignoreMap":5},[270,1225,1226],{"class":272,"line":273},[270,1227,1228],{"class":584},"// [GET] /_nitro/tasks/echo:payload?field=value&array=1&array=2\n",[270,1230,1231],{"class":272,"line":294},[270,1232,997],{"class":280},[270,1234,1235,1238,1240,1243],{"class":272,"line":301},[270,1236,1237],{"class":329},"  \"field\"",[270,1239,1020],{"class":280},[270,1241,1242],{"class":287},"\"value\"",[270,1244,456],{"class":280},[270,1246,1247,1250,1252,1255,1257,1260],{"class":272,"line":317},[270,1248,1249],{"class":329},"  \"array\"",[270,1251,593],{"class":280},[270,1253,1254],{"class":287},"\"1\"",[270,1256,486],{"class":280},[270,1258,1259],{"class":287},"\"2\"",[270,1261,599],{"class":280},[270,1263,1264],{"class":272,"line":323},[270,1265,1117],{"class":280},[260,1267,1270],{"className":983,"code":1268,"filename":1269,"language":985,"meta":5,"style":5},"/**\n * [POST] /_nitro/tasks/echo:payload?field=value\n * body: {\n *   \"payload\": {\n *     \"answer\": 42,\n *     \"nested\": {\n *       \"value\": true\n *     }\n *   }\n * }\n */\n{\n  \"field\": \"value\",\n  \"answer\": 42,\n  \"nested\": {\n    \"value\": true\n  }\n}\n","POST",[267,1271,1272,1277,1282,1287,1292,1297,1302,1307,1312,1317,1322,1327,1331,1341,1353,1360,1369,1373],{"__ignoreMap":5},[270,1273,1274],{"class":272,"line":273},[270,1275,1276],{"class":584},"/**\n",[270,1278,1279],{"class":272,"line":294},[270,1280,1281],{"class":584}," * [POST] /_nitro/tasks/echo:payload?field=value\n",[270,1283,1284],{"class":272,"line":301},[270,1285,1286],{"class":584}," * body: {\n",[270,1288,1289],{"class":272,"line":317},[270,1290,1291],{"class":584}," *   \"payload\": {\n",[270,1293,1294],{"class":272,"line":323},[270,1295,1296],{"class":584}," *     \"answer\": 42,\n",[270,1298,1299],{"class":272,"line":333},[270,1300,1301],{"class":584}," *     \"nested\": {\n",[270,1303,1304],{"class":272,"line":339},[270,1305,1306],{"class":584}," *       \"value\": true\n",[270,1308,1309],{"class":272,"line":512},[270,1310,1311],{"class":584}," *     }\n",[270,1313,1314],{"class":272,"line":527},[270,1315,1316],{"class":584}," *   }\n",[270,1318,1319],{"class":272,"line":532},[270,1320,1321],{"class":584}," * }\n",[270,1323,1324],{"class":272,"line":1055},[270,1325,1326],{"class":584}," */\n",[270,1328,1329],{"class":272,"line":1064},[270,1330,997],{"class":280},[270,1332,1333,1335,1337,1339],{"class":272,"line":1070},[270,1334,1237],{"class":329},[270,1336,1020],{"class":280},[270,1338,1242],{"class":287},[270,1340,456],{"class":280},[270,1342,1343,1346,1348,1351],{"class":272,"line":1083},[270,1344,1345],{"class":329},"  \"answer\"",[270,1347,1020],{"class":280},[270,1349,1350],{"class":329},"42",[270,1352,456],{"class":280},[270,1354,1355,1358],{"class":272,"line":1091},[270,1356,1357],{"class":329},"  \"nested\"",[270,1359,1005],{"class":280},[270,1361,1362,1365,1367],{"class":272,"line":1097},[270,1363,1364],{"class":329},"    \"value\"",[270,1366,1020],{"class":280},[270,1368,330],{"class":329},[270,1370,1371],{"class":272,"line":1103},[270,1372,336],{"class":280},[270,1374,1375],{"class":272,"line":1108},[270,1376,1117],{"class":280},[1378,1379,1380],"note",{},[232,1381,1382],{},"\n包含在正文中的 JSON 负载将覆盖查询参数中存在的键。",[778,1384,1386],{"id":1385},"使用-cli","使用 CLI",[240,1388,1389],{},[232,1390,1391,1392,1395],{},"\n只能在 ",[421,1393,1394],{},"开发服务器运行"," 时运行这些命令。您应该在第二个终端中运行它们。",[972,1397,1398],{"id":1398},"列出任务",[260,1400,1404],{"className":1401,"code":1402,"language":1403,"meta":5,"style":5},"language-sh shiki shiki-themes github-light github-dark github-dark","nitro task list\n","sh",[267,1405,1406],{"__ignoreMap":5},[270,1407,1408,1411,1414],{"class":272,"line":273},[270,1409,1410],{"class":310},"nitro",[270,1412,1413],{"class":287}," task",[270,1415,1416],{"class":287}," list\n",[972,1418,1419],{"id":1419},"运行任务",[260,1421,1423],{"className":1401,"code":1422,"language":1403,"meta":5,"style":5},"nitro task run db:migrate --payload \"{}\"\n",[267,1424,1425],{"__ignoreMap":5},[270,1426,1427,1429,1431,1434,1437,1440],{"class":272,"line":273},[270,1428,1410],{"class":310},[270,1430,1413],{"class":287},[270,1432,1433],{"class":287}," run",[270,1435,1436],{"class":287}," db:migrate",[270,1438,1439],{"class":329}," --payload",[270,1441,1442],{"class":287}," \"{}\"\n",[236,1444,1445],{"id":1445},"注意事项",[778,1447,1448],{"id":1448},"并发",[232,1450,1451,1452,1455],{},"每个任务只能有 ",[421,1453,1454],{},"一个运行实例","。在并行调用同一个名称的任务多次时，实际上只调用一次，所有调用者将获得相同的返回值。",[1378,1457,1458],{},[232,1459,1460],{},"\nNitro 任务可以多次同时运行。",[1462,1463,1464],"style",{},"html pre.shiki code .so5gQ, html code.shiki .so5gQ{--shiki-light:#D73A49;--shiki-default:#F97583;--shiki-dark:#F97583}html pre.shiki code .slsVL, html code.shiki .slsVL{--shiki-light:#24292E;--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8}html pre.shiki code .sfrk1, html code.shiki .sfrk1{--shiki-light:#032F62;--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF}html pre.shiki code .shcOC, html code.shiki .shcOC{--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#B392F0}html pre.shiki code .suiK_, html code.shiki .suiK_{--shiki-light:#005CC5;--shiki-default:#79B8FF;--shiki-dark:#79B8FF}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sQHwn, html code.shiki .sQHwn{--shiki-light:#E36209;--shiki-default:#FFAB70;--shiki-dark:#FFAB70}html pre.shiki code .sCsY4, html code.shiki .sCsY4{--shiki-light:#6A737D;--shiki-default:#6A737D;--shiki-dark:#6A737D}",{"title":5,"searchDepth":294,"depth":294,"links":1466},[1467,1468,1469,1470,1473,1474,1478],{"id":238,"depth":294,"text":238},{"id":395,"depth":294,"text":395},{"id":538,"depth":294,"text":538},{"id":674,"depth":294,"text":677,"children":1471},[1472],{"id":780,"depth":301,"text":780},{"id":844,"depth":294,"text":844},{"id":963,"depth":294,"text":963,"children":1475},[1476,1477],{"id":969,"depth":301,"text":970},{"id":1385,"depth":301,"text":1386},{"id":1445,"depth":294,"text":1445,"children":1479},[1480],{"id":1448,"depth":301,"text":1448},"Nitro 任务允许在运行时进行开关操作。","md",{"icon":56},{"icon":56},{"title":53,"description":1481},"f7WhkcoZd0OKL3HR8e0OF2RnlosauOs5HMrSS0rfrsQ",[1488,1490],{"title":48,"path":49,"stem":50,"description":1489,"icon":51,"children":-1},"使用插件来扩展 Nitro 的运行时行为。",{"title":58,"path":59,"stem":60,"description":1491,"icon":61,"children":-1},"使用服务器入口可创建全局中间件，该中间件会在所有路由匹配之前运行。",1771507938689]