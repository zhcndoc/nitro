[{"data":1,"prerenderedAt":782},["ShallowReactive",2],{"navigation":3,"-docs-plugins":223,"-docs-plugins-surround":777},[4,83,208,213,220],{"title":5,"path":6,"stem":7,"children":8,"icon":82},"","/docs","1.docs/1.index",[9,12,17,22,27,32,37,42,47,52,57,62,67,72,77],{"title":10,"path":6,"stem":7,"icon":11},"介绍","i-lucide-compass",{"title":13,"path":14,"stem":15,"icon":16},"快速开始","/docs/quick-start","1.docs/2.quick-start","i-lucide-zap",{"title":18,"path":19,"stem":20,"icon":21},"渲染器","/docs/renderer","1.docs/4.renderer","ri:layout-masonry-line",{"title":23,"path":24,"stem":25,"icon":26},"服务器路由","/docs/routing","1.docs/5.routing","ri:direction-line",{"title":28,"path":29,"stem":30,"icon":31},"资源","/docs/assets","1.docs/50.assets","ri:image-2-line",{"title":33,"path":34,"stem":35,"icon":36},"配置","/docs/configuration","1.docs/50.configuration","ri:settings-3-line",{"title":38,"path":39,"stem":40,"icon":41},"数据库","/docs/database","1.docs/50.database","ri:database-2-line",{"title":43,"path":44,"stem":45,"icon":46},"生命周期","/docs/lifecycle","1.docs/50.lifecycle","i-lucide-layers",{"title":48,"path":49,"stem":50,"icon":51},"插件","/docs/plugins","1.docs/50.plugins","ri:plug-line",{"title":53,"path":54,"stem":55,"icon":56},"任务","/docs/tasks","1.docs/50.tasks","codicon:run-all",{"title":58,"path":59,"stem":60,"icon":61},"服务器入口","/docs/server-entry","1.docs/6.server-entry","ri:server-line",{"title":63,"path":64,"stem":65,"icon":66},"缓存","/docs/cache","1.docs/7.cache","ri:speed-line",{"title":68,"path":69,"stem":70,"icon":71},"KV 存储","/docs/storage","1.docs/8.storage","carbon:datastore",{"title":73,"path":74,"stem":75,"icon":76},"迁移指南","/docs/migration","1.docs/99.migration","ri:arrow-right-up-line",{"title":78,"path":79,"stem":80,"icon":81},"夜间通道","/docs/nightly","1.docs/99.nightly","ri:moon-fill","i-lucide-book-open",{"title":84,"path":85,"stem":86,"children":87,"icon":89},"概述","/deploy","2.deploy/0.index",[88,90,111],{"title":84,"path":85,"stem":86,"icon":89},"ri:upload-cloud-2-line",{"title":91,"path":92,"stem":93,"children":94,"page":110},"Runtimes","/deploy/runtimes","2.deploy/10.runtimes",[95,100,105],{"title":96,"path":97,"stem":98,"icon":99},"Node.js","/deploy/runtimes/node","2.deploy/10.runtimes/1.node","akar-icons:node-fill",{"title":101,"path":102,"stem":103,"icon":104},"Bun","/deploy/runtimes/bun","2.deploy/10.runtimes/bun","simple-icons:bun",{"title":106,"path":107,"stem":108,"icon":109},"Deno","/deploy/runtimes/deno","2.deploy/10.runtimes/deno","simple-icons:deno",false,{"title":112,"path":113,"stem":114,"children":115,"page":110},"Providers","/deploy/providers","2.deploy/20.providers",[116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204],{"title":117,"path":118,"stem":119},"Alwaysdata","/deploy/providers/alwaysdata","2.deploy/20.providers/alwaysdata",{"title":121,"path":122,"stem":123},"AWS Lambda","/deploy/providers/aws","2.deploy/20.providers/aws",{"title":125,"path":126,"stem":127},"AWS Amplify","/deploy/providers/aws-amplify","2.deploy/20.providers/aws-amplify",{"title":129,"path":130,"stem":131},"Azure","/deploy/providers/azure","2.deploy/20.providers/azure",{"title":133,"path":134,"stem":135},"Cleavr","/deploy/providers/cleavr","2.deploy/20.providers/cleavr",{"title":137,"path":138,"stem":139},"Cloudflare","/deploy/providers/cloudflare","2.deploy/20.providers/cloudflare",{"title":141,"path":142,"stem":143},"Deno Deploy","/deploy/providers/deno-deploy","2.deploy/20.providers/deno-deploy",{"title":145,"path":146,"stem":147},"DigitalOcean","/deploy/providers/digitalocean","2.deploy/20.providers/digitalocean",{"title":149,"path":150,"stem":151},"Firebase","/deploy/providers/firebase","2.deploy/20.providers/firebase",{"title":153,"path":154,"stem":155},"Flightcontrol","/deploy/providers/flightcontrol","2.deploy/20.providers/flightcontrol",{"title":157,"path":158,"stem":159},"Genezio","/deploy/providers/genezio","2.deploy/20.providers/genezio",{"title":161,"path":162,"stem":163},"GitHub Pages","/deploy/providers/github-pages","2.deploy/20.providers/github-pages",{"title":165,"path":166,"stem":167},"GitLab Pages","/deploy/providers/gitlab-pages","2.deploy/20.providers/gitlab-pages",{"title":169,"path":170,"stem":171},"Heroku","/deploy/providers/heroku","2.deploy/20.providers/heroku",{"title":173,"path":174,"stem":175},"IIS","/deploy/providers/iis","2.deploy/20.providers/iis",{"title":177,"path":178,"stem":179},"Koyeb","/deploy/providers/koyeb","2.deploy/20.providers/koyeb",{"title":181,"path":182,"stem":183},"Netlify","/deploy/providers/netlify","2.deploy/20.providers/netlify",{"title":185,"path":186,"stem":187},"Platform.sh","/deploy/providers/platform-sh","2.deploy/20.providers/platform-sh",{"title":189,"path":190,"stem":191},"Render.com","/deploy/providers/render","2.deploy/20.providers/render",{"title":193,"path":194,"stem":195},"StormKit","/deploy/providers/stormkit","2.deploy/20.providers/stormkit",{"title":197,"path":198,"stem":199},"Vercel","/deploy/providers/vercel","2.deploy/20.providers/vercel",{"title":201,"path":202,"stem":203},"Zeabur","/deploy/providers/zeabur","2.deploy/20.providers/zeabur",{"title":205,"path":206,"stem":207},"Zerops","/deploy/providers/zerops","2.deploy/20.providers/zerops",{"title":33,"path":209,"stem":210,"children":211,"icon":36},"/config","3.config/0.index",[212],{"title":33,"path":209,"stem":210,"icon":36},{"title":214,"path":215,"stem":216,"children":217,"icon":219},"示例","/examples","4.examples/0.index",[218],{"title":214,"path":215,"stem":216,"icon":219},"i-lucide-folder-code",{"title":5,"path":221,"stem":222},"/","index",{"id":224,"title":48,"body":225,"description":771,"extension":772,"meta":773,"navigation":774,"path":49,"seo":775,"stem":50,"__hash__":776},"content/1.docs/50.plugins.md",{"type":226,"value":227,"toc":761,"icon":51},"minimark",[228,235,252,259,264,355,362,413,418,429,433,516,520,544,546,549,552,659,662,665,668,671,757],[229,230,231],"warning",{},[232,233,234],"p",{},"Nitro v3 Alpha 文档仍在开发中 — 预计会有更新、不完善之处以及偶尔的不准确。",[232,236,237,238,242,243,246,247,251],{},"Nitro 插件将在服务器启动时",[239,240,241],"strong",{},"执行一次","，以允许扩展 Nitro 的运行时行为。",[244,245],"br",{},"\n它们接收 ",[248,249,250],"code",{},"nitroApp"," 上下文，可用于挂载 Nitro 生命周期事件。",[232,253,254,255,258],{},"插件会从 ",[248,256,257],{},"plugins/"," 目录自动注册，并在第一次 Nitro 初始化时同步运行（按文件名顺序）。",[232,260,261],{},[239,262,263],{},"示例：",[265,266,271],"pre",{"className":267,"code":268,"filename":269,"language":270,"meta":5,"style":5},"language-ts shiki shiki-themes github-light github-dark github-dark","import { definePlugin } from \"nitro\";\n\nexport default definePlugin((nitroApp) => {\n  console.log('Nitro 插件', nitroApp)\n})\n","plugins/test.ts","ts",[248,272,273,296,303,331,349],{"__ignoreMap":5},[274,275,278,282,286,289,293],"span",{"class":276,"line":277},"line",1,[274,279,281],{"class":280},"so5gQ","import",[274,283,285],{"class":284},"slsVL"," { definePlugin } ",[274,287,288],{"class":280},"from",[274,290,292],{"class":291},"sfrk1"," \"nitro\"",[274,294,295],{"class":284},";\n",[274,297,299],{"class":276,"line":298},2,[274,300,302],{"emptyLinePlaceholder":301},true,"\n",[274,304,306,309,312,316,319,322,325,328],{"class":276,"line":305},3,[274,307,308],{"class":280},"export",[274,310,311],{"class":280}," default",[274,313,315],{"class":314},"shcOC"," definePlugin",[274,317,318],{"class":284},"((",[274,320,250],{"class":321},"sQHwn",[274,323,324],{"class":284},") ",[274,326,327],{"class":280},"=>",[274,329,330],{"class":284}," {\n",[274,332,334,337,340,343,346],{"class":276,"line":333},4,[274,335,336],{"class":284},"  console.",[274,338,339],{"class":314},"log",[274,341,342],{"class":284},"(",[274,344,345],{"class":291},"'Nitro 插件'",[274,347,348],{"class":284},", nitroApp)\n",[274,350,352],{"class":276,"line":351},5,[274,353,354],{"class":284},"})\n",[232,356,357,358,361],{},"如果你的插件在其他目录，可以使用 ",[248,359,360],{},"plugins"," 选项：",[265,363,366],{"className":267,"code":364,"filename":365,"language":270,"meta":5,"style":5},"import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n  plugins: ['my-plugins/hello.ts']\n})\n","nitro.config.ts",[248,367,368,382,386,398,409],{"__ignoreMap":5},[274,369,370,372,375,377,380],{"class":276,"line":277},[274,371,281],{"class":280},[274,373,374],{"class":284}," { defineNitroConfig } ",[274,376,288],{"class":280},[274,378,379],{"class":291}," \"nitro/config\"",[274,381,295],{"class":284},[274,383,384],{"class":276,"line":298},[274,385,302],{"emptyLinePlaceholder":301},[274,387,388,390,392,395],{"class":276,"line":305},[274,389,308],{"class":280},[274,391,311],{"class":280},[274,393,394],{"class":314}," defineNitroConfig",[274,396,397],{"class":284},"({\n",[274,399,400,403,406],{"class":276,"line":333},[274,401,402],{"class":284},"  plugins: [",[274,404,405],{"class":291},"'my-plugins/hello.ts'",[274,407,408],{"class":284},"]\n",[274,410,411],{"class":276,"line":351},[274,412,354],{"class":284},[414,415,417],"h2",{"id":416},"nitro-运行时钩子","Nitro 运行时钩子",[232,419,420,421,428],{},"你可以使用 Nitro 的 ",[422,423,427],"a",{"href":424,"rel":425},"https://github.com/unjs/hookable",[426],"nofollow","hooks"," 来通过插件注册自定义（异步或同步）函数，以扩展 Nitro 的默认运行时行为。",[232,430,431],{},[239,432,263],{},[265,434,436],{"className":267,"code":435,"language":270,"meta":5,"style":5},"import { definePlugin } from \"nitro\";\n\nexport default definePlugin((nitro) => {\n  nitro.hooks.hook(\"close\", async () => {\n    // 当 nitro 正在关闭时执行\n  });\n})\n",[248,437,438,450,454,473,499,505,511],{"__ignoreMap":5},[274,439,440,442,444,446,448],{"class":276,"line":277},[274,441,281],{"class":280},[274,443,285],{"class":284},[274,445,288],{"class":280},[274,447,292],{"class":291},[274,449,295],{"class":284},[274,451,452],{"class":276,"line":298},[274,453,302],{"emptyLinePlaceholder":301},[274,455,456,458,460,462,464,467,469,471],{"class":276,"line":305},[274,457,308],{"class":280},[274,459,311],{"class":280},[274,461,315],{"class":314},[274,463,318],{"class":284},[274,465,466],{"class":321},"nitro",[274,468,324],{"class":284},[274,470,327],{"class":280},[274,472,330],{"class":284},[274,474,475,478,481,483,486,489,492,495,497],{"class":276,"line":333},[274,476,477],{"class":284},"  nitro.hooks.",[274,479,480],{"class":314},"hook",[274,482,342],{"class":284},[274,484,485],{"class":291},"\"close\"",[274,487,488],{"class":284},", ",[274,490,491],{"class":280},"async",[274,493,494],{"class":284}," () ",[274,496,327],{"class":280},[274,498,330],{"class":284},[274,500,501],{"class":276,"line":351},[274,502,504],{"class":503},"sCsY4","    // 当 nitro 正在关闭时执行\n",[274,506,508],{"class":276,"line":507},6,[274,509,510],{"class":284},"  });\n",[274,512,514],{"class":276,"line":513},7,[274,515,354],{"class":284},[517,518,519],"h3",{"id":519},"可用的钩子",[521,522,523,529,534,539],"ul",{},[524,525,526],"li",{},[248,527,528],{},"\"close\", () => {}",[524,530,531],{},[248,532,533],{},"\"request\", (event) => {}",[524,535,536],{},[248,537,538],{},"\"error\", (error, { event? }) => {}",[524,540,541],{},[248,542,543],{},"\"response\", (res, event) => {}",[414,545,214],{"id":214},[517,547,548],{"id":548},"捕获错误",[232,550,551],{},"你可以使用插件捕获所有应用错误。",[265,553,555],{"className":267,"code":554,"language":270,"meta":5,"style":5},"import { definePlugin } from \"nitro\";\n\nexport default definePlugin((nitro) => {\n  nitro.hooks.hook(\"error\", async (error, { event }) => {\n    console.error(`${event.path} 应用错误:`, error)\n  });\n})\n",[248,556,557,569,573,591,625,651,655],{"__ignoreMap":5},[274,558,559,561,563,565,567],{"class":276,"line":277},[274,560,281],{"class":280},[274,562,285],{"class":284},[274,564,288],{"class":280},[274,566,292],{"class":291},[274,568,295],{"class":284},[274,570,571],{"class":276,"line":298},[274,572,302],{"emptyLinePlaceholder":301},[274,574,575,577,579,581,583,585,587,589],{"class":276,"line":305},[274,576,308],{"class":280},[274,578,311],{"class":280},[274,580,315],{"class":314},[274,582,318],{"class":284},[274,584,466],{"class":321},[274,586,324],{"class":284},[274,588,327],{"class":280},[274,590,330],{"class":284},[274,592,593,595,597,599,602,604,606,609,612,615,618,621,623],{"class":276,"line":333},[274,594,477],{"class":284},[274,596,480],{"class":314},[274,598,342],{"class":284},[274,600,601],{"class":291},"\"error\"",[274,603,488],{"class":284},[274,605,491],{"class":280},[274,607,608],{"class":284}," (",[274,610,611],{"class":321},"error",[274,613,614],{"class":284},", { ",[274,616,617],{"class":321},"event",[274,619,620],{"class":284}," }) ",[274,622,327],{"class":280},[274,624,330],{"class":284},[274,626,627,630,632,634,637,639,642,645,648],{"class":276,"line":351},[274,628,629],{"class":284},"    console.",[274,631,611],{"class":314},[274,633,342],{"class":284},[274,635,636],{"class":291},"`${",[274,638,617],{"class":284},[274,640,641],{"class":291},".",[274,643,644],{"class":284},"path",[274,646,647],{"class":291},"} 应用错误:`",[274,649,650],{"class":284},", error)\n",[274,652,653],{"class":276,"line":507},[274,654,510],{"class":284},[274,656,657],{"class":276,"line":513},[274,658,354],{"class":284},[517,660,661],{"id":661},"优雅关闭",[232,663,664],{},"服务器将优雅关闭，并等待由 event.waitUntil 发起的任何后台挂起任务完成。",[517,666,667],{"id":667},"请求和响应生命周期",[232,669,670],{},"你可以使用插件注册钩子，在请求生命周期中运行：",[265,672,674],{"className":267,"code":673,"language":270,"meta":5,"style":5},"import { definePlugin } from \"nitro\";\n\nexport default definePlugin((nitroApp) => {\n  nitroApp.hooks.hook(\"request\", (req) => {\n    console.log(\"on request\", req.url);\n  });\n});\n",[248,675,676,688,692,710,734,748,752],{"__ignoreMap":5},[274,677,678,680,682,684,686],{"class":276,"line":277},[274,679,281],{"class":280},[274,681,285],{"class":284},[274,683,288],{"class":280},[274,685,292],{"class":291},[274,687,295],{"class":284},[274,689,690],{"class":276,"line":298},[274,691,302],{"emptyLinePlaceholder":301},[274,693,694,696,698,700,702,704,706,708],{"class":276,"line":305},[274,695,308],{"class":280},[274,697,311],{"class":280},[274,699,315],{"class":314},[274,701,318],{"class":284},[274,703,250],{"class":321},[274,705,324],{"class":284},[274,707,327],{"class":280},[274,709,330],{"class":284},[274,711,712,715,717,719,722,725,728,730,732],{"class":276,"line":333},[274,713,714],{"class":284},"  nitroApp.hooks.",[274,716,480],{"class":314},[274,718,342],{"class":284},[274,720,721],{"class":291},"\"request\"",[274,723,724],{"class":284},", (",[274,726,727],{"class":321},"req",[274,729,324],{"class":284},[274,731,327],{"class":280},[274,733,330],{"class":284},[274,735,736,738,740,742,745],{"class":276,"line":351},[274,737,629],{"class":284},[274,739,339],{"class":314},[274,741,342],{"class":284},[274,743,744],{"class":291},"\"on request\"",[274,746,747],{"class":284},", req.url);\n",[274,749,750],{"class":276,"line":507},[274,751,510],{"class":284},[274,753,754],{"class":276,"line":513},[274,755,756],{"class":284},"});\n",[758,759,760],"style",{},"html pre.shiki code .so5gQ, html code.shiki .so5gQ{--shiki-light:#D73A49;--shiki-default:#F97583;--shiki-dark:#F97583}html pre.shiki code .slsVL, html code.shiki .slsVL{--shiki-light:#24292E;--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8}html pre.shiki code .sfrk1, html code.shiki .sfrk1{--shiki-light:#032F62;--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF}html pre.shiki code .shcOC, html code.shiki .shcOC{--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#B392F0}html pre.shiki code .sQHwn, html code.shiki .sQHwn{--shiki-light:#E36209;--shiki-default:#FFAB70;--shiki-dark:#FFAB70}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sCsY4, html code.shiki .sCsY4{--shiki-light:#6A737D;--shiki-default:#6A737D;--shiki-dark:#6A737D}",{"title":5,"searchDepth":298,"depth":298,"links":762},[763,766],{"id":416,"depth":298,"text":417,"children":764},[765],{"id":519,"depth":305,"text":519},{"id":214,"depth":298,"text":214,"children":767},[768,769,770],{"id":548,"depth":305,"text":548},{"id":661,"depth":305,"text":661},{"id":667,"depth":305,"text":667},"使用插件来扩展 Nitro 的运行时行为。","md",{"icon":51},{"icon":51},{"title":48,"description":771},"ZJTd_R6S6pQB8GmRrUuH0r07DDjVO0CQIm16HvruwqE",[778,780],{"title":43,"path":44,"stem":45,"description":779,"icon":46,"children":-1},"了解 Nitro 如何运行并处理传入到您的应用的请求。",{"title":53,"path":54,"stem":55,"description":781,"icon":56,"children":-1},"Nitro 任务允许在运行时进行开关操作。",1771507938637]