[{"data":1,"prerenderedAt":807},["ShallowReactive",2],{"navigation":3,"-docs-database":223,"-docs-database-surround":802},[4,83,208,213,220],{"title":5,"path":6,"stem":7,"children":8,"icon":82},"","/docs","1.docs/1.index",[9,12,17,22,27,32,37,42,47,52,57,62,67,72,77],{"title":10,"path":6,"stem":7,"icon":11},"介绍","i-lucide-compass",{"title":13,"path":14,"stem":15,"icon":16},"快速开始","/docs/quick-start","1.docs/2.quick-start","i-lucide-zap",{"title":18,"path":19,"stem":20,"icon":21},"渲染器","/docs/renderer","1.docs/4.renderer","ri:layout-masonry-line",{"title":23,"path":24,"stem":25,"icon":26},"服务器路由","/docs/routing","1.docs/5.routing","ri:direction-line",{"title":28,"path":29,"stem":30,"icon":31},"资源","/docs/assets","1.docs/50.assets","ri:image-2-line",{"title":33,"path":34,"stem":35,"icon":36},"配置","/docs/configuration","1.docs/50.configuration","ri:settings-3-line",{"title":38,"path":39,"stem":40,"icon":41},"数据库","/docs/database","1.docs/50.database","ri:database-2-line",{"title":43,"path":44,"stem":45,"icon":46},"生命周期","/docs/lifecycle","1.docs/50.lifecycle","i-lucide-layers",{"title":48,"path":49,"stem":50,"icon":51},"插件","/docs/plugins","1.docs/50.plugins","ri:plug-line",{"title":53,"path":54,"stem":55,"icon":56},"任务","/docs/tasks","1.docs/50.tasks","codicon:run-all",{"title":58,"path":59,"stem":60,"icon":61},"服务器入口","/docs/server-entry","1.docs/6.server-entry","ri:server-line",{"title":63,"path":64,"stem":65,"icon":66},"缓存","/docs/cache","1.docs/7.cache","ri:speed-line",{"title":68,"path":69,"stem":70,"icon":71},"KV 存储","/docs/storage","1.docs/8.storage","carbon:datastore",{"title":73,"path":74,"stem":75,"icon":76},"迁移指南","/docs/migration","1.docs/99.migration","ri:arrow-right-up-line",{"title":78,"path":79,"stem":80,"icon":81},"夜间通道","/docs/nightly","1.docs/99.nightly","ri:moon-fill","i-lucide-book-open",{"title":84,"path":85,"stem":86,"children":87,"icon":89},"概述","/deploy","2.deploy/0.index",[88,90,111],{"title":84,"path":85,"stem":86,"icon":89},"ri:upload-cloud-2-line",{"title":91,"path":92,"stem":93,"children":94,"page":110},"Runtimes","/deploy/runtimes","2.deploy/10.runtimes",[95,100,105],{"title":96,"path":97,"stem":98,"icon":99},"Node.js","/deploy/runtimes/node","2.deploy/10.runtimes/1.node","akar-icons:node-fill",{"title":101,"path":102,"stem":103,"icon":104},"Bun","/deploy/runtimes/bun","2.deploy/10.runtimes/bun","simple-icons:bun",{"title":106,"path":107,"stem":108,"icon":109},"Deno","/deploy/runtimes/deno","2.deploy/10.runtimes/deno","simple-icons:deno",false,{"title":112,"path":113,"stem":114,"children":115,"page":110},"Providers","/deploy/providers","2.deploy/20.providers",[116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204],{"title":117,"path":118,"stem":119},"Alwaysdata","/deploy/providers/alwaysdata","2.deploy/20.providers/alwaysdata",{"title":121,"path":122,"stem":123},"AWS Lambda","/deploy/providers/aws","2.deploy/20.providers/aws",{"title":125,"path":126,"stem":127},"AWS Amplify","/deploy/providers/aws-amplify","2.deploy/20.providers/aws-amplify",{"title":129,"path":130,"stem":131},"Azure","/deploy/providers/azure","2.deploy/20.providers/azure",{"title":133,"path":134,"stem":135},"Cleavr","/deploy/providers/cleavr","2.deploy/20.providers/cleavr",{"title":137,"path":138,"stem":139},"Cloudflare","/deploy/providers/cloudflare","2.deploy/20.providers/cloudflare",{"title":141,"path":142,"stem":143},"Deno Deploy","/deploy/providers/deno-deploy","2.deploy/20.providers/deno-deploy",{"title":145,"path":146,"stem":147},"DigitalOcean","/deploy/providers/digitalocean","2.deploy/20.providers/digitalocean",{"title":149,"path":150,"stem":151},"Firebase","/deploy/providers/firebase","2.deploy/20.providers/firebase",{"title":153,"path":154,"stem":155},"Flightcontrol","/deploy/providers/flightcontrol","2.deploy/20.providers/flightcontrol",{"title":157,"path":158,"stem":159},"Genezio","/deploy/providers/genezio","2.deploy/20.providers/genezio",{"title":161,"path":162,"stem":163},"GitHub Pages","/deploy/providers/github-pages","2.deploy/20.providers/github-pages",{"title":165,"path":166,"stem":167},"GitLab Pages","/deploy/providers/gitlab-pages","2.deploy/20.providers/gitlab-pages",{"title":169,"path":170,"stem":171},"Heroku","/deploy/providers/heroku","2.deploy/20.providers/heroku",{"title":173,"path":174,"stem":175},"IIS","/deploy/providers/iis","2.deploy/20.providers/iis",{"title":177,"path":178,"stem":179},"Koyeb","/deploy/providers/koyeb","2.deploy/20.providers/koyeb",{"title":181,"path":182,"stem":183},"Netlify","/deploy/providers/netlify","2.deploy/20.providers/netlify",{"title":185,"path":186,"stem":187},"Platform.sh","/deploy/providers/platform-sh","2.deploy/20.providers/platform-sh",{"title":189,"path":190,"stem":191},"Render.com","/deploy/providers/render","2.deploy/20.providers/render",{"title":193,"path":194,"stem":195},"StormKit","/deploy/providers/stormkit","2.deploy/20.providers/stormkit",{"title":197,"path":198,"stem":199},"Vercel","/deploy/providers/vercel","2.deploy/20.providers/vercel",{"title":201,"path":202,"stem":203},"Zeabur","/deploy/providers/zeabur","2.deploy/20.providers/zeabur",{"title":205,"path":206,"stem":207},"Zerops","/deploy/providers/zerops","2.deploy/20.providers/zerops",{"title":33,"path":209,"stem":210,"children":211,"icon":36},"/config","3.config/0.index",[212],{"title":33,"path":209,"stem":210,"icon":36},{"title":214,"path":215,"stem":216,"children":217,"icon":219},"示例","/examples","4.examples/0.index",[218],{"title":214,"path":215,"stem":216,"icon":219},"i-lucide-folder-code",{"title":5,"path":221,"stem":222},"/","index",{"id":224,"title":38,"body":225,"description":5,"extension":797,"meta":798,"navigation":799,"path":39,"seo":800,"stem":40,"__hash__":801},"content/1.docs/50.database.md",{"type":226,"value":227,"toc":793,"icon":41},"minimark",[228,233,240,243,246,267,279,282,365,376,386,391,395,658,660,667,780,789],[229,230,232],"h1",{"id":231},"sql-数据库","SQL 数据库",[234,235,236],"blockquote",{},[237,238,239],"p",{},"Nitro 提供了一个内置的轻量级 SQL 数据库层。",[241,242],"warning",{},[237,244,245],{},"Nitro v3 Alpha 文档仍在开发中 — 可能会有更新、不完善之处和偶尔的不准确。\n:",[237,247,248,249,253,254,261,262,266],{},"默认的数据库连接已",[250,251,252],"strong",{},"预配置","为 ",[255,256,260],"a",{"href":257,"rel":258},"https://db0.unjs.io/connectors/sqlite",[259],"nofollow","SQLite","，并且可以在开发模式和任何兼容 Node.js 的生产部署中开箱即用。默认情况下，数据将存储在 ",[263,264,265],"code",{},".data/db.sqlite"," 中。",[268,269,270],"important",{},[237,271,272,273,278],{},"\n数据库支持目前处于实验阶段。\n请参阅 ",[255,274,277],{"href":275,"rel":276},"https://github.com/unjs/db0/issues",[259],"db0 问题"," 以获取状态信息和报告错误。",[237,280,281],{},"为了启用数据库层，你需要启用实验特性标志。",[283,284,289],"pre",{"className":285,"code":286,"filename":287,"language":288,"meta":5,"style":5},"language-ts shiki shiki-themes github-light github-dark github-dark","import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n  experimental: {\n    database: true\n  }\n})\n","nitro.config.ts","ts",[263,290,291,314,321,337,343,353,359],{"__ignoreMap":5},[292,293,296,300,304,307,311],"span",{"class":294,"line":295},"line",1,[292,297,299],{"class":298},"so5gQ","import",[292,301,303],{"class":302},"slsVL"," { defineNitroConfig } ",[292,305,306],{"class":298},"from",[292,308,310],{"class":309},"sfrk1"," \"nitro/config\"",[292,312,313],{"class":302},";\n",[292,315,317],{"class":294,"line":316},2,[292,318,320],{"emptyLinePlaceholder":319},true,"\n",[292,322,324,327,330,334],{"class":294,"line":323},3,[292,325,326],{"class":298},"export",[292,328,329],{"class":298}," default",[292,331,333],{"class":332},"shcOC"," defineNitroConfig",[292,335,336],{"class":302},"({\n",[292,338,340],{"class":294,"line":339},4,[292,341,342],{"class":302},"  experimental: {\n",[292,344,346,349],{"class":294,"line":345},5,[292,347,348],{"class":302},"    database: ",[292,350,352],{"class":351},"suiK_","true\n",[292,354,356],{"class":294,"line":355},6,[292,357,358],{"class":302},"  }\n",[292,360,362],{"class":294,"line":361},7,[292,363,364],{"class":302},"})\n",[366,367,368],"tip",{},[237,369,370,371,375],{},"\n你可以更改默认连接，或者为任何 ",[255,372,374],{"href":257,"rel":373},[259],"支持的数据库"," 定义更多连接。",[366,377,378],{},[237,379,380,381,266],{},"\n你可以将数据库实例集成到任何 ",[255,382,385],{"href":383,"rel":384},"https://db0.unjs.io/integrations",[259],"支持的 ORM",[387,388],"read-more",{"title":389,"to":390},"DB0 文档","https://db0.unjs.io",[392,393,394],"h2",{"id":394},"用法",[283,396,399],{"className":285,"code":397,"filename":398,"language":288,"meta":5,"style":5},"import { defineHandler } from \"nitro/h3\";\nimport { useDatabase } from \"nitro/database\";\n\nexport default defineHandler(async () => {\n  const db = useDatabase();\n\n  // Create users table\n  await db.sql`DROP TABLE IF EXISTS users`;\n  await db.sql`CREATE TABLE IF NOT EXISTS users (\"id\" TEXT PRIMARY KEY, \"firstName\" TEXT, \"lastName\" TEXT, \"email\" TEXT)`;\n\n  // Add a new user\n  const userId = String(Math.round(Math.random() * 10_000));\n  await db.sql`INSERT INTO users VALUES (${userId}, 'John', 'Doe', '')`;\n\n  // Query for users\n  const { rows } = await db.sql`SELECT * FROM users WHERE id = ${userId}`;\n\n  return {\n    rows,\n  };\n});\n","server.ts",[263,400,401,415,429,433,457,474,478,484,501,515,520,526,562,582,587,593,627,632,640,646,652],{"__ignoreMap":5},[292,402,403,405,408,410,413],{"class":294,"line":295},[292,404,299],{"class":298},[292,406,407],{"class":302}," { defineHandler } ",[292,409,306],{"class":298},[292,411,412],{"class":309}," \"nitro/h3\"",[292,414,313],{"class":302},[292,416,417,419,422,424,427],{"class":294,"line":316},[292,418,299],{"class":298},[292,420,421],{"class":302}," { useDatabase } ",[292,423,306],{"class":298},[292,425,426],{"class":309}," \"nitro/database\"",[292,428,313],{"class":302},[292,430,431],{"class":294,"line":323},[292,432,320],{"emptyLinePlaceholder":319},[292,434,435,437,439,442,445,448,451,454],{"class":294,"line":339},[292,436,326],{"class":298},[292,438,329],{"class":298},[292,440,441],{"class":332}," defineHandler",[292,443,444],{"class":302},"(",[292,446,447],{"class":298},"async",[292,449,450],{"class":302}," () ",[292,452,453],{"class":298},"=>",[292,455,456],{"class":302}," {\n",[292,458,459,462,465,468,471],{"class":294,"line":345},[292,460,461],{"class":298},"  const",[292,463,464],{"class":351}," db",[292,466,467],{"class":298}," =",[292,469,470],{"class":332}," useDatabase",[292,472,473],{"class":302},"();\n",[292,475,476],{"class":294,"line":355},[292,477,320],{"emptyLinePlaceholder":319},[292,479,480],{"class":294,"line":361},[292,481,483],{"class":482},"sCsY4","  // Create users table\n",[292,485,487,490,493,496,499],{"class":294,"line":486},8,[292,488,489],{"class":298},"  await",[292,491,492],{"class":302}," db.",[292,494,495],{"class":332},"sql",[292,497,498],{"class":309},"`DROP TABLE IF EXISTS users`",[292,500,313],{"class":302},[292,502,504,506,508,510,513],{"class":294,"line":503},9,[292,505,489],{"class":298},[292,507,492],{"class":302},[292,509,495],{"class":332},[292,511,512],{"class":309},"`CREATE TABLE IF NOT EXISTS users (\"id\" TEXT PRIMARY KEY, \"firstName\" TEXT, \"lastName\" TEXT, \"email\" TEXT)`",[292,514,313],{"class":302},[292,516,518],{"class":294,"line":517},10,[292,519,320],{"emptyLinePlaceholder":319},[292,521,523],{"class":294,"line":522},11,[292,524,525],{"class":482},"  // Add a new user\n",[292,527,529,531,534,536,539,542,545,547,550,553,556,559],{"class":294,"line":528},12,[292,530,461],{"class":298},[292,532,533],{"class":351}," userId",[292,535,467],{"class":298},[292,537,538],{"class":332}," String",[292,540,541],{"class":302},"(Math.",[292,543,544],{"class":332},"round",[292,546,541],{"class":302},[292,548,549],{"class":332},"random",[292,551,552],{"class":302},"() ",[292,554,555],{"class":298},"*",[292,557,558],{"class":351}," 10_000",[292,560,561],{"class":302},"));\n",[292,563,565,567,569,571,574,577,580],{"class":294,"line":564},13,[292,566,489],{"class":298},[292,568,492],{"class":302},[292,570,495],{"class":332},[292,572,573],{"class":309},"`INSERT INTO users VALUES (${",[292,575,576],{"class":302},"userId",[292,578,579],{"class":309},"}, 'John', 'Doe', '')`",[292,581,313],{"class":302},[292,583,585],{"class":294,"line":584},14,[292,586,320],{"emptyLinePlaceholder":319},[292,588,590],{"class":294,"line":589},15,[292,591,592],{"class":482},"  // Query for users\n",[292,594,596,598,601,604,607,610,613,615,617,620,622,625],{"class":294,"line":595},16,[292,597,461],{"class":298},[292,599,600],{"class":302}," { ",[292,602,603],{"class":351},"rows",[292,605,606],{"class":302}," } ",[292,608,609],{"class":298},"=",[292,611,612],{"class":298}," await",[292,614,492],{"class":302},[292,616,495],{"class":332},[292,618,619],{"class":309},"`SELECT * FROM users WHERE id = ${",[292,621,576],{"class":302},[292,623,624],{"class":309},"}`",[292,626,313],{"class":302},[292,628,630],{"class":294,"line":629},17,[292,631,320],{"emptyLinePlaceholder":319},[292,633,635,638],{"class":294,"line":634},18,[292,636,637],{"class":298},"  return",[292,639,456],{"class":302},[292,641,643],{"class":294,"line":642},19,[292,644,645],{"class":302},"    rows,\n",[292,647,649],{"class":294,"line":648},20,[292,650,651],{"class":302},"  };\n",[292,653,655],{"class":294,"line":654},21,[292,656,657],{"class":302},"});\n",[392,659,33],{"id":33},[237,661,662,663,666],{},"你可以使用 ",[263,664,665],{},"database"," 配置来配置数据库连接：",[283,668,670],{"className":285,"code":669,"filename":287,"language":288,"meta":5,"style":5},"import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n  database: {\n    default: {\n      connector: \"sqlite\",\n      options: { name: \"db\" }\n    },\n    users: {\n      connector: \"postgresql\",\n      options: {\n        url: \"postgresql://username:password@hostname:port/database_name\"\n      },\n    },\n  },\n});\n",[263,671,672,684,688,698,703,708,719,730,735,740,749,754,762,767,771,776],{"__ignoreMap":5},[292,673,674,676,678,680,682],{"class":294,"line":295},[292,675,299],{"class":298},[292,677,303],{"class":302},[292,679,306],{"class":298},[292,681,310],{"class":309},[292,683,313],{"class":302},[292,685,686],{"class":294,"line":316},[292,687,320],{"emptyLinePlaceholder":319},[292,689,690,692,694,696],{"class":294,"line":323},[292,691,326],{"class":298},[292,693,329],{"class":298},[292,695,333],{"class":332},[292,697,336],{"class":302},[292,699,700],{"class":294,"line":339},[292,701,702],{"class":302},"  database: {\n",[292,704,705],{"class":294,"line":345},[292,706,707],{"class":302},"    default: {\n",[292,709,710,713,716],{"class":294,"line":355},[292,711,712],{"class":302},"      connector: ",[292,714,715],{"class":309},"\"sqlite\"",[292,717,718],{"class":302},",\n",[292,720,721,724,727],{"class":294,"line":361},[292,722,723],{"class":302},"      options: { name: ",[292,725,726],{"class":309},"\"db\"",[292,728,729],{"class":302}," }\n",[292,731,732],{"class":294,"line":486},[292,733,734],{"class":302},"    },\n",[292,736,737],{"class":294,"line":503},[292,738,739],{"class":302},"    users: {\n",[292,741,742,744,747],{"class":294,"line":517},[292,743,712],{"class":302},[292,745,746],{"class":309},"\"postgresql\"",[292,748,718],{"class":302},[292,750,751],{"class":294,"line":522},[292,752,753],{"class":302},"      options: {\n",[292,755,756,759],{"class":294,"line":528},[292,757,758],{"class":302},"        url: ",[292,760,761],{"class":309},"\"postgresql://username:password@hostname:port/database_name\"\n",[292,763,764],{"class":294,"line":564},[292,765,766],{"class":302},"      },\n",[292,768,769],{"class":294,"line":584},[292,770,734],{"class":302},[292,772,773],{"class":294,"line":589},[292,774,775],{"class":302},"  },\n",[292,777,778],{"class":294,"line":595},[292,779,657],{"class":302},[366,781,782],{},[237,783,784,785,788],{},"\n你可以使用 ",[263,786,787],{},"devDatabase"," 配置仅在开发模式下覆盖数据库配置。",[790,791,792],"style",{},"html pre.shiki code .so5gQ, html code.shiki .so5gQ{--shiki-light:#D73A49;--shiki-default:#F97583;--shiki-dark:#F97583}html pre.shiki code .slsVL, html code.shiki .slsVL{--shiki-light:#24292E;--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8}html pre.shiki code .sfrk1, html code.shiki .sfrk1{--shiki-light:#032F62;--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF}html pre.shiki code .shcOC, html code.shiki .shcOC{--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#B392F0}html pre.shiki code .suiK_, html code.shiki .suiK_{--shiki-light:#005CC5;--shiki-default:#79B8FF;--shiki-dark:#79B8FF}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sCsY4, html code.shiki .sCsY4{--shiki-light:#6A737D;--shiki-default:#6A737D;--shiki-dark:#6A737D}",{"title":5,"searchDepth":316,"depth":316,"links":794},[795,796],{"id":394,"depth":316,"text":394},{"id":33,"depth":316,"text":33},"md",{"automd":319,"icon":41},{"icon":41},{"title":38,"description":5},"p9jKl1ItATjrbjMbxuDUoQdIt4TSVewetqHKaKIHJv4",[803,805],{"title":33,"path":34,"stem":35,"description":804,"icon":36,"children":-1},"自定义和扩展 Nitro 默认设置。",{"title":43,"path":44,"stem":45,"description":806,"icon":46,"children":-1},"了解 Nitro 如何运行并处理传入到您的应用的请求。",1771507938480]