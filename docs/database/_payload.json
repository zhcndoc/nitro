[{"data":1,"prerenderedAt":765},["ShallowReactive",2],{"navigation":3,"-docs-database":216,"-docs-database-surround":760},[4,83,208,213],{"title":5,"path":6,"stem":7,"children":8,"icon":82},"","/docs","1.docs/1.index",[9,12,17,22,27,32,37,42,47,52,57,62,67,72,77],{"title":10,"path":6,"stem":7,"icon":11},"介绍","i-lucide-compass",{"title":13,"path":14,"stem":15,"icon":16},"快速开始","/docs/quick-start","1.docs/2.quick-start","i-lucide-zap",{"title":18,"path":19,"stem":20,"icon":21},"渲染器","/docs/renderer","1.docs/4.renderer","ri:layout-masonry-line",{"title":23,"path":24,"stem":25,"icon":26},"服务器路由","/docs/routing","1.docs/5.routing","ri:direction-line",{"title":28,"path":29,"stem":30,"icon":31},"资源","/docs/assets","1.docs/50.assets","ri:image-2-line",{"title":33,"path":34,"stem":35,"icon":36},"配置","/docs/configuration","1.docs/50.configuration","ri:settings-3-line",{"title":38,"path":39,"stem":40,"icon":41},"数据库","/docs/database","1.docs/50.database","ri:database-2-line",{"title":43,"path":44,"stem":45,"icon":46},"生命周期","/docs/lifecycle","1.docs/50.lifecycle","i-lucide-layers",{"title":48,"path":49,"stem":50,"icon":51},"插件","/docs/plugins","1.docs/50.plugins","ri:plug-line",{"title":53,"path":54,"stem":55,"icon":56},"任务","/docs/tasks","1.docs/50.tasks","codicon:run-all",{"title":58,"path":59,"stem":60,"icon":61},"服务器入口","/docs/server-entry","1.docs/6.server-entry","ri:server-line",{"title":63,"path":64,"stem":65,"icon":66},"缓存","/docs/cache","1.docs/7.cache","ri:speed-line",{"title":68,"path":69,"stem":70,"icon":71},"KV 存储","/docs/storage","1.docs/8.storage","carbon:datastore",{"title":73,"path":74,"stem":75,"icon":76},"迁移指南","/docs/migration","1.docs/99.migration","ri:arrow-right-up-line",{"title":78,"path":79,"stem":80,"icon":81},"夜间通道","/docs/nightly","1.docs/99.nightly","ri:moon-fill","i-lucide-book-open",{"title":84,"path":85,"stem":86,"children":87,"icon":89},"概述","/deploy","2.deploy/0.index",[88,90,111],{"title":84,"path":85,"stem":86,"icon":89},"ri:upload-cloud-2-line",{"title":91,"path":92,"stem":93,"children":94,"page":110},"Runtimes","/deploy/runtimes","2.deploy/10.runtimes",[95,100,105],{"title":96,"path":97,"stem":98,"icon":99},"Node.js","/deploy/runtimes/node","2.deploy/10.runtimes/1.node","akar-icons:node-fill",{"title":101,"path":102,"stem":103,"icon":104},"Bun","/deploy/runtimes/bun","2.deploy/10.runtimes/bun","simple-icons:bun",{"title":106,"path":107,"stem":108,"icon":109},"Deno","/deploy/runtimes/deno","2.deploy/10.runtimes/deno","simple-icons:deno",false,{"title":112,"path":113,"stem":114,"children":115,"page":110},"Providers","/deploy/providers","2.deploy/20.providers",[116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204],{"title":117,"path":118,"stem":119},"Alwaysdata","/deploy/providers/alwaysdata","2.deploy/20.providers/alwaysdata",{"title":121,"path":122,"stem":123},"AWS Lambda","/deploy/providers/aws","2.deploy/20.providers/aws",{"title":125,"path":126,"stem":127},"AWS Amplify","/deploy/providers/aws-amplify","2.deploy/20.providers/aws-amplify",{"title":129,"path":130,"stem":131},"Azure","/deploy/providers/azure","2.deploy/20.providers/azure",{"title":133,"path":134,"stem":135},"Cleavr","/deploy/providers/cleavr","2.deploy/20.providers/cleavr",{"title":137,"path":138,"stem":139},"Cloudflare","/deploy/providers/cloudflare","2.deploy/20.providers/cloudflare",{"title":141,"path":142,"stem":143},"Deno Deploy","/deploy/providers/deno-deploy","2.deploy/20.providers/deno-deploy",{"title":145,"path":146,"stem":147},"DigitalOcean","/deploy/providers/digitalocean","2.deploy/20.providers/digitalocean",{"title":149,"path":150,"stem":151},"Firebase","/deploy/providers/firebase","2.deploy/20.providers/firebase",{"title":153,"path":154,"stem":155},"Flightcontrol","/deploy/providers/flightcontrol","2.deploy/20.providers/flightcontrol",{"title":157,"path":158,"stem":159},"Genezio","/deploy/providers/genezio","2.deploy/20.providers/genezio",{"title":161,"path":162,"stem":163},"GitHub Pages","/deploy/providers/github-pages","2.deploy/20.providers/github-pages",{"title":165,"path":166,"stem":167},"GitLab Pages","/deploy/providers/gitlab-pages","2.deploy/20.providers/gitlab-pages",{"title":169,"path":170,"stem":171},"Heroku","/deploy/providers/heroku","2.deploy/20.providers/heroku",{"title":173,"path":174,"stem":175},"IIS","/deploy/providers/iis","2.deploy/20.providers/iis",{"title":177,"path":178,"stem":179},"Koyeb","/deploy/providers/koyeb","2.deploy/20.providers/koyeb",{"title":181,"path":182,"stem":183},"Netlify","/deploy/providers/netlify","2.deploy/20.providers/netlify",{"title":185,"path":186,"stem":187},"Platform.sh","/deploy/providers/platform-sh","2.deploy/20.providers/platform-sh",{"title":189,"path":190,"stem":191},"Render.com","/deploy/providers/render","2.deploy/20.providers/render",{"title":193,"path":194,"stem":195},"StormKit","/deploy/providers/stormkit","2.deploy/20.providers/stormkit",{"title":197,"path":198,"stem":199},"Vercel","/deploy/providers/vercel","2.deploy/20.providers/vercel",{"title":201,"path":202,"stem":203},"Zeabur","/deploy/providers/zeabur","2.deploy/20.providers/zeabur",{"title":205,"path":206,"stem":207},"Zerops","/deploy/providers/zerops","2.deploy/20.providers/zerops",{"title":33,"path":209,"stem":210,"children":211,"icon":36},"/config","3.config/0.index",[212],{"title":33,"path":209,"stem":210,"icon":36},{"title":5,"path":214,"stem":215},"/","index",{"id":217,"title":38,"body":218,"description":5,"extension":755,"meta":756,"navigation":757,"path":39,"seo":758,"stem":40,"__hash__":759},"content/1.docs/50.database.md",{"type":219,"value":220,"toc":751,"icon":41},"minimark",[221,226,233,236,239,260,272,275,358,369,379,384,388,616,618,625,738,747],[222,223,225],"h1",{"id":224},"sql-数据库","SQL 数据库",[227,228,229],"blockquote",{},[230,231,232],"p",{},"Nitro 提供了一个内置的轻量级 SQL 数据库层。",[234,235],"warning",{},[230,237,238],{},"Nitro v3 Alpha 文档仍在开发中 — 可能会有更新、不完善之处和偶尔的不准确。\n:",[230,240,241,242,246,247,254,255,259],{},"默认的数据库连接已",[243,244,245],"strong",{},"预配置","为 ",[248,249,253],"a",{"href":250,"rel":251},"https://db0.unjs.io/connectors/sqlite",[252],"nofollow","SQLite","，并且可以在开发模式和任何兼容 Node.js 的生产部署中开箱即用。默认情况下，数据将存储在 ",[256,257,258],"code",{},".data/db.sqlite"," 中。",[261,262,263],"important",{},[230,264,265,266,271],{},"\n数据库支持目前处于实验阶段。\n请参阅 ",[248,267,270],{"href":268,"rel":269},"https://github.com/unjs/db0/issues",[252],"db0 问题"," 以获取状态信息和报告错误。",[230,273,274],{},"为了启用数据库层，你需要启用实验特性标志。",[276,277,282],"pre",{"className":278,"code":279,"filename":280,"language":281,"meta":5,"style":5},"language-ts shiki shiki-themes github-light github-dark github-dark","import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n  experimental: {\n    database: true\n  }\n})\n","nitro.config.ts","ts",[256,283,284,307,314,330,336,346,352],{"__ignoreMap":5},[285,286,289,293,297,300,304],"span",{"class":287,"line":288},"line",1,[285,290,292],{"class":291},"so5gQ","import",[285,294,296],{"class":295},"slsVL"," { defineNitroConfig } ",[285,298,299],{"class":291},"from",[285,301,303],{"class":302},"sfrk1"," \"nitro/config\"",[285,305,306],{"class":295},";\n",[285,308,310],{"class":287,"line":309},2,[285,311,313],{"emptyLinePlaceholder":312},true,"\n",[285,315,317,320,323,327],{"class":287,"line":316},3,[285,318,319],{"class":291},"export",[285,321,322],{"class":291}," default",[285,324,326],{"class":325},"shcOC"," defineNitroConfig",[285,328,329],{"class":295},"({\n",[285,331,333],{"class":287,"line":332},4,[285,334,335],{"class":295},"  experimental: {\n",[285,337,339,342],{"class":287,"line":338},5,[285,340,341],{"class":295},"    database: ",[285,343,345],{"class":344},"suiK_","true\n",[285,347,349],{"class":287,"line":348},6,[285,350,351],{"class":295},"  }\n",[285,353,355],{"class":287,"line":354},7,[285,356,357],{"class":295},"})\n",[359,360,361],"tip",{},[230,362,363,364,368],{},"\n你可以更改默认连接，或者为任何 ",[248,365,367],{"href":250,"rel":366},[252],"支持的数据库"," 定义更多连接。",[359,370,371],{},[230,372,373,374,259],{},"\n你可以将数据库实例集成到任何 ",[248,375,378],{"href":376,"rel":377},"https://db0.unjs.io/integrations",[252],"支持的 ORM",[380,381],"read-more",{"title":382,"to":383},"DB0 文档","https://db0.unjs.io",[385,386,387],"h2",{"id":387},"用法",[276,389,392],{"className":278,"code":390,"filename":391,"language":281,"meta":5,"style":5},"export default defineEventHandler(async () => {\n  const db = useDatabase();\n\n  // Create users table\n  await db.sql`DROP TABLE IF EXISTS users`;\n  await db.sql`CREATE TABLE IF NOT EXISTS users (\"id\" TEXT PRIMARY KEY, \"firstName\" TEXT, \"lastName\" TEXT, \"email\" TEXT)`;\n\n  // Add a new user\n  const userId = String(Math.round(Math.random() * 10_000));\n  await db.sql`INSERT INTO users VALUES (${userId}, 'John', 'Doe', '')`;\n\n  // Query for users\n  const { rows } = await db.sql`SELECT * FROM users WHERE id = ${userId}`;\n\n  return {\n    rows,\n  };\n});\n","index.ts",[256,393,394,418,435,439,445,461,474,478,484,520,540,545,551,585,590,598,604,610],{"__ignoreMap":5},[285,395,396,398,400,403,406,409,412,415],{"class":287,"line":288},[285,397,319],{"class":291},[285,399,322],{"class":291},[285,401,402],{"class":325}," defineEventHandler",[285,404,405],{"class":295},"(",[285,407,408],{"class":291},"async",[285,410,411],{"class":295}," () ",[285,413,414],{"class":291},"=>",[285,416,417],{"class":295}," {\n",[285,419,420,423,426,429,432],{"class":287,"line":309},[285,421,422],{"class":291},"  const",[285,424,425],{"class":344}," db",[285,427,428],{"class":291}," =",[285,430,431],{"class":325}," useDatabase",[285,433,434],{"class":295},"();\n",[285,436,437],{"class":287,"line":316},[285,438,313],{"emptyLinePlaceholder":312},[285,440,441],{"class":287,"line":332},[285,442,444],{"class":443},"sCsY4","  // Create users table\n",[285,446,447,450,453,456,459],{"class":287,"line":338},[285,448,449],{"class":291},"  await",[285,451,452],{"class":295}," db.",[285,454,455],{"class":325},"sql",[285,457,458],{"class":302},"`DROP TABLE IF EXISTS users`",[285,460,306],{"class":295},[285,462,463,465,467,469,472],{"class":287,"line":348},[285,464,449],{"class":291},[285,466,452],{"class":295},[285,468,455],{"class":325},[285,470,471],{"class":302},"`CREATE TABLE IF NOT EXISTS users (\"id\" TEXT PRIMARY KEY, \"firstName\" TEXT, \"lastName\" TEXT, \"email\" TEXT)`",[285,473,306],{"class":295},[285,475,476],{"class":287,"line":354},[285,477,313],{"emptyLinePlaceholder":312},[285,479,481],{"class":287,"line":480},8,[285,482,483],{"class":443},"  // Add a new user\n",[285,485,487,489,492,494,497,500,503,505,508,511,514,517],{"class":287,"line":486},9,[285,488,422],{"class":291},[285,490,491],{"class":344}," userId",[285,493,428],{"class":291},[285,495,496],{"class":325}," String",[285,498,499],{"class":295},"(Math.",[285,501,502],{"class":325},"round",[285,504,499],{"class":295},[285,506,507],{"class":325},"random",[285,509,510],{"class":295},"() ",[285,512,513],{"class":291},"*",[285,515,516],{"class":344}," 10_000",[285,518,519],{"class":295},"));\n",[285,521,523,525,527,529,532,535,538],{"class":287,"line":522},10,[285,524,449],{"class":291},[285,526,452],{"class":295},[285,528,455],{"class":325},[285,530,531],{"class":302},"`INSERT INTO users VALUES (${",[285,533,534],{"class":295},"userId",[285,536,537],{"class":302},"}, 'John', 'Doe', '')`",[285,539,306],{"class":295},[285,541,543],{"class":287,"line":542},11,[285,544,313],{"emptyLinePlaceholder":312},[285,546,548],{"class":287,"line":547},12,[285,549,550],{"class":443},"  // Query for users\n",[285,552,554,556,559,562,565,568,571,573,575,578,580,583],{"class":287,"line":553},13,[285,555,422],{"class":291},[285,557,558],{"class":295}," { ",[285,560,561],{"class":344},"rows",[285,563,564],{"class":295}," } ",[285,566,567],{"class":291},"=",[285,569,570],{"class":291}," await",[285,572,452],{"class":295},[285,574,455],{"class":325},[285,576,577],{"class":302},"`SELECT * FROM users WHERE id = ${",[285,579,534],{"class":295},[285,581,582],{"class":302},"}`",[285,584,306],{"class":295},[285,586,588],{"class":287,"line":587},14,[285,589,313],{"emptyLinePlaceholder":312},[285,591,593,596],{"class":287,"line":592},15,[285,594,595],{"class":291},"  return",[285,597,417],{"class":295},[285,599,601],{"class":287,"line":600},16,[285,602,603],{"class":295},"    rows,\n",[285,605,607],{"class":287,"line":606},17,[285,608,609],{"class":295},"  };\n",[285,611,613],{"class":287,"line":612},18,[285,614,615],{"class":295},"});\n",[385,617,33],{"id":33},[230,619,620,621,624],{},"你可以使用 ",[256,622,623],{},"database"," 配置来配置数据库连接：",[276,626,628],{"className":278,"code":627,"filename":280,"language":281,"meta":5,"style":5},"import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n  database: {\n    default: {\n      connector: \"sqlite\",\n      options: { name: \"db\" }\n    },\n    users: {\n      connector: \"postgresql\",\n      options: {\n        url: \"postgresql://username:password@hostname:port/database_name\"\n      },\n    },\n  },\n});\n",[256,629,630,642,646,656,661,666,677,688,693,698,707,712,720,725,729,734],{"__ignoreMap":5},[285,631,632,634,636,638,640],{"class":287,"line":288},[285,633,292],{"class":291},[285,635,296],{"class":295},[285,637,299],{"class":291},[285,639,303],{"class":302},[285,641,306],{"class":295},[285,643,644],{"class":287,"line":309},[285,645,313],{"emptyLinePlaceholder":312},[285,647,648,650,652,654],{"class":287,"line":316},[285,649,319],{"class":291},[285,651,322],{"class":291},[285,653,326],{"class":325},[285,655,329],{"class":295},[285,657,658],{"class":287,"line":332},[285,659,660],{"class":295},"  database: {\n",[285,662,663],{"class":287,"line":338},[285,664,665],{"class":295},"    default: {\n",[285,667,668,671,674],{"class":287,"line":348},[285,669,670],{"class":295},"      connector: ",[285,672,673],{"class":302},"\"sqlite\"",[285,675,676],{"class":295},",\n",[285,678,679,682,685],{"class":287,"line":354},[285,680,681],{"class":295},"      options: { name: ",[285,683,684],{"class":302},"\"db\"",[285,686,687],{"class":295}," }\n",[285,689,690],{"class":287,"line":480},[285,691,692],{"class":295},"    },\n",[285,694,695],{"class":287,"line":486},[285,696,697],{"class":295},"    users: {\n",[285,699,700,702,705],{"class":287,"line":522},[285,701,670],{"class":295},[285,703,704],{"class":302},"\"postgresql\"",[285,706,676],{"class":295},[285,708,709],{"class":287,"line":542},[285,710,711],{"class":295},"      options: {\n",[285,713,714,717],{"class":287,"line":547},[285,715,716],{"class":295},"        url: ",[285,718,719],{"class":302},"\"postgresql://username:password@hostname:port/database_name\"\n",[285,721,722],{"class":287,"line":553},[285,723,724],{"class":295},"      },\n",[285,726,727],{"class":287,"line":587},[285,728,692],{"class":295},[285,730,731],{"class":287,"line":592},[285,732,733],{"class":295},"  },\n",[285,735,736],{"class":287,"line":600},[285,737,615],{"class":295},[359,739,740],{},[230,741,742,743,746],{},"\n你可以使用 ",[256,744,745],{},"devDatabase"," 配置仅在开发模式下覆盖数据库配置。",[748,749,750],"style",{},"html pre.shiki code .so5gQ, html code.shiki .so5gQ{--shiki-light:#D73A49;--shiki-default:#F97583;--shiki-dark:#F97583}html pre.shiki code .slsVL, html code.shiki .slsVL{--shiki-light:#24292E;--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8}html pre.shiki code .sfrk1, html code.shiki .sfrk1{--shiki-light:#032F62;--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF}html pre.shiki code .shcOC, html code.shiki .shcOC{--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#B392F0}html pre.shiki code .suiK_, html code.shiki .suiK_{--shiki-light:#005CC5;--shiki-default:#79B8FF;--shiki-dark:#79B8FF}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sCsY4, html code.shiki .sCsY4{--shiki-light:#6A737D;--shiki-default:#6A737D;--shiki-dark:#6A737D}",{"title":5,"searchDepth":309,"depth":309,"links":752},[753,754],{"id":387,"depth":309,"text":387},{"id":33,"depth":309,"text":33},"md",{"automd":312,"icon":41},{"icon":41},{"title":38,"description":5},"i97S8fkry_JzVCKPEmgoaoXVV29LeP-JehpcIs6S4Z8",[761,763],{"title":33,"path":34,"stem":35,"description":762,"icon":36,"children":-1},"自定义和扩展 Nitro 默认设置。",{"title":43,"path":44,"stem":45,"description":764,"icon":46,"children":-1},"了解 Nitro 如何运行并处理传入到您的应用的请求。",1761554644071]