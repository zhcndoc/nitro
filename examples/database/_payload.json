[{"data":1,"prerenderedAt":1522},["ShallowReactive",2],{"navigation":3,"examples-nav":223,"-examples-database":356,"-examples-database-surround":1515},[4,83,208,213,220],{"title":5,"path":6,"stem":7,"children":8,"icon":82},"","/docs","1.docs/1.index",[9,12,17,22,27,32,37,42,47,52,57,62,67,72,77],{"title":10,"path":6,"stem":7,"icon":11},"介绍","i-lucide-compass",{"title":13,"path":14,"stem":15,"icon":16},"快速开始","/docs/quick-start","1.docs/2.quick-start","i-lucide-zap",{"title":18,"path":19,"stem":20,"icon":21},"渲染器","/docs/renderer","1.docs/4.renderer","ri:layout-masonry-line",{"title":23,"path":24,"stem":25,"icon":26},"服务器路由","/docs/routing","1.docs/5.routing","ri:direction-line",{"title":28,"path":29,"stem":30,"icon":31},"资源","/docs/assets","1.docs/50.assets","ri:image-2-line",{"title":33,"path":34,"stem":35,"icon":36},"配置","/docs/configuration","1.docs/50.configuration","ri:settings-3-line",{"title":38,"path":39,"stem":40,"icon":41},"数据库","/docs/database","1.docs/50.database","ri:database-2-line",{"title":43,"path":44,"stem":45,"icon":46},"生命周期","/docs/lifecycle","1.docs/50.lifecycle","i-lucide-layers",{"title":48,"path":49,"stem":50,"icon":51},"插件","/docs/plugins","1.docs/50.plugins","ri:plug-line",{"title":53,"path":54,"stem":55,"icon":56},"任务","/docs/tasks","1.docs/50.tasks","codicon:run-all",{"title":58,"path":59,"stem":60,"icon":61},"服务器入口","/docs/server-entry","1.docs/6.server-entry","ri:server-line",{"title":63,"path":64,"stem":65,"icon":66},"缓存","/docs/cache","1.docs/7.cache","ri:speed-line",{"title":68,"path":69,"stem":70,"icon":71},"KV 存储","/docs/storage","1.docs/8.storage","carbon:datastore",{"title":73,"path":74,"stem":75,"icon":76},"迁移指南","/docs/migration","1.docs/99.migration","ri:arrow-right-up-line",{"title":78,"path":79,"stem":80,"icon":81},"夜间通道","/docs/nightly","1.docs/99.nightly","ri:moon-fill","i-lucide-book-open",{"title":84,"path":85,"stem":86,"children":87,"icon":89},"概述","/deploy","2.deploy/0.index",[88,90,111],{"title":84,"path":85,"stem":86,"icon":89},"ri:upload-cloud-2-line",{"title":91,"path":92,"stem":93,"children":94,"page":110},"Runtimes","/deploy/runtimes","2.deploy/10.runtimes",[95,100,105],{"title":96,"path":97,"stem":98,"icon":99},"Node.js","/deploy/runtimes/node","2.deploy/10.runtimes/1.node","akar-icons:node-fill",{"title":101,"path":102,"stem":103,"icon":104},"Bun","/deploy/runtimes/bun","2.deploy/10.runtimes/bun","simple-icons:bun",{"title":106,"path":107,"stem":108,"icon":109},"Deno","/deploy/runtimes/deno","2.deploy/10.runtimes/deno","simple-icons:deno",false,{"title":112,"path":113,"stem":114,"children":115,"page":110},"Providers","/deploy/providers","2.deploy/20.providers",[116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204],{"title":117,"path":118,"stem":119},"Alwaysdata","/deploy/providers/alwaysdata","2.deploy/20.providers/alwaysdata",{"title":121,"path":122,"stem":123},"AWS Lambda","/deploy/providers/aws","2.deploy/20.providers/aws",{"title":125,"path":126,"stem":127},"AWS Amplify","/deploy/providers/aws-amplify","2.deploy/20.providers/aws-amplify",{"title":129,"path":130,"stem":131},"Azure","/deploy/providers/azure","2.deploy/20.providers/azure",{"title":133,"path":134,"stem":135},"Cleavr","/deploy/providers/cleavr","2.deploy/20.providers/cleavr",{"title":137,"path":138,"stem":139},"Cloudflare","/deploy/providers/cloudflare","2.deploy/20.providers/cloudflare",{"title":141,"path":142,"stem":143},"Deno Deploy","/deploy/providers/deno-deploy","2.deploy/20.providers/deno-deploy",{"title":145,"path":146,"stem":147},"DigitalOcean","/deploy/providers/digitalocean","2.deploy/20.providers/digitalocean",{"title":149,"path":150,"stem":151},"Firebase","/deploy/providers/firebase","2.deploy/20.providers/firebase",{"title":153,"path":154,"stem":155},"Flightcontrol","/deploy/providers/flightcontrol","2.deploy/20.providers/flightcontrol",{"title":157,"path":158,"stem":159},"Genezio","/deploy/providers/genezio","2.deploy/20.providers/genezio",{"title":161,"path":162,"stem":163},"GitHub Pages","/deploy/providers/github-pages","2.deploy/20.providers/github-pages",{"title":165,"path":166,"stem":167},"GitLab Pages","/deploy/providers/gitlab-pages","2.deploy/20.providers/gitlab-pages",{"title":169,"path":170,"stem":171},"Heroku","/deploy/providers/heroku","2.deploy/20.providers/heroku",{"title":173,"path":174,"stem":175},"IIS","/deploy/providers/iis","2.deploy/20.providers/iis",{"title":177,"path":178,"stem":179},"Koyeb","/deploy/providers/koyeb","2.deploy/20.providers/koyeb",{"title":181,"path":182,"stem":183},"Netlify","/deploy/providers/netlify","2.deploy/20.providers/netlify",{"title":185,"path":186,"stem":187},"Platform.sh","/deploy/providers/platform-sh","2.deploy/20.providers/platform-sh",{"title":189,"path":190,"stem":191},"Render.com","/deploy/providers/render","2.deploy/20.providers/render",{"title":193,"path":194,"stem":195},"StormKit","/deploy/providers/stormkit","2.deploy/20.providers/stormkit",{"title":197,"path":198,"stem":199},"Vercel","/deploy/providers/vercel","2.deploy/20.providers/vercel",{"title":201,"path":202,"stem":203},"Zeabur","/deploy/providers/zeabur","2.deploy/20.providers/zeabur",{"title":205,"path":206,"stem":207},"Zerops","/deploy/providers/zerops","2.deploy/20.providers/zerops",{"title":33,"path":209,"stem":210,"children":211,"icon":36},"/config","3.config/0.index",[212],{"title":33,"path":209,"stem":210,"icon":36},{"title":214,"path":215,"stem":216,"children":217,"icon":219},"示例","/examples","4.examples/0.index",[218],{"title":214,"path":215,"stem":216,"icon":219},"i-lucide-folder-code",{"title":5,"path":221,"stem":222},"/","index",[224,229,234,238,242,245,250,255,259,263,267,271,275,280,284,288,293,297,301,306,310,315,319,323,327,332,336,340,344,348,352],{"title":225,"description":226,"category":227,"path":228},"API 路由","基于文件的 API 路由，支持 HTTP 方法和动态参数。","features","/examples/api-routes/readme",{"title":230,"description":231,"category":232,"path":233},"自动导入","实用工具和组合式函数的自动导入。","config","/examples/auto-imports/readme",{"title":235,"description":236,"category":227,"path":237},"缓存处理器","使用可配置的绕过逻辑缓存路由响应。","/examples/cached-handler/readme",{"title":239,"description":240,"category":227,"path":241},"自定义错误处理器","使用全局错误处理器自定义错误响应。","/examples/custom-error-handler/readme",{"title":38,"description":243,"category":227,"path":244},"内置数据库支持，使用 SQL 模板字面量。","/examples/database/readme",{"title":246,"description":247,"category":248,"path":249},"Elysia","使用服务端入口将 Elysia 与 Nitro 集成。","后端框架","/examples/elysia/readme",{"title":251,"description":252,"category":253,"path":254},"Express","使用服务器入口将 Express 集成到 Nitro 中。","backend frameworks","/examples/express/readme",{"title":256,"description":257,"category":253,"path":258},"Fastify","使用服务器入口将 Fastify 与 Nitro 集成。","/examples/fastify/readme",{"title":260,"description":261,"category":227,"path":262},"你好，世界","使用 Web 标准 fetch 处理程序的最简 Nitro 服务器。","/examples/hello-world/readme",{"title":264,"description":265,"category":248,"path":266},"Hono","使用服务器入口将 Hono 集成到 Nitro 中。","/examples/hono/readme",{"title":268,"description":269,"category":232,"path":270},"导入别名","自定义导入别名，使模块路径更简洁。","/examples/import-alias/readme",{"title":272,"description":273,"category":227,"path":274},"中间件","用于身份验证、日志记录和请求修改的请求中间件。","/examples/middleware/readme",{"title":276,"description":277,"category":278,"path":279},"Mono JSX","在 Nitro 中使用 mono-jsx 进行服务器端 JSX 渲染。","服务器端渲染","/examples/mono-jsx/readme",{"title":281,"description":282,"category":278,"path":283},"Nano JSX","在 Nitro 中使用 nano-jsx 进行服务器端 JSX 渲染。","/examples/nano-jsx/readme",{"title":285,"description":286,"category":227,"path":287},"插件（Plugins）","使用自定义插件扩展 Nitro，用于钩子和生命周期事件。","/examples/plugins/readme",{"title":289,"description":290,"category":291,"path":292},"自定义渲染器","使用 Nitro 构建一个具有服务端数据获取功能的自定义 HTML 渲染器。","server side rendering","/examples/renderer/readme",{"title":294,"description":295,"category":232,"path":296},"运行时配置","支持运行时访问的环境感知配置。","/examples/runtime-config/readme",{"title":298,"description":299,"category":227,"path":300},"服务器请求","内部服务器到服务器的请求，无网络开销。","/examples/server-fetch/readme",{"title":302,"description":303,"category":304,"path":305},"Shiki","使用 Shiki 实现在 Nitro 中的服务器端语法高亮。","integrations","/examples/shiki/readme",{"title":307,"description":308,"category":227,"path":309},"虚拟路由","使用 Nitro 的虚拟模块系统以编程方式定义路由。","/examples/virtual-routes/readme",{"title":311,"description":312,"category":313,"path":314},"Vite Nitro 插件","将 Nitro 用作 Vite 插件，以编程方式配置。","vite","/examples/vite-nitro-plugin/readme",{"title":316,"description":317,"category":313,"path":318},"Vite RSC","使用 Vite 和 Nitro 的 React 服务器组件。","/examples/vite-rsc/readme",{"title":320,"description":321,"category":278,"path":322},"Vite SSR HTML","使用原生 HTML、Vite 和 Nitro 实现服务器端渲染。","/examples/vite-ssr-html/readme",{"title":324,"description":325,"category":278,"path":326},"使用 Preact 进行 SSR","在 Nitro 中使用 Vite 和 Preact 实现服务器端渲染。","/examples/vite-ssr-preact/readme",{"title":328,"description":329,"category":330,"path":331},"使用 React 实现 SSR","在 Nitro 中使用 Vite 进行 React 的服务端渲染。","服务端渲染","/examples/vite-ssr-react/readme",{"title":333,"description":334,"category":330,"path":335},"使用 SolidJS 进行 SSR","在 Nitro 中使用 Vite 进行 SolidJS 服务端渲染。","/examples/vite-ssr-solid/readme",{"title":337,"description":338,"category":278,"path":339},"使用 TanStack Router 实现 SSR","在 Nitro 中使用 Vite 结合 TanStack Router 实现客户端路由。","/examples/vite-ssr-tsr-react/readme",{"title":341,"description":342,"category":278,"path":343},"使用 TanStack Start 进行 SSR","使用 Vite 在 Nitro 中使用 TanStack Start 实现全栈 React。","/examples/vite-ssr-tss-react/readme",{"title":345,"description":346,"category":291,"path":347},"使用 Vue Router 的 SSR","使用 Vite 的 Nitro 中使用 Vue Router 进行服务端渲染。","/examples/vite-ssr-vue-router/readme",{"title":349,"description":350,"category":313,"path":351},"Vite + tRPC","使用 Vite 在 Nitro 中通过 tRPC 实现端到端类型安全的 API。","/examples/vite-trpc/readme",{"title":353,"description":354,"category":227,"path":355},"WebSocket","支持 WebSocket 的实时双向通信。","/examples/websocket/readme",{"id":357,"title":38,"body":358,"category":227,"description":243,"extension":1508,"icon":1509,"meta":1510,"navigation":1511,"path":244,"seo":1512,"stem":1513,"__hash__":1514},"examples/examples/database/README.md",{"type":359,"value":360,"toc":1503},"minimark",[361,1085,1089,1093,1297,1312,1315,1322,1483,1486,1499],[362,363,366,485,572,829,853,907],"code-tree",{":expand-all":364,"default-value":365,"expand-all":5},"true","server.ts",[367,368,373],"pre",{"className":369,"code":370,"filename":371,"language":372,"meta":5,"style":5},"language-ts shiki shiki-themes github-light github-dark github-dark","import { defineConfig } from \"nitro\";\n\nexport default defineConfig({\n  experimental: {\n    database: true,\n    tasks: true,\n  },\n  database: {\n    default: { connector: \"sqlite\" },\n  },\n});\n","nitro.config.ts","ts",[374,375,376,399,406,422,428,440,450,456,462,474,479],"code",{"__ignoreMap":5},[377,378,381,385,389,392,396],"span",{"class":379,"line":380},"line",1,[377,382,384],{"class":383},"so5gQ","import",[377,386,388],{"class":387},"slsVL"," { defineConfig } ",[377,390,391],{"class":383},"from",[377,393,395],{"class":394},"sfrk1"," \"nitro\"",[377,397,398],{"class":387},";\n",[377,400,402],{"class":379,"line":401},2,[377,403,405],{"emptyLinePlaceholder":404},true,"\n",[377,407,409,412,415,419],{"class":379,"line":408},3,[377,410,411],{"class":383},"export",[377,413,414],{"class":383}," default",[377,416,418],{"class":417},"shcOC"," defineConfig",[377,420,421],{"class":387},"({\n",[377,423,425],{"class":379,"line":424},4,[377,426,427],{"class":387},"  experimental: {\n",[377,429,431,434,437],{"class":379,"line":430},5,[377,432,433],{"class":387},"    database: ",[377,435,364],{"class":436},"suiK_",[377,438,439],{"class":387},",\n",[377,441,443,446,448],{"class":379,"line":442},6,[377,444,445],{"class":387},"    tasks: ",[377,447,364],{"class":436},[377,449,439],{"class":387},[377,451,453],{"class":379,"line":452},7,[377,454,455],{"class":387},"  },\n",[377,457,459],{"class":379,"line":458},8,[377,460,461],{"class":387},"  database: {\n",[377,463,465,468,471],{"class":379,"line":464},9,[377,466,467],{"class":387},"    default: { connector: ",[377,469,470],{"class":394},"\"sqlite\"",[377,472,473],{"class":387}," },\n",[377,475,477],{"class":379,"line":476},10,[377,478,455],{"class":387},[377,480,482],{"class":379,"line":481},11,[377,483,484],{"class":387},"});\n",[367,486,491],{"className":487,"code":488,"filename":489,"language":490,"meta":5,"style":5},"language-json shiki shiki-themes github-light github-dark github-dark","{\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"nitro dev\",\n    \"build\": \"nitro build\"\n  },\n  \"devDependencies\": {\n    \"nitro\": \"latest\"\n  }\n}\n","package.json","json",[374,492,493,498,511,519,531,541,545,552,562,567],{"__ignoreMap":5},[377,494,495],{"class":379,"line":380},[377,496,497],{"class":387},"{\n",[377,499,500,503,506,509],{"class":379,"line":401},[377,501,502],{"class":436},"  \"type\"",[377,504,505],{"class":387},": ",[377,507,508],{"class":394},"\"module\"",[377,510,439],{"class":387},[377,512,513,516],{"class":379,"line":408},[377,514,515],{"class":436},"  \"scripts\"",[377,517,518],{"class":387},": {\n",[377,520,521,524,526,529],{"class":379,"line":424},[377,522,523],{"class":436},"    \"dev\"",[377,525,505],{"class":387},[377,527,528],{"class":394},"\"nitro dev\"",[377,530,439],{"class":387},[377,532,533,536,538],{"class":379,"line":430},[377,534,535],{"class":436},"    \"build\"",[377,537,505],{"class":387},[377,539,540],{"class":394},"\"nitro build\"\n",[377,542,543],{"class":379,"line":442},[377,544,455],{"class":387},[377,546,547,550],{"class":379,"line":452},[377,548,549],{"class":436},"  \"devDependencies\"",[377,551,518],{"class":387},[377,553,554,557,559],{"class":379,"line":458},[377,555,556],{"class":436},"    \"nitro\"",[377,558,505],{"class":387},[377,560,561],{"class":394},"\"latest\"\n",[377,563,564],{"class":379,"line":464},[377,565,566],{"class":387},"  }\n",[377,568,569],{"class":379,"line":476},[377,570,571],{"class":387},"}\n",[367,573,575],{"className":369,"code":574,"filename":365,"language":372,"meta":5,"style":5},"import { defineHandler } from \"nitro/h3\";\nimport { useDatabase } from \"nitro/database\";\n\nexport default defineHandler(async () => {\n  const db = useDatabase();\n\n  // Create users table\n  await db.sql`DROP TABLE IF EXISTS users`;\n  await db.sql`CREATE TABLE IF NOT EXISTS users (\"id\" TEXT PRIMARY KEY, \"firstName\" TEXT, \"lastName\" TEXT, \"email\" TEXT)`;\n\n  // Add a new user\n  const userId = String(Math.round(Math.random() * 10_000));\n  await db.sql`INSERT INTO users VALUES (${userId}, 'John', 'Doe', '')`;\n\n  // Query for users\n  const { rows } = await db.sql`SELECT * FROM users WHERE id = ${userId}`;\n\n  return {\n    rows,\n  };\n});\n",[374,576,577,591,605,609,633,650,654,660,676,689,693,698,734,754,759,765,799,804,812,818,824],{"__ignoreMap":5},[377,578,579,581,584,586,589],{"class":379,"line":380},[377,580,384],{"class":383},[377,582,583],{"class":387}," { defineHandler } ",[377,585,391],{"class":383},[377,587,588],{"class":394}," \"nitro/h3\"",[377,590,398],{"class":387},[377,592,593,595,598,600,603],{"class":379,"line":401},[377,594,384],{"class":383},[377,596,597],{"class":387}," { useDatabase } ",[377,599,391],{"class":383},[377,601,602],{"class":394}," \"nitro/database\"",[377,604,398],{"class":387},[377,606,607],{"class":379,"line":408},[377,608,405],{"emptyLinePlaceholder":404},[377,610,611,613,615,618,621,624,627,630],{"class":379,"line":424},[377,612,411],{"class":383},[377,614,414],{"class":383},[377,616,617],{"class":417}," defineHandler",[377,619,620],{"class":387},"(",[377,622,623],{"class":383},"async",[377,625,626],{"class":387}," () ",[377,628,629],{"class":383},"=>",[377,631,632],{"class":387}," {\n",[377,634,635,638,641,644,647],{"class":379,"line":430},[377,636,637],{"class":383},"  const",[377,639,640],{"class":436}," db",[377,642,643],{"class":383}," =",[377,645,646],{"class":417}," useDatabase",[377,648,649],{"class":387},"();\n",[377,651,652],{"class":379,"line":442},[377,653,405],{"emptyLinePlaceholder":404},[377,655,656],{"class":379,"line":452},[377,657,659],{"class":658},"sCsY4","  // Create users table\n",[377,661,662,665,668,671,674],{"class":379,"line":458},[377,663,664],{"class":383},"  await",[377,666,667],{"class":387}," db.",[377,669,670],{"class":417},"sql",[377,672,673],{"class":394},"`DROP TABLE IF EXISTS users`",[377,675,398],{"class":387},[377,677,678,680,682,684,687],{"class":379,"line":464},[377,679,664],{"class":383},[377,681,667],{"class":387},[377,683,670],{"class":417},[377,685,686],{"class":394},"`CREATE TABLE IF NOT EXISTS users (\"id\" TEXT PRIMARY KEY, \"firstName\" TEXT, \"lastName\" TEXT, \"email\" TEXT)`",[377,688,398],{"class":387},[377,690,691],{"class":379,"line":476},[377,692,405],{"emptyLinePlaceholder":404},[377,694,695],{"class":379,"line":481},[377,696,697],{"class":658},"  // Add a new user\n",[377,699,701,703,706,708,711,714,717,719,722,725,728,731],{"class":379,"line":700},12,[377,702,637],{"class":383},[377,704,705],{"class":436}," userId",[377,707,643],{"class":383},[377,709,710],{"class":417}," String",[377,712,713],{"class":387},"(Math.",[377,715,716],{"class":417},"round",[377,718,713],{"class":387},[377,720,721],{"class":417},"random",[377,723,724],{"class":387},"() ",[377,726,727],{"class":383},"*",[377,729,730],{"class":436}," 10_000",[377,732,733],{"class":387},"));\n",[377,735,737,739,741,743,746,749,752],{"class":379,"line":736},13,[377,738,664],{"class":383},[377,740,667],{"class":387},[377,742,670],{"class":417},[377,744,745],{"class":394},"`INSERT INTO users VALUES (${",[377,747,748],{"class":387},"userId",[377,750,751],{"class":394},"}, 'John', 'Doe', '')`",[377,753,398],{"class":387},[377,755,757],{"class":379,"line":756},14,[377,758,405],{"emptyLinePlaceholder":404},[377,760,762],{"class":379,"line":761},15,[377,763,764],{"class":658},"  // Query for users\n",[377,766,768,770,773,776,779,782,785,787,789,792,794,797],{"class":379,"line":767},16,[377,769,637],{"class":383},[377,771,772],{"class":387}," { ",[377,774,775],{"class":436},"rows",[377,777,778],{"class":387}," } ",[377,780,781],{"class":383},"=",[377,783,784],{"class":383}," await",[377,786,667],{"class":387},[377,788,670],{"class":417},[377,790,791],{"class":394},"`SELECT * FROM users WHERE id = ${",[377,793,748],{"class":387},[377,795,796],{"class":394},"}`",[377,798,398],{"class":387},[377,800,802],{"class":379,"line":801},17,[377,803,405],{"emptyLinePlaceholder":404},[377,805,807,810],{"class":379,"line":806},18,[377,808,809],{"class":383},"  return",[377,811,632],{"class":387},[377,813,815],{"class":379,"line":814},19,[377,816,817],{"class":387},"    rows,\n",[377,819,821],{"class":379,"line":820},20,[377,822,823],{"class":387},"  };\n",[377,825,827],{"class":379,"line":826},21,[377,828,484],{"class":387},[367,830,833],{"className":487,"code":831,"filename":832,"language":490,"meta":5,"style":5},"{\n  \"extends\": \"nitro/tsconfig\"\n}\n","tsconfig.json",[374,834,835,839,849],{"__ignoreMap":5},[377,836,837],{"class":379,"line":380},[377,838,497],{"class":387},[377,840,841,844,846],{"class":379,"line":401},[377,842,843],{"class":436},"  \"extends\"",[377,845,505],{"class":387},[377,847,848],{"class":394},"\"nitro/tsconfig\"\n",[377,850,851],{"class":379,"line":408},[377,852,571],{"class":387},[367,854,857],{"className":369,"code":855,"filename":856,"language":372,"meta":5,"style":5},"import { defineConfig } from \"vite\";\nimport { nitro } from \"nitro/vite\";\n\nexport default defineConfig({ plugins: [nitro()] });\n","vite.config.ts",[374,858,859,872,886,890],{"__ignoreMap":5},[377,860,861,863,865,867,870],{"class":379,"line":380},[377,862,384],{"class":383},[377,864,388],{"class":387},[377,866,391],{"class":383},[377,868,869],{"class":394}," \"vite\"",[377,871,398],{"class":387},[377,873,874,876,879,881,884],{"class":379,"line":401},[377,875,384],{"class":383},[377,877,878],{"class":387}," { nitro } ",[377,880,391],{"class":383},[377,882,883],{"class":394}," \"nitro/vite\"",[377,885,398],{"class":387},[377,887,888],{"class":379,"line":408},[377,889,405],{"emptyLinePlaceholder":404},[377,891,892,894,896,898,901,904],{"class":379,"line":424},[377,893,411],{"class":383},[377,895,414],{"class":383},[377,897,418],{"class":417},[377,899,900],{"class":387},"({ plugins: [",[377,902,903],{"class":417},"nitro",[377,905,906],{"class":387},"()] });\n",[367,908,911],{"className":369,"code":909,"filename":910,"language":372,"meta":5,"style":5},"import { defineTask } from \"nitro/task\";\nimport { useDatabase } from \"nitro/database\";\n\nexport default defineTask({\n  meta: {\n    description: \"Run database migrations\",\n  },\n  async run() {\n    const db = useDatabase();\n\n    console.log(\"Running database migrations...\");\n\n    // Create users table\n    await db.sql`DROP TABLE IF EXISTS users`;\n    await db.sql`CREATE TABLE IF NOT EXISTS users (\"id\" TEXT PRIMARY KEY, \"firstName\" TEXT, \"lastName\" TEXT, \"email\" TEXT)`;\n\n    return {\n      result: \"Database migrations complete!\",\n    };\n  },\n});\n","tasks/db/migrate.ts",[374,912,913,927,939,943,954,959,969,973,984,997,1001,1017,1021,1026,1039,1051,1055,1062,1072,1077,1081],{"__ignoreMap":5},[377,914,915,917,920,922,925],{"class":379,"line":380},[377,916,384],{"class":383},[377,918,919],{"class":387}," { defineTask } ",[377,921,391],{"class":383},[377,923,924],{"class":394}," \"nitro/task\"",[377,926,398],{"class":387},[377,928,929,931,933,935,937],{"class":379,"line":401},[377,930,384],{"class":383},[377,932,597],{"class":387},[377,934,391],{"class":383},[377,936,602],{"class":394},[377,938,398],{"class":387},[377,940,941],{"class":379,"line":408},[377,942,405],{"emptyLinePlaceholder":404},[377,944,945,947,949,952],{"class":379,"line":424},[377,946,411],{"class":383},[377,948,414],{"class":383},[377,950,951],{"class":417}," defineTask",[377,953,421],{"class":387},[377,955,956],{"class":379,"line":430},[377,957,958],{"class":387},"  meta: {\n",[377,960,961,964,967],{"class":379,"line":442},[377,962,963],{"class":387},"    description: ",[377,965,966],{"class":394},"\"Run database migrations\"",[377,968,439],{"class":387},[377,970,971],{"class":379,"line":452},[377,972,455],{"class":387},[377,974,975,978,981],{"class":379,"line":458},[377,976,977],{"class":383},"  async",[377,979,980],{"class":417}," run",[377,982,983],{"class":387},"() {\n",[377,985,986,989,991,993,995],{"class":379,"line":464},[377,987,988],{"class":383},"    const",[377,990,640],{"class":436},[377,992,643],{"class":383},[377,994,646],{"class":417},[377,996,649],{"class":387},[377,998,999],{"class":379,"line":476},[377,1000,405],{"emptyLinePlaceholder":404},[377,1002,1003,1006,1009,1011,1014],{"class":379,"line":481},[377,1004,1005],{"class":387},"    console.",[377,1007,1008],{"class":417},"log",[377,1010,620],{"class":387},[377,1012,1013],{"class":394},"\"Running database migrations...\"",[377,1015,1016],{"class":387},");\n",[377,1018,1019],{"class":379,"line":700},[377,1020,405],{"emptyLinePlaceholder":404},[377,1022,1023],{"class":379,"line":736},[377,1024,1025],{"class":658},"    // Create users table\n",[377,1027,1028,1031,1033,1035,1037],{"class":379,"line":756},[377,1029,1030],{"class":383},"    await",[377,1032,667],{"class":387},[377,1034,670],{"class":417},[377,1036,673],{"class":394},[377,1038,398],{"class":387},[377,1040,1041,1043,1045,1047,1049],{"class":379,"line":761},[377,1042,1030],{"class":383},[377,1044,667],{"class":387},[377,1046,670],{"class":417},[377,1048,686],{"class":394},[377,1050,398],{"class":387},[377,1052,1053],{"class":379,"line":767},[377,1054,405],{"emptyLinePlaceholder":404},[377,1056,1057,1060],{"class":379,"line":801},[377,1058,1059],{"class":383},"    return",[377,1061,632],{"class":387},[377,1063,1064,1067,1070],{"class":379,"line":806},[377,1065,1066],{"class":387},"      result: ",[377,1068,1069],{"class":394},"\"Database migrations complete!\"",[377,1071,439],{"class":387},[377,1073,1074],{"class":379,"line":814},[377,1075,1076],{"class":387},"    };\n",[377,1078,1079],{"class":379,"line":820},[377,1080,455],{"class":387},[377,1082,1083],{"class":379,"line":826},[377,1084,484],{"class":387},[1086,1087,1088],"p",{},"Nitro 提供了一个内置的数据库层，使用 SQL 模板字面量进行安全的参数化查询。此示例创建了一个 users 表，插入一条记录，并查询该记录。",[1090,1091,1092],"h2",{"id":1092},"查询数据库",[367,1094,1096],{"className":369,"code":1095,"filename":365,"language":372,"meta":5,"style":5},"import { defineHandler } from \"nitro/h3\";\nimport { useDatabase } from \"nitro/database\";\n\nexport default defineHandler(async () => {\n  const db = useDatabase();\n\n  // 创建 users 表\n  await db.sql`DROP TABLE IF EXISTS users`;\n  await db.sql`CREATE TABLE IF NOT EXISTS users (\"id\" TEXT PRIMARY KEY, \"firstName\" TEXT, \"lastName\" TEXT, \"email\" TEXT)`;\n\n  // 添加一个新用户\n  const userId = String(Math.round(Math.random() * 10_000));\n  await db.sql`INSERT INTO users VALUES (${userId}, 'John', 'Doe', '')`;\n\n  // 查询用户\n  const { rows } = await db.sql`SELECT * FROM users WHERE id = ${userId}`;\n\n  return {\n    rows,\n  };\n});\n",[374,1097,1098,1110,1122,1126,1144,1156,1160,1165,1177,1189,1193,1198,1224,1240,1244,1249,1275,1279,1285,1289,1293],{"__ignoreMap":5},[377,1099,1100,1102,1104,1106,1108],{"class":379,"line":380},[377,1101,384],{"class":383},[377,1103,583],{"class":387},[377,1105,391],{"class":383},[377,1107,588],{"class":394},[377,1109,398],{"class":387},[377,1111,1112,1114,1116,1118,1120],{"class":379,"line":401},[377,1113,384],{"class":383},[377,1115,597],{"class":387},[377,1117,391],{"class":383},[377,1119,602],{"class":394},[377,1121,398],{"class":387},[377,1123,1124],{"class":379,"line":408},[377,1125,405],{"emptyLinePlaceholder":404},[377,1127,1128,1130,1132,1134,1136,1138,1140,1142],{"class":379,"line":424},[377,1129,411],{"class":383},[377,1131,414],{"class":383},[377,1133,617],{"class":417},[377,1135,620],{"class":387},[377,1137,623],{"class":383},[377,1139,626],{"class":387},[377,1141,629],{"class":383},[377,1143,632],{"class":387},[377,1145,1146,1148,1150,1152,1154],{"class":379,"line":430},[377,1147,637],{"class":383},[377,1149,640],{"class":436},[377,1151,643],{"class":383},[377,1153,646],{"class":417},[377,1155,649],{"class":387},[377,1157,1158],{"class":379,"line":442},[377,1159,405],{"emptyLinePlaceholder":404},[377,1161,1162],{"class":379,"line":452},[377,1163,1164],{"class":658},"  // 创建 users 表\n",[377,1166,1167,1169,1171,1173,1175],{"class":379,"line":458},[377,1168,664],{"class":383},[377,1170,667],{"class":387},[377,1172,670],{"class":417},[377,1174,673],{"class":394},[377,1176,398],{"class":387},[377,1178,1179,1181,1183,1185,1187],{"class":379,"line":464},[377,1180,664],{"class":383},[377,1182,667],{"class":387},[377,1184,670],{"class":417},[377,1186,686],{"class":394},[377,1188,398],{"class":387},[377,1190,1191],{"class":379,"line":476},[377,1192,405],{"emptyLinePlaceholder":404},[377,1194,1195],{"class":379,"line":481},[377,1196,1197],{"class":658},"  // 添加一个新用户\n",[377,1199,1200,1202,1204,1206,1208,1210,1212,1214,1216,1218,1220,1222],{"class":379,"line":700},[377,1201,637],{"class":383},[377,1203,705],{"class":436},[377,1205,643],{"class":383},[377,1207,710],{"class":417},[377,1209,713],{"class":387},[377,1211,716],{"class":417},[377,1213,713],{"class":387},[377,1215,721],{"class":417},[377,1217,724],{"class":387},[377,1219,727],{"class":383},[377,1221,730],{"class":436},[377,1223,733],{"class":387},[377,1225,1226,1228,1230,1232,1234,1236,1238],{"class":379,"line":736},[377,1227,664],{"class":383},[377,1229,667],{"class":387},[377,1231,670],{"class":417},[377,1233,745],{"class":394},[377,1235,748],{"class":387},[377,1237,751],{"class":394},[377,1239,398],{"class":387},[377,1241,1242],{"class":379,"line":756},[377,1243,405],{"emptyLinePlaceholder":404},[377,1245,1246],{"class":379,"line":761},[377,1247,1248],{"class":658},"  // 查询用户\n",[377,1250,1251,1253,1255,1257,1259,1261,1263,1265,1267,1269,1271,1273],{"class":379,"line":767},[377,1252,637],{"class":383},[377,1254,772],{"class":387},[377,1256,775],{"class":436},[377,1258,778],{"class":387},[377,1260,781],{"class":383},[377,1262,784],{"class":383},[377,1264,667],{"class":387},[377,1266,670],{"class":417},[377,1268,791],{"class":394},[377,1270,748],{"class":387},[377,1272,796],{"class":394},[377,1274,398],{"class":387},[377,1276,1277],{"class":379,"line":801},[377,1278,405],{"emptyLinePlaceholder":404},[377,1280,1281,1283],{"class":379,"line":806},[377,1282,809],{"class":383},[377,1284,632],{"class":387},[377,1286,1287],{"class":379,"line":814},[377,1288,817],{"class":387},[377,1290,1291],{"class":379,"line":820},[377,1292,823],{"class":387},[377,1294,1295],{"class":379,"line":826},[377,1296,484],{"class":387},[1086,1298,1299,1300,1303,1304,1307,1308,1311],{},"使用 ",[374,1301,1302],{},"useDatabase()"," 获取数据库实例。通过 ",[374,1305,1306],{},"db.sql"," 进行数据库查询，像 ",[374,1309,1310],{},"${userId}"," 这样的变量会自动转义，以防止 SQL 注入。",[1090,1313,1314],{"id":1314},"使用任务运行迁移",[1086,1316,1317,1318,1321],{},"Nitro 任务允许你在请求处理程序之外运行操作。对于数据库迁移，在 ",[374,1319,1320],{},"tasks/"," 目录下创建任务文件，然后通过 CLI 运行。这样可以将模式变更与应用代码分离。",[367,1323,1325],{"className":369,"code":1324,"filename":910,"language":372,"meta":5,"style":5},"import { defineTask } from \"nitro/task\";\nimport { useDatabase } from \"nitro/database\";\n\nexport default defineTask({\n  meta: {\n    description: \"运行数据库迁移\",\n  },\n  async run() {\n    const db = useDatabase();\n\n    console.log(\"正在运行数据库迁移...\");\n\n    // 创建 users 表\n    await db.sql`DROP TABLE IF EXISTS users`;\n    await db.sql`CREATE TABLE IF NOT EXISTS users (\"id\" TEXT PRIMARY KEY, \"firstName\" TEXT, \"lastName\" TEXT, \"email\" TEXT)`;\n\n    return {\n      result: \"数据库迁移完成！\",\n    };\n  },\n});\n",[374,1326,1327,1339,1351,1355,1365,1369,1378,1382,1390,1402,1406,1419,1423,1428,1440,1452,1456,1462,1471,1475,1479],{"__ignoreMap":5},[377,1328,1329,1331,1333,1335,1337],{"class":379,"line":380},[377,1330,384],{"class":383},[377,1332,919],{"class":387},[377,1334,391],{"class":383},[377,1336,924],{"class":394},[377,1338,398],{"class":387},[377,1340,1341,1343,1345,1347,1349],{"class":379,"line":401},[377,1342,384],{"class":383},[377,1344,597],{"class":387},[377,1346,391],{"class":383},[377,1348,602],{"class":394},[377,1350,398],{"class":387},[377,1352,1353],{"class":379,"line":408},[377,1354,405],{"emptyLinePlaceholder":404},[377,1356,1357,1359,1361,1363],{"class":379,"line":424},[377,1358,411],{"class":383},[377,1360,414],{"class":383},[377,1362,951],{"class":417},[377,1364,421],{"class":387},[377,1366,1367],{"class":379,"line":430},[377,1368,958],{"class":387},[377,1370,1371,1373,1376],{"class":379,"line":442},[377,1372,963],{"class":387},[377,1374,1375],{"class":394},"\"运行数据库迁移\"",[377,1377,439],{"class":387},[377,1379,1380],{"class":379,"line":452},[377,1381,455],{"class":387},[377,1383,1384,1386,1388],{"class":379,"line":458},[377,1385,977],{"class":383},[377,1387,980],{"class":417},[377,1389,983],{"class":387},[377,1391,1392,1394,1396,1398,1400],{"class":379,"line":464},[377,1393,988],{"class":383},[377,1395,640],{"class":436},[377,1397,643],{"class":383},[377,1399,646],{"class":417},[377,1401,649],{"class":387},[377,1403,1404],{"class":379,"line":476},[377,1405,405],{"emptyLinePlaceholder":404},[377,1407,1408,1410,1412,1414,1417],{"class":379,"line":481},[377,1409,1005],{"class":387},[377,1411,1008],{"class":417},[377,1413,620],{"class":387},[377,1415,1416],{"class":394},"\"正在运行数据库迁移...\"",[377,1418,1016],{"class":387},[377,1420,1421],{"class":379,"line":700},[377,1422,405],{"emptyLinePlaceholder":404},[377,1424,1425],{"class":379,"line":736},[377,1426,1427],{"class":658},"    // 创建 users 表\n",[377,1429,1430,1432,1434,1436,1438],{"class":379,"line":756},[377,1431,1030],{"class":383},[377,1433,667],{"class":387},[377,1435,670],{"class":417},[377,1437,673],{"class":394},[377,1439,398],{"class":387},[377,1441,1442,1444,1446,1448,1450],{"class":379,"line":761},[377,1443,1030],{"class":383},[377,1445,667],{"class":387},[377,1447,670],{"class":417},[377,1449,686],{"class":394},[377,1451,398],{"class":387},[377,1453,1454],{"class":379,"line":767},[377,1455,405],{"emptyLinePlaceholder":404},[377,1457,1458,1460],{"class":379,"line":801},[377,1459,1059],{"class":383},[377,1461,632],{"class":387},[377,1463,1464,1466,1469],{"class":379,"line":806},[377,1465,1066],{"class":387},[377,1467,1468],{"class":394},"\"数据库迁移完成！\"",[377,1470,439],{"class":387},[377,1472,1473],{"class":379,"line":814},[377,1474,1076],{"class":387},[377,1476,1477],{"class":379,"line":820},[377,1478,455],{"class":387},[377,1480,1481],{"class":379,"line":826},[377,1482,484],{"class":387},[1090,1484,1485],{"id":1485},"了解更多",[1487,1488,1489,1495],"ul",{},[1490,1491,1492],"li",{},[1493,1494,38],"a",{"href":39},[1490,1496,1497],{},[1493,1498,53],{"href":54},[1500,1501,1502],"style",{},"html pre.shiki code .so5gQ, html code.shiki .so5gQ{--shiki-light:#D73A49;--shiki-default:#F97583;--shiki-dark:#F97583}html pre.shiki code .slsVL, html code.shiki .slsVL{--shiki-light:#24292E;--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8}html pre.shiki code .sfrk1, html code.shiki .sfrk1{--shiki-light:#032F62;--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF}html pre.shiki code .shcOC, html code.shiki .shcOC{--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#B392F0}html pre.shiki code .suiK_, html code.shiki .suiK_{--shiki-light:#005CC5;--shiki-default:#79B8FF;--shiki-dark:#79B8FF}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sCsY4, html code.shiki .sCsY4{--shiki-light:#6A737D;--shiki-default:#6A737D;--shiki-dark:#6A737D}",{"title":5,"searchDepth":401,"depth":401,"links":1504},[1505,1506,1507],{"id":1092,"depth":401,"text":1092},{"id":1314,"depth":401,"text":1314},{"id":1485,"depth":401,"text":1485},"md","i-lucide-database",{"automd":404},{},{"title":38,"description":243},"examples/database/README","1QDaPcyX1N5fIxt4iF2y-hWM6Ddi3IzrRegdW9gCnyQ",[1516,1519],{"title":239,"path":1517,"stem":1518,"description":240,"children":-1},"/examples/custom-error-handler","examples/custom-error-handler/README",{"title":260,"path":1520,"stem":1521,"description":261,"children":-1},"/examples/hello-world","examples/hello-world/README",1771507942264]