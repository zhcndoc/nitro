[{"data":1,"prerenderedAt":684},["ShallowReactive",2],{"navigation":3,"-deploy-providers-heroku":223,"-deploy-providers-heroku-surround":679},[4,83,208,213,220],{"title":5,"path":6,"stem":7,"children":8,"icon":82},"","/docs","1.docs/1.index",[9,12,17,22,27,32,37,42,47,52,57,62,67,72,77],{"title":10,"path":6,"stem":7,"icon":11},"介绍","i-lucide-compass",{"title":13,"path":14,"stem":15,"icon":16},"快速开始","/docs/quick-start","1.docs/2.quick-start","i-lucide-zap",{"title":18,"path":19,"stem":20,"icon":21},"渲染器","/docs/renderer","1.docs/4.renderer","ri:layout-masonry-line",{"title":23,"path":24,"stem":25,"icon":26},"服务器路由","/docs/routing","1.docs/5.routing","ri:direction-line",{"title":28,"path":29,"stem":30,"icon":31},"资源","/docs/assets","1.docs/50.assets","ri:image-2-line",{"title":33,"path":34,"stem":35,"icon":36},"配置","/docs/configuration","1.docs/50.configuration","ri:settings-3-line",{"title":38,"path":39,"stem":40,"icon":41},"数据库","/docs/database","1.docs/50.database","ri:database-2-line",{"title":43,"path":44,"stem":45,"icon":46},"生命周期","/docs/lifecycle","1.docs/50.lifecycle","i-lucide-layers",{"title":48,"path":49,"stem":50,"icon":51},"插件","/docs/plugins","1.docs/50.plugins","ri:plug-line",{"title":53,"path":54,"stem":55,"icon":56},"任务","/docs/tasks","1.docs/50.tasks","codicon:run-all",{"title":58,"path":59,"stem":60,"icon":61},"服务器入口","/docs/server-entry","1.docs/6.server-entry","ri:server-line",{"title":63,"path":64,"stem":65,"icon":66},"缓存","/docs/cache","1.docs/7.cache","ri:speed-line",{"title":68,"path":69,"stem":70,"icon":71},"KV 存储","/docs/storage","1.docs/8.storage","carbon:datastore",{"title":73,"path":74,"stem":75,"icon":76},"迁移指南","/docs/migration","1.docs/99.migration","ri:arrow-right-up-line",{"title":78,"path":79,"stem":80,"icon":81},"夜间通道","/docs/nightly","1.docs/99.nightly","ri:moon-fill","i-lucide-book-open",{"title":84,"path":85,"stem":86,"children":87,"icon":89},"概述","/deploy","2.deploy/0.index",[88,90,111],{"title":84,"path":85,"stem":86,"icon":89},"ri:upload-cloud-2-line",{"title":91,"path":92,"stem":93,"children":94,"page":110},"Runtimes","/deploy/runtimes","2.deploy/10.runtimes",[95,100,105],{"title":96,"path":97,"stem":98,"icon":99},"Node.js","/deploy/runtimes/node","2.deploy/10.runtimes/1.node","akar-icons:node-fill",{"title":101,"path":102,"stem":103,"icon":104},"Bun","/deploy/runtimes/bun","2.deploy/10.runtimes/bun","simple-icons:bun",{"title":106,"path":107,"stem":108,"icon":109},"Deno","/deploy/runtimes/deno","2.deploy/10.runtimes/deno","simple-icons:deno",false,{"title":112,"path":113,"stem":114,"children":115,"page":110},"Providers","/deploy/providers","2.deploy/20.providers",[116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204],{"title":117,"path":118,"stem":119},"Alwaysdata","/deploy/providers/alwaysdata","2.deploy/20.providers/alwaysdata",{"title":121,"path":122,"stem":123},"AWS Lambda","/deploy/providers/aws","2.deploy/20.providers/aws",{"title":125,"path":126,"stem":127},"AWS Amplify","/deploy/providers/aws-amplify","2.deploy/20.providers/aws-amplify",{"title":129,"path":130,"stem":131},"Azure","/deploy/providers/azure","2.deploy/20.providers/azure",{"title":133,"path":134,"stem":135},"Cleavr","/deploy/providers/cleavr","2.deploy/20.providers/cleavr",{"title":137,"path":138,"stem":139},"Cloudflare","/deploy/providers/cloudflare","2.deploy/20.providers/cloudflare",{"title":141,"path":142,"stem":143},"Deno Deploy","/deploy/providers/deno-deploy","2.deploy/20.providers/deno-deploy",{"title":145,"path":146,"stem":147},"DigitalOcean","/deploy/providers/digitalocean","2.deploy/20.providers/digitalocean",{"title":149,"path":150,"stem":151},"Firebase","/deploy/providers/firebase","2.deploy/20.providers/firebase",{"title":153,"path":154,"stem":155},"Flightcontrol","/deploy/providers/flightcontrol","2.deploy/20.providers/flightcontrol",{"title":157,"path":158,"stem":159},"Genezio","/deploy/providers/genezio","2.deploy/20.providers/genezio",{"title":161,"path":162,"stem":163},"GitHub Pages","/deploy/providers/github-pages","2.deploy/20.providers/github-pages",{"title":165,"path":166,"stem":167},"GitLab Pages","/deploy/providers/gitlab-pages","2.deploy/20.providers/gitlab-pages",{"title":169,"path":170,"stem":171},"Heroku","/deploy/providers/heroku","2.deploy/20.providers/heroku",{"title":173,"path":174,"stem":175},"IIS","/deploy/providers/iis","2.deploy/20.providers/iis",{"title":177,"path":178,"stem":179},"Koyeb","/deploy/providers/koyeb","2.deploy/20.providers/koyeb",{"title":181,"path":182,"stem":183},"Netlify","/deploy/providers/netlify","2.deploy/20.providers/netlify",{"title":185,"path":186,"stem":187},"Platform.sh","/deploy/providers/platform-sh","2.deploy/20.providers/platform-sh",{"title":189,"path":190,"stem":191},"Render.com","/deploy/providers/render","2.deploy/20.providers/render",{"title":193,"path":194,"stem":195},"StormKit","/deploy/providers/stormkit","2.deploy/20.providers/stormkit",{"title":197,"path":198,"stem":199},"Vercel","/deploy/providers/vercel","2.deploy/20.providers/vercel",{"title":201,"path":202,"stem":203},"Zeabur","/deploy/providers/zeabur","2.deploy/20.providers/zeabur",{"title":205,"path":206,"stem":207},"Zerops","/deploy/providers/zerops","2.deploy/20.providers/zerops",{"title":33,"path":209,"stem":210,"children":211,"icon":36},"/config","3.config/0.index",[212],{"title":33,"path":209,"stem":210,"icon":36},{"title":214,"path":215,"stem":216,"children":217,"icon":219},"示例","/examples","4.examples/0.index",[218],{"title":214,"path":215,"stem":216,"icon":219},"i-lucide-folder-code",{"title":5,"path":221,"stem":222},"/","index",{"id":224,"title":169,"body":225,"description":673,"extension":674,"meta":675,"navigation":676,"path":170,"seo":677,"stem":171,"__hash__":678},"content/2.deploy/20.providers/heroku.md",{"type":226,"value":227,"toc":669},"minimark",[228,240,245,250,384,388,665],[229,230,231,235,236],"p",{},[232,233,234],"strong",{},"预设:"," ",[237,238,239],"code",{},"heroku",[241,242],"read-more",{"title":243,"to":244},"heroku.com","https://heroku.com/",[246,247,249],"h2",{"id":248},"使用-heroku-cli","使用 heroku CLI",[251,252,254,281,299,317],"steps",{"level":253},"4",[255,256,257,258],"h4",{},"创建一个新的 Heroku 应用。",[259,260,264],"pre",{"className":261,"code":262,"language":263,"meta":5,"style":5},"language-bash shiki shiki-themes github-light github-dark github-dark","heroku create myapp\n","bash",[237,265,266],{"__ignoreMap":5},[267,268,271,274,278],"span",{"class":269,"line":270},"line",1,[267,272,239],{"class":273},"shcOC",[267,275,277],{"class":276},"sfrk1"," create",[267,279,280],{"class":276}," myapp\n",[255,282,283,284],{},"配置 Heroku 使用 nodejs 构建包。",[259,285,287],{"className":261,"code":286,"language":263,"meta":5,"style":5},"heroku buildpacks:set heroku/nodejs\n",[237,288,289],{"__ignoreMap":5},[267,290,291,293,296],{"class":269,"line":270},[267,292,239],{"class":273},[267,294,295],{"class":276}," buildpacks:set",[267,297,298],{"class":276}," heroku/nodejs\n",[255,300,301,302],{},"配置你的应用。",[259,303,305],{"className":261,"code":304,"language":263,"meta":5,"style":5},"heroku config:set NITRO_PRESET=heroku\n",[237,306,307],{"__ignoreMap":5},[267,308,309,311,314],{"class":269,"line":270},[267,310,239],{"class":273},[267,312,313],{"class":276}," config:set",[267,315,316],{"class":276}," NITRO_PRESET=heroku\n",[255,318,319,320,323,324,327,328,331,332],{},"确保在你的 ",[237,321,322],{},"package.json"," 文件中有 ",[237,325,326],{},"start"," 和 ",[237,329,330],{},"build"," 命令。",[259,333,337],{"className":334,"code":335,"language":336,"meta":5,"style":5},"language-json5 shiki shiki-themes github-light github-dark github-dark","\"scripts\": {\n  \"build\": \"nitro build\", // 如果使用 nuxt 则为 `nuxt build`\n  \"start\": \"node .output/server/index.mjs\"\n}\n","json5",[237,338,339,348,367,378],{"__ignoreMap":5},[267,340,341,344],{"class":269,"line":270},[267,342,343],{"class":276},"\"scripts\"",[267,345,347],{"class":346},"slsVL",": {\n",[267,349,351,354,357,360,363],{"class":269,"line":350},2,[267,352,353],{"class":276},"  \"build\"",[267,355,356],{"class":346},": ",[267,358,359],{"class":276},"\"nitro build\"",[267,361,362],{"class":346},", ",[267,364,366],{"class":365},"sCsY4","// 如果使用 nuxt 则为 `nuxt build`\n",[267,368,370,373,375],{"class":269,"line":369},3,[267,371,372],{"class":276},"  \"start\"",[267,374,356],{"class":346},[267,376,377],{"class":276},"\"node .output/server/index.mjs\"\n",[267,379,381],{"class":269,"line":380},4,[267,382,383],{"class":346},"}\n",[246,385,387],{"id":386},"使用-nginx","使用 nginx",[251,389,390,401,438,452,539,648,662],{"level":253},[255,391,392,393,400],{},"在",[394,395,399],"a",{"href":396,"rel":397},"https://github.com/heroku/heroku-buildpack-nginx.git",[398],"nofollow","这里","添加 heroku Nginx 构建包。",[255,402,403,404,407,408],{},"在你的 ",[237,405,406],{},"nitro.config"," 中更改为 'node' 预设。",[259,409,411],{"className":334,"code":410,"language":336,"meta":5,"style":5},"\"nitro\": {\n   \"preset\":\"node\",\n}\n",[237,412,413,420,434],{"__ignoreMap":5},[267,414,415,418],{"class":269,"line":270},[267,416,417],{"class":276},"\"nitro\"",[267,419,347],{"class":346},[267,421,422,425,428,431],{"class":269,"line":350},[267,423,424],{"class":276},"   \"preset\"",[267,426,427],{"class":346},":",[267,429,430],{"class":276},"\"node\"",[267,432,433],{"class":346},",\n",[267,435,436],{"class":269,"line":369},[267,437,383],{"class":346},[255,439,440,441,444,445,448,449,451],{},"从构建包文档的 ",[232,442,443],{},"现有应用"," 部分，需要两个关键步骤以使其运行。",[446,447],"br",{},"步骤 1: 在 'tmp/nginx.socket' 上监听一个套接字",[446,450],{},"\n步骤 2: 当你的应用准备好接受连接时创建文件 '/tmp/app-initialized'",[255,453,454,455],{},"创建自定义应用运行器，例如：在项目根目录创建 apprunner.mjs（或任何其他首选位置），在此文件中，创建一个服务器，使用 node 预设生成的监听器，然后按照构建包文档的详细说明在套接字上监听。",[259,456,460],{"className":457,"code":458,"language":459,"meta":5,"style":5},"language-ts shiki shiki-themes github-light github-dark github-dark","import { createServer } from 'node:http'\nimport { listener } from './.output/server/index.mjs'\n\nconst server = createServer(listener)\n\nserver.listen('/tmp/nginx.socket') // 遵循构建包文档\n","ts",[237,461,462,477,489,495,513,518],{"__ignoreMap":5},[267,463,464,468,471,474],{"class":269,"line":270},[267,465,467],{"class":466},"so5gQ","import",[267,469,470],{"class":346}," { createServer } ",[267,472,473],{"class":466},"from",[267,475,476],{"class":276}," 'node:http'\n",[267,478,479,481,484,486],{"class":269,"line":350},[267,480,467],{"class":466},[267,482,483],{"class":346}," { listener } ",[267,485,473],{"class":466},[267,487,488],{"class":276}," './.output/server/index.mjs'\n",[267,490,491],{"class":269,"line":369},[267,492,494],{"emptyLinePlaceholder":493},true,"\n",[267,496,497,500,504,507,510],{"class":269,"line":380},[267,498,499],{"class":466},"const",[267,501,503],{"class":502},"suiK_"," server",[267,505,506],{"class":466}," =",[267,508,509],{"class":273}," createServer",[267,511,512],{"class":346},"(listener)\n",[267,514,516],{"class":269,"line":515},5,[267,517,494],{"emptyLinePlaceholder":493},[267,519,521,524,527,530,533,536],{"class":269,"line":520},6,[267,522,523],{"class":346},"server.",[267,525,526],{"class":273},"listen",[267,528,529],{"class":346},"(",[267,531,532],{"class":276},"'/tmp/nginx.socket'",[267,534,535],{"class":346},") ",[267,537,538],{"class":365},"// 遵循构建包文档\n",[255,540,541,542],{},"若要创建 'tmp/app-initialized' 文件，使用一个 nitro 插件，在项目根目录创建文件 'initServer.ts'（或任何其他首选位置）。",[259,543,545],{"className":457,"code":544,"language":459,"meta":5,"style":5},"import fs from \"fs\"\n\nexport default definePlugin((nitroApp) => {\n   if((process.env.NODE_ENV || 'development') != 'development') {\n      fs.openSync('/tmp/app-initialized', 'w')\n   }\n})\n",[237,546,547,559,563,589,616,637,642],{"__ignoreMap":5},[267,548,549,551,554,556],{"class":269,"line":270},[267,550,467],{"class":466},[267,552,553],{"class":346}," fs ",[267,555,473],{"class":466},[267,557,558],{"class":276}," \"fs\"\n",[267,560,561],{"class":269,"line":350},[267,562,494],{"emptyLinePlaceholder":493},[267,564,565,568,571,574,577,581,583,586],{"class":269,"line":369},[267,566,567],{"class":466},"export",[267,569,570],{"class":466}," default",[267,572,573],{"class":273}," definePlugin",[267,575,576],{"class":346},"((",[267,578,580],{"class":579},"sQHwn","nitroApp",[267,582,535],{"class":346},[267,584,585],{"class":466},"=>",[267,587,588],{"class":346}," {\n",[267,590,591,594,597,600,603,606,608,611,613],{"class":269,"line":380},[267,592,593],{"class":466},"   if",[267,595,596],{"class":346},"((process.env.",[267,598,599],{"class":502},"NODE_ENV",[267,601,602],{"class":466}," ||",[267,604,605],{"class":276}," 'development'",[267,607,535],{"class":346},[267,609,610],{"class":466},"!=",[267,612,605],{"class":276},[267,614,615],{"class":346},") {\n",[267,617,618,621,624,626,629,631,634],{"class":269,"line":515},[267,619,620],{"class":346},"      fs.",[267,622,623],{"class":273},"openSync",[267,625,529],{"class":346},[267,627,628],{"class":276},"'/tmp/app-initialized'",[267,630,362],{"class":346},[267,632,633],{"class":276},"'w'",[267,635,636],{"class":346},")\n",[267,638,639],{"class":269,"line":520},[267,640,641],{"class":346},"   }\n",[267,643,645],{"class":269,"line":644},7,[267,646,647],{"class":346},"})\n",[255,649,650,651],{},"最后，在项目根目录创建文件 'Procfile'，通过 Procfile，告诉 heroku 启动 nginx 并使用自定义的 apprunner.mjs 启动服务器。",[259,652,656],{"className":653,"code":654,"language":655,"meta":5,"style":5},"language-procfile shiki shiki-themes github-light github-dark github-dark","web: bin/start-nginx node apprunner.mjs\n","procfile",[237,657,658],{"__ignoreMap":5},[267,659,660],{"class":269,"line":270},[267,661,654],{},[255,663,664],{},"附加：创建文件 'config/nginx.conf.erb' 来自定义你的 nginx 配置。使用 node 预设时，默认情况下，静态文件处理程序不会生成，你可以使用 nginx 来服务静态文件，只需在服务器块中添加正确的位置规则，或者，通过将 serveStatic 设置为 true 强制 node 预设生成静态文件的处理程序。",[666,667,668],"style",{},"html pre.shiki code .shcOC, html code.shiki .shcOC{--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#B392F0}html pre.shiki code .sfrk1, html code.shiki .sfrk1{--shiki-light:#032F62;--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .so5gQ, html code.shiki .so5gQ{--shiki-light:#D73A49;--shiki-default:#F97583;--shiki-dark:#F97583}html pre.shiki code .slsVL, html code.shiki .slsVL{--shiki-light:#24292E;--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8}html pre.shiki code .suiK_, html code.shiki .suiK_{--shiki-light:#005CC5;--shiki-default:#79B8FF;--shiki-dark:#79B8FF}html pre.shiki code .sCsY4, html code.shiki .sCsY4{--shiki-light:#6A737D;--shiki-default:#6A737D;--shiki-dark:#6A737D}html pre.shiki code .sQHwn, html code.shiki .sQHwn{--shiki-light:#E36209;--shiki-default:#FFAB70;--shiki-dark:#FFAB70}",{"title":5,"searchDepth":350,"depth":350,"links":670},[671,672],{"id":248,"depth":350,"text":249},{"id":386,"depth":350,"text":387},"将 Nitro 应用部署到 Heroku。","md",{},{},{"title":169,"description":673},"9r6nrFmmJq0LFq20Dw45dZ11EUxix5tuxbSv8CcLOcQ",[680,682],{"title":165,"path":166,"stem":167,"description":681,"children":-1},"将 Nitro 应用程序部署到 GitLab Pages。",{"title":173,"path":174,"stem":175,"description":683,"children":-1},"将 Nitro 应用部署到 IIS。",1771507941464]