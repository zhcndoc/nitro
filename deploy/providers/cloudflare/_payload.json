[{"data":1,"prerenderedAt":1764},["ShallowReactive",2],{"navigation":3,"-deploy-providers-cloudflare":216,"-deploy-providers-cloudflare-surround":1759},[4,83,208,213],{"title":5,"path":6,"stem":7,"children":8,"icon":82},"","/docs","1.docs/1.index",[9,12,17,22,27,32,37,42,47,52,57,62,67,72,77],{"title":10,"path":6,"stem":7,"icon":11},"介绍","i-lucide-compass",{"title":13,"path":14,"stem":15,"icon":16},"快速开始","/docs/quick-start","1.docs/2.quick-start","i-lucide-zap",{"title":18,"path":19,"stem":20,"icon":21},"渲染器","/docs/renderer","1.docs/4.renderer","ri:layout-masonry-line",{"title":23,"path":24,"stem":25,"icon":26},"服务器路由","/docs/routing","1.docs/5.routing","ri:direction-line",{"title":28,"path":29,"stem":30,"icon":31},"资源","/docs/assets","1.docs/50.assets","ri:image-2-line",{"title":33,"path":34,"stem":35,"icon":36},"配置","/docs/configuration","1.docs/50.configuration","ri:settings-3-line",{"title":38,"path":39,"stem":40,"icon":41},"数据库","/docs/database","1.docs/50.database","ri:database-2-line",{"title":43,"path":44,"stem":45,"icon":46},"生命周期","/docs/lifecycle","1.docs/50.lifecycle","i-lucide-layers",{"title":48,"path":49,"stem":50,"icon":51},"插件","/docs/plugins","1.docs/50.plugins","ri:plug-line",{"title":53,"path":54,"stem":55,"icon":56},"任务","/docs/tasks","1.docs/50.tasks","codicon:run-all",{"title":58,"path":59,"stem":60,"icon":61},"服务器入口","/docs/server-entry","1.docs/6.server-entry","ri:server-line",{"title":63,"path":64,"stem":65,"icon":66},"缓存","/docs/cache","1.docs/7.cache","ri:speed-line",{"title":68,"path":69,"stem":70,"icon":71},"KV 存储","/docs/storage","1.docs/8.storage","carbon:datastore",{"title":73,"path":74,"stem":75,"icon":76},"迁移指南","/docs/migration","1.docs/99.migration","ri:arrow-right-up-line",{"title":78,"path":79,"stem":80,"icon":81},"夜间通道","/docs/nightly","1.docs/99.nightly","ri:moon-fill","i-lucide-book-open",{"title":84,"path":85,"stem":86,"children":87,"icon":89},"概述","/deploy","2.deploy/0.index",[88,90,111],{"title":84,"path":85,"stem":86,"icon":89},"ri:upload-cloud-2-line",{"title":91,"path":92,"stem":93,"children":94,"page":110},"Runtimes","/deploy/runtimes","2.deploy/10.runtimes",[95,100,105],{"title":96,"path":97,"stem":98,"icon":99},"Node.js","/deploy/runtimes/node","2.deploy/10.runtimes/1.node","akar-icons:node-fill",{"title":101,"path":102,"stem":103,"icon":104},"Bun","/deploy/runtimes/bun","2.deploy/10.runtimes/bun","simple-icons:bun",{"title":106,"path":107,"stem":108,"icon":109},"Deno","/deploy/runtimes/deno","2.deploy/10.runtimes/deno","simple-icons:deno",false,{"title":112,"path":113,"stem":114,"children":115,"page":110},"Providers","/deploy/providers","2.deploy/20.providers",[116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204],{"title":117,"path":118,"stem":119},"Alwaysdata","/deploy/providers/alwaysdata","2.deploy/20.providers/alwaysdata",{"title":121,"path":122,"stem":123},"AWS Lambda","/deploy/providers/aws","2.deploy/20.providers/aws",{"title":125,"path":126,"stem":127},"AWS Amplify","/deploy/providers/aws-amplify","2.deploy/20.providers/aws-amplify",{"title":129,"path":130,"stem":131},"Azure","/deploy/providers/azure","2.deploy/20.providers/azure",{"title":133,"path":134,"stem":135},"Cleavr","/deploy/providers/cleavr","2.deploy/20.providers/cleavr",{"title":137,"path":138,"stem":139},"Cloudflare","/deploy/providers/cloudflare","2.deploy/20.providers/cloudflare",{"title":141,"path":142,"stem":143},"Deno Deploy","/deploy/providers/deno-deploy","2.deploy/20.providers/deno-deploy",{"title":145,"path":146,"stem":147},"DigitalOcean","/deploy/providers/digitalocean","2.deploy/20.providers/digitalocean",{"title":149,"path":150,"stem":151},"Firebase","/deploy/providers/firebase","2.deploy/20.providers/firebase",{"title":153,"path":154,"stem":155},"Flightcontrol","/deploy/providers/flightcontrol","2.deploy/20.providers/flightcontrol",{"title":157,"path":158,"stem":159},"Genezio","/deploy/providers/genezio","2.deploy/20.providers/genezio",{"title":161,"path":162,"stem":163},"GitHub Pages","/deploy/providers/github-pages","2.deploy/20.providers/github-pages",{"title":165,"path":166,"stem":167},"GitLab Pages","/deploy/providers/gitlab-pages","2.deploy/20.providers/gitlab-pages",{"title":169,"path":170,"stem":171},"Heroku","/deploy/providers/heroku","2.deploy/20.providers/heroku",{"title":173,"path":174,"stem":175},"IIS","/deploy/providers/iis","2.deploy/20.providers/iis",{"title":177,"path":178,"stem":179},"Koyeb","/deploy/providers/koyeb","2.deploy/20.providers/koyeb",{"title":181,"path":182,"stem":183},"Netlify","/deploy/providers/netlify","2.deploy/20.providers/netlify",{"title":185,"path":186,"stem":187},"Platform.sh","/deploy/providers/platform-sh","2.deploy/20.providers/platform-sh",{"title":189,"path":190,"stem":191},"Render.com","/deploy/providers/render","2.deploy/20.providers/render",{"title":193,"path":194,"stem":195},"StormKit","/deploy/providers/stormkit","2.deploy/20.providers/stormkit",{"title":197,"path":198,"stem":199},"Vercel","/deploy/providers/vercel","2.deploy/20.providers/vercel",{"title":201,"path":202,"stem":203},"Zeabur","/deploy/providers/zeabur","2.deploy/20.providers/zeabur",{"title":205,"path":206,"stem":207},"Zerops","/deploy/providers/zerops","2.deploy/20.providers/zerops",{"title":33,"path":209,"stem":210,"children":211,"icon":36},"/config","3.config/0.index",[212],{"title":33,"path":209,"stem":210,"icon":36},{"title":5,"path":214,"stem":215},"/","index",{"id":217,"title":137,"body":218,"description":1753,"extension":1754,"meta":1755,"navigation":1756,"path":138,"seo":1757,"stem":139,"__hash__":1758},"content/2.deploy/20.providers/cloudflare.md",{"type":219,"value":220,"toc":1731},"minimark",[221,226,238,242,261,271,278,470,473,499,519,523,532,536,540,543,546,549,552,555,558,561,573,575,618,622,629,632,639,650,655,782,784,801,804,809,811,814,817,820,822,824,827,831,840,856,859,870,879,893,1015,1018,1028,1054,1070,1073,1096,1107,1117,1120,1131,1141,1149,1154,1158,1221,1225,1239,1253,1266,1269,1271,1278,1400,1403,1411,1426,1432,1484,1487,1617,1622,1632,1636,1639,1710,1712,1715,1718,1727],[222,223,225],"h2",{"id":224},"cloudflare-workers","Cloudflare Workers",[227,228,229,233,234],"p",{},[230,231,232],"strong",{},"预设:"," ",[235,236,237],"code",{},"cloudflare_module",[239,240],"read-more",{"to":241,"title":225},"https://developers.cloudflare.com/workers/",[243,244,245],"note",{},[227,246,247,248,253,254,260],{},"与此提供者的集成可以通过 ",[249,250,252],"a",{"href":251},"/deploy#zero-config-providers","零配置"," 实现，支持 ",[249,255,259],{"href":256,"rel":257},"https://developers.cloudflare.com/workers/ci-cd/builds/",[258],"nofollow","workers builds (beta)","。",[262,263,264],"important",{},[227,265,266,267,270],{},"要将 Workers 与静态资产一起使用，您需要设置 Nitro 兼容日期为 ",[235,268,269],{},"2024-09-19"," 或更高。",[227,272,273,274,277],{},"以下是将 Nitro 应用部署到 Cloudflare Workers 的示例 ",[235,275,276],{},"nitro.config.ts"," 文件。",[279,280,281,397],"CodeGroup",{},[282,283,287],"pre",{"className":284,"code":285,"filename":276,"language":286,"meta":5,"style":5},"language-ts shiki shiki-themes github-light github-dark github-dark","import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n    compatibilityDate: \"2024-09-19\",\n    preset: \"cloudflare_module\",\n    cloudflare: {\n      deployConfig: true,\n      nodeCompat: true\n    }\n})\n","ts",[235,288,289,312,319,335,347,358,364,376,385,391],{"__ignoreMap":5},[290,291,294,298,302,305,309],"span",{"class":292,"line":293},"line",1,[290,295,297],{"class":296},"so5gQ","import",[290,299,301],{"class":300},"slsVL"," { defineNitroConfig } ",[290,303,304],{"class":296},"from",[290,306,308],{"class":307},"sfrk1"," \"nitro/config\"",[290,310,311],{"class":300},";\n",[290,313,315],{"class":292,"line":314},2,[290,316,318],{"emptyLinePlaceholder":317},true,"\n",[290,320,322,325,328,332],{"class":292,"line":321},3,[290,323,324],{"class":296},"export",[290,326,327],{"class":296}," default",[290,329,331],{"class":330},"shcOC"," defineNitroConfig",[290,333,334],{"class":300},"({\n",[290,336,338,341,344],{"class":292,"line":337},4,[290,339,340],{"class":300},"    compatibilityDate: ",[290,342,343],{"class":307},"\"2024-09-19\"",[290,345,346],{"class":300},",\n",[290,348,350,353,356],{"class":292,"line":349},5,[290,351,352],{"class":300},"    preset: ",[290,354,355],{"class":307},"\"cloudflare_module\"",[290,357,346],{"class":300},[290,359,361],{"class":292,"line":360},6,[290,362,363],{"class":300},"    cloudflare: {\n",[290,365,367,370,374],{"class":292,"line":366},7,[290,368,369],{"class":300},"      deployConfig: ",[290,371,373],{"class":372},"suiK_","true",[290,375,346],{"class":300},[290,377,379,382],{"class":292,"line":378},8,[290,380,381],{"class":300},"      nodeCompat: ",[290,383,384],{"class":372},"true\n",[290,386,388],{"class":292,"line":387},9,[290,389,390],{"class":300},"    }\n",[290,392,394],{"class":292,"line":393},10,[290,395,396],{"class":300},"})\n",[282,398,401],{"className":284,"code":399,"filename":400,"language":286,"meta":5,"style":5},"export default defineNuxtConfig({\n    compatibilityDate: \"2024-09-19\",\n    nitro: {\n      preset: \"cloudflare_module\",\n      cloudflare: {\n        deployConfig: true,\n        nodeCompat: true\n      }\n    }\n})\n","nuxt.config.ts",[235,402,403,414,422,427,436,441,450,457,462,466],{"__ignoreMap":5},[290,404,405,407,409,412],{"class":292,"line":293},[290,406,324],{"class":296},[290,408,327],{"class":296},[290,410,411],{"class":330}," defineNuxtConfig",[290,413,334],{"class":300},[290,415,416,418,420],{"class":292,"line":314},[290,417,340],{"class":300},[290,419,343],{"class":307},[290,421,346],{"class":300},[290,423,424],{"class":292,"line":321},[290,425,426],{"class":300},"    nitro: {\n",[290,428,429,432,434],{"class":292,"line":337},[290,430,431],{"class":300},"      preset: ",[290,433,355],{"class":307},[290,435,346],{"class":300},[290,437,438],{"class":292,"line":349},[290,439,440],{"class":300},"      cloudflare: {\n",[290,442,443,446,448],{"class":292,"line":360},[290,444,445],{"class":300},"        deployConfig: ",[290,447,373],{"class":372},[290,449,346],{"class":300},[290,451,452,455],{"class":292,"line":366},[290,453,454],{"class":300},"        nodeCompat: ",[290,456,384],{"class":372},[290,458,459],{"class":292,"line":378},[290,460,461],{"class":300},"      }\n",[290,463,464],{"class":292,"line":387},[290,465,390],{"class":300},[290,467,468],{"class":292,"line":393},[290,469,396],{"class":300},[227,471,472],{},"::",[227,474,475,476,479,480,260,483,486,487,492,493,498],{},"通过设置 ",[235,477,478],{},"deployConfig: true","，Nitro 将自动为您生成一个正确配置的 ",[235,481,482],{},"wrangler.json",[484,485],"br",{},"\n如果您需要添加 ",[249,488,491],{"href":489,"rel":490},"https://developers.cloudflare.com/workers/wrangler/configuration/",[258],"Cloudflare Workers 配置","，例如 ",[249,494,497],{"href":495,"rel":496},"https://developers.cloudflare.com/workers/runtime-apis/bindings/",[258],"bindings","，您可以：",[500,501,502,513],"ul",{},[503,504,505,506,509,510,512],"li",{},"在您的 Nitro 配置中设置 ",[235,507,508],{},"cloudflare: { wrangler : {} }","。这与 ",[235,511,482],{}," 的类型相同。",[503,514,515,516,518],{},"提供您自己的 ",[235,517,482],{},"。Nitro 将与适当的设置合并您的配置，包括指向构建输出。",[520,521,522],"h3",{"id":522},"本地预览",[227,524,525,526,531],{},"您可以使用 ",[249,527,530],{"href":528,"rel":529},"https://github.com/cloudflare/workers-sdk/tree/main/packages/wrangler",[258],"Wrangler"," 在本地预览您的应用：",[533,534],"pm-run",{"script":535},"build",[537,538],"pm-x",{"command":539},"wrangler dev",[520,541,542],{"id":542},"手动部署",[227,544,545],{},"构建应用程序后，您可以使用 Wrangler 手动部署它。",[227,547,548],{},"首先确保您已登录到 Cloudflare 账户：",[537,550],{"command":551},"wrangler login",[227,553,554],{},"然后您可以用以下命令部署应用程序：",[537,556],{"command":557},"wrangler deploy",[520,559,560],{"id":560},"运行时钩子",[227,562,563,564,567,568,260],{},"您可以使用以下 ",[249,565,560],{"href":566},"/guide/plugins#nitro-runtime-hooks"," 来扩展 ",[249,569,572],{"href":570,"rel":571},"https://developers.cloudflare.com/workers/runtime-apis/handlers/",[258],"Worker 处理程序",[239,574],{"to":566},[500,576,577,586,595,604,613],{},[503,578,579],{},[249,580,583],{"href":581,"rel":582},"https://developers.cloudflare.com/workers/runtime-apis/handlers/scheduled/",[258],[235,584,585],{},"cloudflare:scheduled",[503,587,588],{},[249,589,592],{"href":590,"rel":591},"https://developers.cloudflare.com/email-routing/email-workers/runtime-api/",[258],[235,593,594],{},"cloudflare:email",[503,596,597],{},[249,598,601],{"href":599,"rel":600},"https://developers.cloudflare.com/queues/configuration/javascript-apis/#consumer",[258],[235,602,603],{},"cloudflare:queue",[503,605,606],{},[249,607,610],{"href":608,"rel":609},"https://developers.cloudflare.com/workers/runtime-apis/handlers/tail/",[258],[235,611,612],{},"cloudflare:tail",[503,614,615],{},[235,616,617],{},"cloudflare:trace",[222,619,621],{"id":620},"cloudflare-pages","Cloudflare Pages",[227,623,624,233,626],{},[230,625,232],{},[235,627,628],{},"cloudflare_pages",[239,630],{"to":631,"title":621},"https://pages.cloudflare.com/",[243,633,634],{},[227,635,247,636,638],{},[249,637,252],{"href":251}," 实现。",[640,641,642],"warning",{},[227,643,644,645,649],{},"Cloudflare ",[249,646,648],{"href":647},"#cloudflare-workers","Workers Module"," 是推荐用于部署的新预设。如果您只需特定功能，请考虑使用 Pages。",[227,651,652,653,277],{},"以下是将 Nitro 应用部署到 Cloudflare Pages 的示例 ",[235,654,276],{},[279,656,657,724],{},[282,658,660],{"className":284,"code":659,"filename":276,"language":286,"meta":5,"style":5},"import { defineNitroConfig } from \"nitro/config\";\n\nexport default defineNitroConfig({\n    preset: \"cloudflare_pages\",\n    cloudflare: {\n      deployConfig: true,\n      nodeCompat:true\n    }\n})\n",[235,661,662,674,678,688,697,701,709,716,720],{"__ignoreMap":5},[290,663,664,666,668,670,672],{"class":292,"line":293},[290,665,297],{"class":296},[290,667,301],{"class":300},[290,669,304],{"class":296},[290,671,308],{"class":307},[290,673,311],{"class":300},[290,675,676],{"class":292,"line":314},[290,677,318],{"emptyLinePlaceholder":317},[290,679,680,682,684,686],{"class":292,"line":321},[290,681,324],{"class":296},[290,683,327],{"class":296},[290,685,331],{"class":330},[290,687,334],{"class":300},[290,689,690,692,695],{"class":292,"line":337},[290,691,352],{"class":300},[290,693,694],{"class":307},"\"cloudflare_pages\"",[290,696,346],{"class":300},[290,698,699],{"class":292,"line":349},[290,700,363],{"class":300},[290,702,703,705,707],{"class":292,"line":360},[290,704,369],{"class":300},[290,706,373],{"class":372},[290,708,346],{"class":300},[290,710,711,714],{"class":292,"line":366},[290,712,713],{"class":300},"      nodeCompat:",[290,715,384],{"class":372},[290,717,718],{"class":292,"line":378},[290,719,390],{"class":300},[290,721,722],{"class":292,"line":387},[290,723,396],{"class":300},[282,725,727],{"className":284,"code":726,"filename":400,"language":286,"meta":5,"style":5},"export default defineNuxtConfig({\n    nitro: {\n      preset: \"cloudflare_pages\",\n      cloudflare: {\n        deployConfig: true,\n        nodeCompat:true\n      }\n    }\n})\n",[235,728,729,739,743,751,755,763,770,774,778],{"__ignoreMap":5},[290,730,731,733,735,737],{"class":292,"line":293},[290,732,324],{"class":296},[290,734,327],{"class":296},[290,736,411],{"class":330},[290,738,334],{"class":300},[290,740,741],{"class":292,"line":314},[290,742,426],{"class":300},[290,744,745,747,749],{"class":292,"line":321},[290,746,431],{"class":300},[290,748,694],{"class":307},[290,750,346],{"class":300},[290,752,753],{"class":292,"line":337},[290,754,440],{"class":300},[290,756,757,759,761],{"class":292,"line":349},[290,758,445],{"class":300},[290,760,373],{"class":372},[290,762,346],{"class":300},[290,764,765,768],{"class":292,"line":360},[290,766,767],{"class":300},"        nodeCompat:",[290,769,384],{"class":372},[290,771,772],{"class":292,"line":366},[290,773,461],{"class":300},[290,775,776],{"class":292,"line":378},[290,777,390],{"class":300},[290,779,780],{"class":292,"line":387},[290,781,396],{"class":300},[227,783,472],{},[227,785,786,787,790,791,794,795,800],{},"Nitro 将自动生成一个 ",[235,788,789],{},"_routes.json"," 文件，该文件控制来自文件的路由和来自 Worker 脚本的路由。通过配置选项 ",[235,792,793],{},"cloudflare.pages.routes"," 可以覆盖自动生成的路由文件 (",[249,796,799],{"href":797,"rel":798},"https://developers.cloudflare.com/pages/platform/functions/routing/#functions-invocation-routes",[258],"了解更多",")。",[520,802,522],{"id":803},"本地预览-1",[227,805,525,806,531],{},[249,807,530],{"href":528,"rel":808},[258],[533,810],{"script":535},[537,812],{"command":813},"wrangler pages dev",[520,815,542],{"id":816},"手动部署-1",[227,818,819],{},"构建应用程序后，您可以使用 Wrangler 手动部署它，首先确保您已登录到 Cloudflare 账户：",[537,821],{"command":551},[227,823,554],{},[537,825],{"command":826},"wrangler pages deploy",[222,828,830],{"id":829},"使用-github-actions-在-cicd-中部署","使用 GitHub Actions 在 CI/CD 中部署",[227,832,833,834,839],{},"无论您是使用 Cloudflare Pages 还是 Cloudflare Workers，您都可以使用 ",[249,835,838],{"href":836,"rel":837},"https://github.com/marketplace/actions/deploy-to-cloudflare-workers-with-wrangler",[258],"Wrangler GitHub actions"," 来部署您的应用。",[243,841,842],{},[227,843,844,847,848,852,853,855],{},[230,845,846],{},"注意："," 请记得 ",[249,849,851],{"href":850},"/deploy#changing-the-deployment-preset","指示 Nitro 使用正确的预设","（请注意，这在所有预设中都是必要的，包括 ",[235,854,628],{},"）。",[222,857,858],{"id":858},"环境变量",[227,860,861,862,865,866,869],{},"Nitro 允许您通过 ",[235,863,864],{},"process.env"," 或 ",[235,867,868],{},"import.meta.env"," 或运行时配置通用访问环境变量。",[243,871,872],{},[227,873,874,875,878],{},"确保仅在 ",[230,876,877],{},"事件生命周期内"," 访问环境变量，而不是在全局上下文中，因为 Cloudflare 仅在请求生命周期期间提供它们，而不是在此之前。",[227,880,881,884,885,888,889,892],{},[230,882,883],{},"示例："," 如果您设置了 ",[235,886,887],{},"SECRET"," 和 ",[235,890,891],{},"NITRO_HELLO_THERE"," 环境变量，您可以通过以下方式访问它们：",[282,894,896],{"className":284,"code":895,"language":286,"meta":5,"style":5},"import { defineHandler } from \"nitro/h3\";\n\nconsole.log(process.env.SECRET) // 请注意，这是在全局范围内！因此实际上它不起作用，变量是未定义的！\n\nexport default defineHandler((event) => {\n  // 请注意，所有以下方式都是访问上述变量的有效方法\n  useRuntimeConfig(event).helloThere\n  useRuntimeConfig(event).secret\n  process.env.NITRO_HELLO_THERE\n  import.meta.env.SECRET\n});\n",[235,897,898,912,916,936,940,964,969,977,984,992,1009],{"__ignoreMap":5},[290,899,900,902,905,907,910],{"class":292,"line":293},[290,901,297],{"class":296},[290,903,904],{"class":300}," { defineHandler } ",[290,906,304],{"class":296},[290,908,909],{"class":307}," \"nitro/h3\"",[290,911,311],{"class":300},[290,913,914],{"class":292,"line":314},[290,915,318],{"emptyLinePlaceholder":317},[290,917,918,921,924,927,929,932],{"class":292,"line":321},[290,919,920],{"class":300},"console.",[290,922,923],{"class":330},"log",[290,925,926],{"class":300},"(process.env.",[290,928,887],{"class":372},[290,930,931],{"class":300},") ",[290,933,935],{"class":934},"sCsY4","// 请注意，这是在全局范围内！因此实际上它不起作用，变量是未定义的！\n",[290,937,938],{"class":292,"line":337},[290,939,318],{"emptyLinePlaceholder":317},[290,941,942,944,946,949,952,956,958,961],{"class":292,"line":349},[290,943,324],{"class":296},[290,945,327],{"class":296},[290,947,948],{"class":330}," defineHandler",[290,950,951],{"class":300},"((",[290,953,955],{"class":954},"sQHwn","event",[290,957,931],{"class":300},[290,959,960],{"class":296},"=>",[290,962,963],{"class":300}," {\n",[290,965,966],{"class":292,"line":360},[290,967,968],{"class":934},"  // 请注意，所有以下方式都是访问上述变量的有效方法\n",[290,970,971,974],{"class":292,"line":366},[290,972,973],{"class":330},"  useRuntimeConfig",[290,975,976],{"class":300},"(event).helloThere\n",[290,978,979,981],{"class":292,"line":378},[290,980,973],{"class":330},[290,982,983],{"class":300},"(event).secret\n",[290,985,986,989],{"class":292,"line":387},[290,987,988],{"class":300},"  process.env.",[290,990,991],{"class":372},"NITRO_HELLO_THERE\n",[290,993,994,997,1000,1003,1006],{"class":292,"line":393},[290,995,996],{"class":296},"  import",[290,998,999],{"class":300},".",[290,1001,1002],{"class":372},"meta",[290,1004,1005],{"class":300},".env.",[290,1007,1008],{"class":372},"SECRET\n",[290,1010,1012],{"class":292,"line":1011},11,[290,1013,1014],{"class":300},"});\n",[520,1016,1017],{"id":1017},"在开发模式中指定变量",[227,1019,1020,1021,865,1024,1027],{},"在开发时，您可以使用 ",[235,1022,1023],{},".env",[235,1025,1026],{},".env.local"," 文件指定环境变量：",[282,1029,1033],{"className":1030,"code":1031,"language":1032,"meta":5,"style":5},"language-ini shiki shiki-themes github-light github-dark github-dark","NITRO_HELLO_THERE=\"captain\"\nSECRET=\"top-secret\"\n","ini",[235,1034,1035,1045],{"__ignoreMap":5},[290,1036,1037,1039,1042],{"class":292,"line":293},[290,1038,891],{"class":296},[290,1040,1041],{"class":300},"=",[290,1043,1044],{"class":307},"\"captain\"\n",[290,1046,1047,1049,1051],{"class":292,"line":314},[290,1048,887],{"class":296},[290,1050,1041],{"class":300},[290,1052,1053],{"class":307},"\"top-secret\"\n",[243,1055,1056],{},[227,1057,1058,1060,1061,888,1063,1065,1066,1069],{},[230,1059,846],{}," 请确保将 ",[235,1062,1023],{},[235,1064,1026],{}," 添加到 ",[235,1067,1068],{},".gitignore"," 文件中，以免您提交它，因为它可能包含敏感信息。",[520,1071,1072],{"id":1072},"为本地预览指定变量",[227,1074,1075,1076,865,1078,1080,1081,1084,1085,888,1090,1095],{},"构建后，当您尝试在本地使用 ",[235,1077,539],{},[235,1079,813],{}," 测试项目时，为了访问环境变量，您需要在项目根目录中指定在 ",[235,1082,1083],{},".dev.vars"," 文件中（如 ",[249,1086,1089],{"href":1087,"rel":1088},"https://developers.cloudflare.com/pages/functions/bindings/#interact-with-your-environment-variables-locally",[258],"Pages",[249,1091,1094],{"href":1092,"rel":1093},"https://developers.cloudflare.com/workers/configuration/environment-variables/#interact-with-environment-variables-locally",[258],"Workers"," 文档中所示）。",[227,1097,1098,1099,865,1101,1103,1104,1106],{},"如果您在开发时使用了 ",[235,1100,1023],{},[235,1102,1026],{}," 文件，则您的 ",[235,1105,1083],{}," 应与之相同。",[243,1108,1109],{},[227,1110,1111,1060,1113,1065,1115,1069],{},[230,1112,846],{},[235,1114,1083],{},[235,1116,1068],{},[520,1118,1119],{"id":1119},"为生产环境指定变量",[227,1121,1122,1123,1130],{},"对于生产环境，请使用 Cloudflare 控制台或 ",[249,1124,1127],{"href":1125,"rel":1126},"https://developers.cloudflare.com/workers/wrangler/commands/#secret",[258],[235,1128,1129],{},"wrangler secret"," 命令设置环境变量和机密。",[520,1132,1134,1135,214,1138,1140],{"id":1133},"使用-wranglertomlwranglerjson-指定变量","使用 ",[235,1136,1137],{},"wrangler.toml",[235,1139,482],{}," 指定变量",[227,1142,1143,1144,214,1146,1148],{},"您可以指定自定义的 ",[235,1145,1137],{},[235,1147,482],{}," 文件，并在其中定义变量。",[640,1150,1151],{},[227,1152,1153],{},"请注意，这不推荐用于敏感数据，例如机密。",[227,1155,1156],{},[230,1157,883],{},[282,1159,1161],{"className":1030,"code":1160,"filename":1137,"language":1032,"meta":5,"style":5},"# 共享\n[vars]\nNITRO_HELLO_THERE=\"general\"\nSECRET=\"secret\"\n\n# 为 `--env production` 用法覆盖值\n[env.production.vars]\nNITRO_HELLO_THERE=\"captain\"\nSECRET=\"top-secret\"\n",[235,1162,1163,1168,1173,1182,1191,1195,1200,1205,1213],{"__ignoreMap":5},[290,1164,1165],{"class":292,"line":293},[290,1166,1167],{"class":934},"# 共享\n",[290,1169,1170],{"class":292,"line":314},[290,1171,1172],{"class":330},"[vars]\n",[290,1174,1175,1177,1179],{"class":292,"line":321},[290,1176,891],{"class":296},[290,1178,1041],{"class":300},[290,1180,1181],{"class":307},"\"general\"\n",[290,1183,1184,1186,1188],{"class":292,"line":337},[290,1185,887],{"class":296},[290,1187,1041],{"class":300},[290,1189,1190],{"class":307},"\"secret\"\n",[290,1192,1193],{"class":292,"line":349},[290,1194,318],{"emptyLinePlaceholder":317},[290,1196,1197],{"class":292,"line":360},[290,1198,1199],{"class":934},"# 为 `--env production` 用法覆盖值\n",[290,1201,1202],{"class":292,"line":366},[290,1203,1204],{"class":330},"[env.production.vars]\n",[290,1206,1207,1209,1211],{"class":292,"line":378},[290,1208,891],{"class":296},[290,1210,1041],{"class":300},[290,1212,1044],{"class":307},[290,1214,1215,1217,1219],{"class":292,"line":387},[290,1216,887],{"class":296},[290,1218,1041],{"class":300},[290,1220,1053],{"class":307},[222,1222,1224],{"id":1223},"直接访问-cloudflare-bindings","直接访问 Cloudflare bindings",[227,1226,1227,1228,1233,1234,800],{},"绑定允许您与 Cloudflare 平台上的资源交互，这些资源的示例包括键值数据存储 (",[249,1229,1232],{"href":1230,"rel":1231},"https://developers.cloudflare.com/kv/",[258],"KVs",") 和无服务器 SQL 数据库 (",[249,1235,1238],{"href":1236,"rel":1237},"https://developers.cloudflare.com/d1/",[258],"D1s",[239,1240,1241],{},[227,1242,1243,1244,888,1248,1252],{},"有关绑定的更多详细信息及其用法，请参阅 Cloudflare 的 ",[249,1245,1089],{"href":1246,"rel":1247},"https://developers.cloudflare.com/pages/functions/bindings/",[258],[249,1249,1094],{"href":1250,"rel":1251},"https://developers.cloudflare.com/workers/configuration/bindings/#bindings",[258]," 文档。",[1254,1255,1256],"tip",{},[227,1257,1258,1259,888,1262,1265],{},"\nNitro 提供了高级 API，以便与 ",[249,1260,68],{"href":1261},"/guide/storage",[249,1263,38],{"href":1264},"/guide/database"," 交互，强烈建议您优先使用它们，而不是直接依赖低级 API 以确保使用稳定性。",[239,1267],{"to":1264,"title":1268},"数据库层",[239,1270],{"to":1261,"title":68},[227,1272,1273,1274,1277],{},"在运行时，您可以通过访问请求事件的 ",[235,1275,1276],{},"context.cloudflare.env"," 字段来访问绑定，例如，您可以这样访问 D1 绑定：",[282,1279,1281],{"className":284,"code":1280,"language":286,"meta":5,"style":5},"import { defineHandler } from \"nitro/h3\";\n\ndefineHandler(async (event) => {\n  const { cloudflare } = event.context\n  const stmt = await cloudflare.env.MY_D1.prepare('SELECT id FROM table')\n  const { results } = await stmt.all()\n})\n",[235,1282,1283,1295,1299,1321,1340,1372,1396],{"__ignoreMap":5},[290,1284,1285,1287,1289,1291,1293],{"class":292,"line":293},[290,1286,297],{"class":296},[290,1288,904],{"class":300},[290,1290,304],{"class":296},[290,1292,909],{"class":307},[290,1294,311],{"class":300},[290,1296,1297],{"class":292,"line":314},[290,1298,318],{"emptyLinePlaceholder":317},[290,1300,1301,1304,1307,1310,1313,1315,1317,1319],{"class":292,"line":321},[290,1302,1303],{"class":330},"defineHandler",[290,1305,1306],{"class":300},"(",[290,1308,1309],{"class":296},"async",[290,1311,1312],{"class":300}," (",[290,1314,955],{"class":954},[290,1316,931],{"class":300},[290,1318,960],{"class":296},[290,1320,963],{"class":300},[290,1322,1323,1326,1329,1332,1335,1337],{"class":292,"line":337},[290,1324,1325],{"class":296},"  const",[290,1327,1328],{"class":300}," { ",[290,1330,1331],{"class":372},"cloudflare",[290,1333,1334],{"class":300}," } ",[290,1336,1041],{"class":296},[290,1338,1339],{"class":300}," event.context\n",[290,1341,1342,1344,1347,1350,1353,1356,1359,1361,1364,1366,1369],{"class":292,"line":349},[290,1343,1325],{"class":296},[290,1345,1346],{"class":372}," stmt",[290,1348,1349],{"class":296}," =",[290,1351,1352],{"class":296}," await",[290,1354,1355],{"class":300}," cloudflare.env.",[290,1357,1358],{"class":372},"MY_D1",[290,1360,999],{"class":300},[290,1362,1363],{"class":330},"prepare",[290,1365,1306],{"class":300},[290,1367,1368],{"class":307},"'SELECT id FROM table'",[290,1370,1371],{"class":300},")\n",[290,1373,1374,1376,1378,1381,1383,1385,1387,1390,1393],{"class":292,"line":360},[290,1375,1325],{"class":296},[290,1377,1328],{"class":300},[290,1379,1380],{"class":372},"results",[290,1382,1334],{"class":300},[290,1384,1041],{"class":296},[290,1386,1352],{"class":296},[290,1388,1389],{"class":300}," stmt.",[290,1391,1392],{"class":330},"all",[290,1394,1395],{"class":300},"()\n",[290,1397,1398],{"class":292,"line":366},[290,1399,396],{"class":300},[520,1401,1402],{"id":1402},"在本地开发中访问绑定",[243,1404,1405],{},[227,1406,1407,1410],{},[235,1408,1409],{},"nitro-cloudflare-dev"," 模块是实验性的。Nitro 团队正在寻找更本地化的集成，这可能在不久的将来使该模块不再需要。",[227,1412,1413,1414,214,1416,1418,1419,1422,1423,1425],{},"为了在开发模式中访问绑定，我们首先定义绑定。您可以在 ",[235,1415,1137],{},[235,1417,482],{}," 文件中完成此操作，或在 Nitro 配置中的 ",[235,1420,1421],{},"cloudflare.wrangler"," 下直接完成（接受与 ",[235,1424,482],{}," 相同的类型）。",[227,1427,1428,1429,1431],{},"例如，在 ",[235,1430,1137],{}," 中定义变量和 KV 命名空间：",[282,1433,1435],{"className":1030,"code":1434,"filename":1137,"language":1032,"meta":5,"style":5},"[vars]\nMY_VARIABLE=\"my-value\"\n\n[[kv_namespaces]]\nbinding = \"MY_KV\"\nid = \"xxx\"\n",[235,1436,1437,1441,1451,1455,1463,1474],{"__ignoreMap":5},[290,1438,1439],{"class":292,"line":293},[290,1440,1172],{"class":330},[290,1442,1443,1446,1448],{"class":292,"line":314},[290,1444,1445],{"class":296},"MY_VARIABLE",[290,1447,1041],{"class":300},[290,1449,1450],{"class":307},"\"my-value\"\n",[290,1452,1453],{"class":292,"line":321},[290,1454,318],{"emptyLinePlaceholder":317},[290,1456,1457,1460],{"class":292,"line":337},[290,1458,1459],{"class":330},"[[kv_namespaces]",[290,1461,1462],{"class":300},"]\n",[290,1464,1465,1468,1471],{"class":292,"line":349},[290,1466,1467],{"class":296},"binding",[290,1469,1470],{"class":300}," = ",[290,1472,1473],{"class":307},"\"MY_KV\"\n",[290,1475,1476,1479,1481],{"class":292,"line":360},[290,1477,1478],{"class":296},"id",[290,1480,1470],{"class":300},[290,1482,1483],{"class":307},"\"xxx\"\n",[227,1485,1486],{},"或在您的 Nitro 配置中：",[282,1488,1493],{"className":1489,"code":1490,"filename":1491,"language":1492,"meta":5,"style":5},"language-js shiki shiki-themes github-light github-dark github-dark","import { defineNitroConfig } from \"nitro/config\";\nimport nitroCloudflareBindings from \"nitro-cloudflare-dev\";\n\nexport default defineNitroConfig({\n    cloudflare: {\n      wrangler: {\n        vars: {\n          MY_VARIABLE: \"my-value\"\n        },\n        kv_namespaces: [\n          {\n            binding: \"MY_KV\",\n            id: \"xxx\"\n          }\n        ]\n      }\n    }\n});\n","nitro.config.js","js",[235,1494,1495,1507,1521,1525,1535,1539,1544,1549,1556,1561,1566,1571,1582,1590,1596,1602,1607,1612],{"__ignoreMap":5},[290,1496,1497,1499,1501,1503,1505],{"class":292,"line":293},[290,1498,297],{"class":296},[290,1500,301],{"class":300},[290,1502,304],{"class":296},[290,1504,308],{"class":307},[290,1506,311],{"class":300},[290,1508,1509,1511,1514,1516,1519],{"class":292,"line":314},[290,1510,297],{"class":296},[290,1512,1513],{"class":300}," nitroCloudflareBindings ",[290,1515,304],{"class":296},[290,1517,1518],{"class":307}," \"nitro-cloudflare-dev\"",[290,1520,311],{"class":300},[290,1522,1523],{"class":292,"line":321},[290,1524,318],{"emptyLinePlaceholder":317},[290,1526,1527,1529,1531,1533],{"class":292,"line":337},[290,1528,324],{"class":296},[290,1530,327],{"class":296},[290,1532,331],{"class":330},[290,1534,334],{"class":300},[290,1536,1537],{"class":292,"line":349},[290,1538,363],{"class":300},[290,1540,1541],{"class":292,"line":360},[290,1542,1543],{"class":300},"      wrangler: {\n",[290,1545,1546],{"class":292,"line":366},[290,1547,1548],{"class":300},"        vars: {\n",[290,1550,1551,1554],{"class":292,"line":378},[290,1552,1553],{"class":300},"          MY_VARIABLE: ",[290,1555,1450],{"class":307},[290,1557,1558],{"class":292,"line":387},[290,1559,1560],{"class":300},"        },\n",[290,1562,1563],{"class":292,"line":393},[290,1564,1565],{"class":300},"        kv_namespaces: [\n",[290,1567,1568],{"class":292,"line":1011},[290,1569,1570],{"class":300},"          {\n",[290,1572,1574,1577,1580],{"class":292,"line":1573},12,[290,1575,1576],{"class":300},"            binding: ",[290,1578,1579],{"class":307},"\"MY_KV\"",[290,1581,346],{"class":300},[290,1583,1585,1588],{"class":292,"line":1584},13,[290,1586,1587],{"class":300},"            id: ",[290,1589,1483],{"class":307},[290,1591,1593],{"class":292,"line":1592},14,[290,1594,1595],{"class":300},"          }\n",[290,1597,1599],{"class":292,"line":1598},15,[290,1600,1601],{"class":300},"        ]\n",[290,1603,1605],{"class":292,"line":1604},16,[290,1606,461],{"class":300},[290,1608,1610],{"class":292,"line":1609},17,[290,1611,390],{"class":300},[290,1613,1615],{"class":292,"line":1614},18,[290,1616,1014],{"class":300},[243,1618,1619],{},[227,1620,1621],{},"\n仅默认环境中的绑定被识别。",[227,1623,1624,1625,1627,1628,1631],{},"接下来，我们安装 ",[235,1626,1409],{}," 模块和所需的 ",[235,1629,1630],{},"wrangler"," 包（如果尚未安装）：",[1633,1634],"pm-install",{"name":1635},"-D nitro-cloudflare-dev wrangler",[227,1637,1638],{},"然后定义模块：",[279,1640,1641,1681],{},[282,1642,1644],{"className":1489,"code":1643,"filename":1491,"language":1492,"meta":5,"style":5},"import nitroCloudflareBindings from \"nitro-cloudflare-dev\";\n\nexport default defineNitroConfig({\n  modules: [nitroCloudflareBindings],\n});\n",[235,1645,1646,1658,1662,1672,1677],{"__ignoreMap":5},[290,1647,1648,1650,1652,1654,1656],{"class":292,"line":293},[290,1649,297],{"class":296},[290,1651,1513],{"class":300},[290,1653,304],{"class":296},[290,1655,1518],{"class":307},[290,1657,311],{"class":300},[290,1659,1660],{"class":292,"line":314},[290,1661,318],{"emptyLinePlaceholder":317},[290,1663,1664,1666,1668,1670],{"class":292,"line":321},[290,1665,324],{"class":296},[290,1667,327],{"class":296},[290,1669,331],{"class":330},[290,1671,334],{"class":300},[290,1673,1674],{"class":292,"line":337},[290,1675,1676],{"class":300},"  modules: [nitroCloudflareBindings],\n",[290,1678,1679],{"class":292,"line":349},[290,1680,1014],{"class":300},[282,1682,1684],{"className":284,"code":1683,"filename":400,"language":286,"meta":5,"style":5},"export default defineNuxtConfig({\n  modules: ['nitro-cloudflare-dev']\n})\n",[235,1685,1686,1696,1706],{"__ignoreMap":5},[290,1687,1688,1690,1692,1694],{"class":292,"line":293},[290,1689,324],{"class":296},[290,1691,327],{"class":296},[290,1693,411],{"class":330},[290,1695,334],{"class":300},[290,1697,1698,1701,1704],{"class":292,"line":314},[290,1699,1700],{"class":300},"  modules: [",[290,1702,1703],{"class":307},"'nitro-cloudflare-dev'",[290,1705,1462],{"class":300},[290,1707,1708],{"class":292,"line":321},[290,1709,396],{"class":300},[227,1711,472],{},[227,1713,1714],{},"从此时起，当运行",[533,1716],{"script":1717},"dev",[227,1719,1720,1721,888,1723,1726],{},"您将能够从请求事件访问 ",[235,1722,1445],{},[235,1724,1725],{},"MY_KV","，就像上面所示。",[1728,1729,1730],"style",{},"html pre.shiki code .so5gQ, html code.shiki .so5gQ{--shiki-light:#D73A49;--shiki-default:#F97583;--shiki-dark:#F97583}html pre.shiki code .slsVL, html code.shiki .slsVL{--shiki-light:#24292E;--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8}html pre.shiki code .sfrk1, html code.shiki .sfrk1{--shiki-light:#032F62;--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF}html pre.shiki code .shcOC, html code.shiki .shcOC{--shiki-light:#6F42C1;--shiki-default:#B392F0;--shiki-dark:#B392F0}html pre.shiki code .suiK_, html code.shiki .suiK_{--shiki-light:#005CC5;--shiki-default:#79B8FF;--shiki-dark:#79B8FF}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sCsY4, html code.shiki .sCsY4{--shiki-light:#6A737D;--shiki-default:#6A737D;--shiki-dark:#6A737D}html pre.shiki code .sQHwn, html code.shiki .sQHwn{--shiki-light:#E36209;--shiki-default:#FFAB70;--shiki-dark:#FFAB70}",{"title":5,"searchDepth":314,"depth":314,"links":1732},[1733,1738,1742,1743,1750],{"id":224,"depth":314,"text":225,"children":1734},[1735,1736,1737],{"id":522,"depth":321,"text":522},{"id":542,"depth":321,"text":542},{"id":560,"depth":321,"text":560},{"id":620,"depth":314,"text":621,"children":1739},[1740,1741],{"id":803,"depth":321,"text":522},{"id":816,"depth":321,"text":542},{"id":829,"depth":314,"text":830},{"id":858,"depth":314,"text":858,"children":1744},[1745,1746,1747,1748],{"id":1017,"depth":321,"text":1017},{"id":1072,"depth":321,"text":1072},{"id":1119,"depth":321,"text":1119},{"id":1133,"depth":321,"text":1749},"使用 wrangler.toml/wrangler.json 指定变量",{"id":1223,"depth":314,"text":1224,"children":1751},[1752],{"id":1402,"depth":321,"text":1402},"部署 Nitro 应用到 Cloudflare。","md",{},{},{"title":137,"description":1753},"xjfnYT4tmXeEf04HIHTQHJHP8yDQeu4P7dJ4U6tHFYo",[1760,1762],{"title":133,"path":134,"stem":135,"description":1761,"children":-1},"将 Nitro 应用部署到 Cleavr。",{"title":141,"path":142,"stem":143,"description":1763,"children":-1},"将 Nitro 应用部署到 Deno Deploy。",1761554645123]